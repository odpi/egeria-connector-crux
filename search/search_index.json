{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"","title":"About"},{"location":"how-it-works/","text":"How it works \u00b6 Integrating with Egeria \u00b6 The connector itself is implemented as a plugin repository connector that runs through the Egeria OMAG Platform (server chassis). It does so by being implemented as an Open Metadata Repository Connector and implementing the repository-level methods defined by the Metadata Collection interface. Running Crux \u00b6 Crux itself is started as an embedded process within the connector. It can be configured to use any of the various pluggable persistence layers supported by Crux itself, and communication between the Java code of the connector and Crux itself (which is implemented in Clojure) occurs directly via the Crux Java API (not via REST). The Metadata Collection methods simply communicate with Crux via Crux's Java API to read and write information to the underlying Crux node. Interactions between the components \u00b6 Crux itself handles write transactions and persistence guarantees via its APIs, ensuring that all data is at least recorded into the transaction log and document store prior to any write method returning. Synchronous by default, but configurable for asynchronous operation By default, the repository connector further awaits confirmation that any write has been indexed (and is therefore available for read operations) prior to returning. However, it is also possible to configure the connector in an \"ingest-optimized\" mode that allows the indexing to occur asynchronously, and can therefore improve the speed of write operations significantly.","title":"How it works"},{"location":"how-it-works/#how-it-works","text":"","title":"How it works"},{"location":"how-it-works/#integrating-with-egeria","text":"The connector itself is implemented as a plugin repository connector that runs through the Egeria OMAG Platform (server chassis). It does so by being implemented as an Open Metadata Repository Connector and implementing the repository-level methods defined by the Metadata Collection interface.","title":"Integrating with Egeria"},{"location":"how-it-works/#running-crux","text":"Crux itself is started as an embedded process within the connector. It can be configured to use any of the various pluggable persistence layers supported by Crux itself, and communication between the Java code of the connector and Crux itself (which is implemented in Clojure) occurs directly via the Crux Java API (not via REST). The Metadata Collection methods simply communicate with Crux via Crux's Java API to read and write information to the underlying Crux node.","title":"Running Crux"},{"location":"how-it-works/#interactions-between-the-components","text":"Crux itself handles write transactions and persistence guarantees via its APIs, ensuring that all data is at least recorded into the transaction log and document store prior to any write method returning. Synchronous by default, but configurable for asynchronous operation By default, the repository connector further awaits confirmation that any write has been indexed (and is therefore available for read operations) prior to returning. However, it is also possible to configure the connector in an \"ingest-optimized\" mode that allows the indexing to occur asynchronously, and can therefore improve the speed of write operations significantly.","title":"Interactions between the components"},{"location":"cts/testing-overview/","text":"Testing overview \u00b6 Conformance Test Suite ( CTS ) \u00b6 The Conformance Test Suite ( CTS ) measures conformance of the repository with the expected behavior of an Egeria repository. Conformance indicates that the repository behaves precisely as expected for an Egeria repository. Performance Test Suite ( PTS ) \u00b6 The Performance Test Suite ( PTS ) focuses on measuring the performance of the various operations of an Egeria repository. It does not do as thorough checking of every individual result as the CTS , but instead ensures a consistent volume of metadata exists in the environment for the duration of the tests and records various metrics about both these volumes and the individual runtimes of each execution (in milliseconds) of the various metadata repository operations. Details on the performance metrics The median of all results for that method across all executions for a given set of volume parameters is given (all times in milliseconds) to give an idea of the \"typical\" result, while limiting potential skew from significant outliers. A more detailed set of statistics is best reviewed through the Jupyter Notebook provided in each results directory, where you can review: the full distributions of execution times (including the outliers) detailed individual outlier results (e.g. the top-10 slowest response times per method) volumes in place during the tests (how many entities, how many relationships, etc) The volume parameters that were used for each test are specified using the convention i-s , where i is the value for the instancesPerType parameter to the PTS and s is the value for maxSearchResults . For example, 5-2 means 5 instances will be created for every open metadata type and 2 will be the maximum number of results per page for methods that include paging. All tests are run from 5-2 through 20-10 to give a sense of the performance impact of doubling the number of instances and search results. Above this, the graph queries are no longer included: they become exponentially more complex as the volumes grow, and while they will still return results, the depth of their testing in the PTS means that they can contribute many hours (or even days) to the overall suite execution -- they are therefore left out to be able to more quickly produce results for the other methods at progressively higher volumes. The page size is left at a maximum of 10 for subsequent tests so that it is only the volume of instances in total that are doubling each time, rather than also the number of detailed results. Instance counts range from a few thousand (at 5-2 ) up to nearly one hundred thousand (at 80-10 ). In the graphical comparisons, a point plot is used to show the typical execution time of each method at the different volumes / by repository. Each point on the plot represents the median execution time for that method, at a given volume of metadata. (For the repository comparison plots, pts = Crux and janus = JanusGraph.) The horizontal lines that appear around each point are confidence intervals calculated by a bootstrapping process: in simple terms, the larger the horizontal line, the more variability there is for that particular method's execution time (a singular median value is insufficient to represent such variability on its own). Reproducibility \u00b6 Re-running the tests \u00b6 The cts/charts directory contains a Helm chart to automate the execution of these suites against a Crux repository connector, to reproduce these results. These use a default configuration for the Crux repository where Lucene is used as a text index and RocksDB is used for all persistence: index store, document store and transaction log. No additional tuning of any parameters (Crux or RocksDB) is applied: they use all of their default settings. Data points \u00b6 The cts/results directory contains results of running the suites against the Crux connector. For each test suite execution, you will find the following details: openmetadata_cts_summary.json - a summary of the results of each profile Description of the k8s environment deployment - details of the deployed components used for the test configmap.yaml - details of the variables used within the components of the test The OMAG server configurations: omag.server.crux.config - the configuration of the Crux connector (proxy) omag.server.cts.config - the configuration of the test workbench The cohort registrations: cohort.coco.crux.local - the local Crux connector (proxy) cohort registration information cohort.coco.crux.remote - the cohort members considered remote from the Crux connector (proxy)'s perspective cohort.coco.cts.local - the local test Workbench cohort registration cohort.coco.cts.remote - the cohort members considered remote from the test Workbench's perspective Detailed results: pd.tar.gz - an archive containing the full detailed results of every profile tested tcd.tar.gz - an archive containing the full detailed results of every test case executed Jupyter Notebooks used to analyze the results: analyze-performance-results.ipynb - details about the environment, instance counts, and distribution of elapsed times per method, also illustrating how the results can be analyzed more deeply calculate-medians.ipynb - used to calculate the medians displayed in the table further below (to run either of these notebooks, you will need to first extract the pd.tar.gz file to have the JSON results files for analysis)","title":"Testing overview"},{"location":"cts/testing-overview/#testing-overview","text":"","title":"Testing overview"},{"location":"cts/testing-overview/#conformance-test-suite-cts","text":"The Conformance Test Suite ( CTS ) measures conformance of the repository with the expected behavior of an Egeria repository. Conformance indicates that the repository behaves precisely as expected for an Egeria repository.","title":"Conformance Test Suite (CTS)"},{"location":"cts/testing-overview/#performance-test-suite-pts","text":"The Performance Test Suite ( PTS ) focuses on measuring the performance of the various operations of an Egeria repository. It does not do as thorough checking of every individual result as the CTS , but instead ensures a consistent volume of metadata exists in the environment for the duration of the tests and records various metrics about both these volumes and the individual runtimes of each execution (in milliseconds) of the various metadata repository operations. Details on the performance metrics The median of all results for that method across all executions for a given set of volume parameters is given (all times in milliseconds) to give an idea of the \"typical\" result, while limiting potential skew from significant outliers. A more detailed set of statistics is best reviewed through the Jupyter Notebook provided in each results directory, where you can review: the full distributions of execution times (including the outliers) detailed individual outlier results (e.g. the top-10 slowest response times per method) volumes in place during the tests (how many entities, how many relationships, etc) The volume parameters that were used for each test are specified using the convention i-s , where i is the value for the instancesPerType parameter to the PTS and s is the value for maxSearchResults . For example, 5-2 means 5 instances will be created for every open metadata type and 2 will be the maximum number of results per page for methods that include paging. All tests are run from 5-2 through 20-10 to give a sense of the performance impact of doubling the number of instances and search results. Above this, the graph queries are no longer included: they become exponentially more complex as the volumes grow, and while they will still return results, the depth of their testing in the PTS means that they can contribute many hours (or even days) to the overall suite execution -- they are therefore left out to be able to more quickly produce results for the other methods at progressively higher volumes. The page size is left at a maximum of 10 for subsequent tests so that it is only the volume of instances in total that are doubling each time, rather than also the number of detailed results. Instance counts range from a few thousand (at 5-2 ) up to nearly one hundred thousand (at 80-10 ). In the graphical comparisons, a point plot is used to show the typical execution time of each method at the different volumes / by repository. Each point on the plot represents the median execution time for that method, at a given volume of metadata. (For the repository comparison plots, pts = Crux and janus = JanusGraph.) The horizontal lines that appear around each point are confidence intervals calculated by a bootstrapping process: in simple terms, the larger the horizontal line, the more variability there is for that particular method's execution time (a singular median value is insufficient to represent such variability on its own).","title":"Performance Test Suite (PTS)"},{"location":"cts/testing-overview/#reproducibility","text":"","title":"Reproducibility"},{"location":"cts/testing-overview/#re-running-the-tests","text":"The cts/charts directory contains a Helm chart to automate the execution of these suites against a Crux repository connector, to reproduce these results. These use a default configuration for the Crux repository where Lucene is used as a text index and RocksDB is used for all persistence: index store, document store and transaction log. No additional tuning of any parameters (Crux or RocksDB) is applied: they use all of their default settings.","title":"Re-running the tests"},{"location":"cts/testing-overview/#data-points","text":"The cts/results directory contains results of running the suites against the Crux connector. For each test suite execution, you will find the following details: openmetadata_cts_summary.json - a summary of the results of each profile Description of the k8s environment deployment - details of the deployed components used for the test configmap.yaml - details of the variables used within the components of the test The OMAG server configurations: omag.server.crux.config - the configuration of the Crux connector (proxy) omag.server.cts.config - the configuration of the test workbench The cohort registrations: cohort.coco.crux.local - the local Crux connector (proxy) cohort registration information cohort.coco.crux.remote - the cohort members considered remote from the Crux connector (proxy)'s perspective cohort.coco.cts.local - the local test Workbench cohort registration cohort.coco.cts.remote - the cohort members considered remote from the test Workbench's perspective Detailed results: pd.tar.gz - an archive containing the full detailed results of every profile tested tcd.tar.gz - an archive containing the full detailed results of every test case executed Jupyter Notebooks used to analyze the results: analyze-performance-results.ipynb - details about the environment, instance counts, and distribution of elapsed times per method, also illustrating how the results can be analyzed more deeply calculate-medians.ipynb - used to calculate the medians displayed in the table further below (to run either of these notebooks, you will need to first extract the pd.tar.gz file to have the JSON results files for analysis)","title":"Data points"},{"location":"cts/2.10/2.10/","text":"Release 2.10 \u00b6 CTS results \u00b6 The 2.10 release is fully conformant with all Egeria profiles Profile Result Connector Egeria Crux Metadata sharing CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Reference copies CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Metadata maintenance CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Dynamic types UNKNOWN_STATUS 2.10 2.10 21.05-1.17.0 Graph queries CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Historical search CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Entity proxies CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Soft-delete and restore CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Undo an update CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Reidentify instance CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Retype instance CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Rehome instance CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Entity search CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Relationship search CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Entity advanced search CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Relationship advanced search CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Additional notes The entity search tests could fail a particular long-running query pattern unless Lucene is configured: typically where a query by value or attribute is done without providing any restriction on the type of instances against which the query should run. Configure the connector with Lucene to avoid these timeouts. The Dynamic types profile currently does not have any tests defined, so will be UNKNOWN_STATUS for all repositories and connectors. PTS results \u00b6 Crux at varying volumes \u00b6 Summary The retrieval and write operations remain very consistent, with almost no variability, throughout the growth in volume. The search operations, however, begin to clearly degrade at the highest volumes tested. Further investigation into other optimized settings for the search operations for these larger volumes is likely warranted as the next step to continue to improve performance. Profile Method 05-02 (4,470) 10-05 (8,940) 20-10 (17,880) 40-10 (35,760) 80-10 (71,520) Entity creation addEntity 103.0 108.0 97.0 94.0 100.0 ... saveEntityReferenceCopy 96.0 104.0 94.0 91.0 96.0 Entity search findEntities 48.5 76.0 118.0 242.0 573.0 ... findEntitiesByProperty 33.0 40.0 55.0 106.0 190.0 ... findEntitiesByPropertyValue 49.0 74.0 104.0 142.0 266.0 Relationship creation addRelationship 104.0 105.0 99.0 96.0 104.0 ... saveRelationshipReferenceCopy 107.0 107.0 101.0 97.0 104.0 Relationship search findRelationships 29.0 35.0 44.0 41.0 43.0 ... findRelationshipsByProperty 30.0 36.0 52.0 109.0 199.0 ... findRelationshipsByPropertyValue 48.0 62.0 86.5 118.0 229.0 Entity classification classifyEntity 163.0 172.0 148.0 133.0 144.0 ... saveClassificationReferenceCopy 120.0 118.0 104.0 93.0 94.0 Classification search findEntitiesByClassification 40.0 54.0 78.0 119.0 147.0 Entity update reTypeEntity 86.0 82.0 79.0 83.0 87.0 ... updateEntityProperties 118.0 120.0 110.0 106.0 114.0 Relationship update updateRelationshipProperties 140.0 129.0 120.0 113.0 113.0 Classification update updateEntityClassification 218.0 270.5 180.0 169.0 172.0 Entity undo undoEntityUpdate 112.0 112.0 105.0 103.0 108.0 Relationship undo undoRelationshipUpdate 130.0 127.0 115.0 107.0 115.0 Entity retrieval getEntityDetail 17.0 16.0 16.0 16.0 16.0 ... getEntitySummary 17.0 16.0 16.0 15.0 16.0 ... isEntityKnown 17.0 16.0 16.0 16.0 16.0 Entity history retrieval getEntityDetail 20.0 19.0 19.0 18.0 18.0 ... getEntityDetailHistory 23.0 21.0 21.0 20.0 20.0 Relationship retrieval getRelationship 18.0 18.0 17.0 17.0 17.0 ... isRelationshipKnown 18.0 18.0 17.0 17.0 17.0 Relationship history retrieval getRelationship 21.0 21.0 20.0 20.0 19.0 ... getRelationshipHistory 22.0 22.0 21.0 21.0 21.0 Entity history search findEntities 64.0 84.0 184.5 495.0 1638.5 ... findEntitiesByProperty 34.0 35.0 48.0 56.0 88.0 ... findEntitiesByPropertyValue 50.0 62.0 112.0 192.0 535.0 Relationship history search findRelationships 29.0 37.0 51.0 50.0 57.0 ... findRelationshipsByProperty 37.0 45.5 66.0 64.0 81.0 ... findRelationshipsByPropertyValue 54.0 79.5 130.5 173.0 343.0 Graph queries getEntityNeighborhood 31.0 28.0 28.0 -- -- ... getLinkingEntities 21.0 30.0 752.0 -- -- ... getRelatedEntities 641.0 1116.0 2558.5 -- -- ... getRelationshipsForEntity 28.0 28.0 28.0 -- -- Graph history queries getEntityNeighborhood 30.0 28.0 28.0 -- -- ... getLinkingEntities 21.0 30.0 747.0 -- -- ... getRelatedEntities 637.0 1120.0 2552.0 -- -- ... getRelationshipsForEntity 26.0 27.0 27.0 -- -- Entity re-home reHomeEntity 113.0 99.0 95.0 107.0 109.0 Relationship re-home reHomeRelationship 100.0 93.0 88.0 95.0 103.0 Entity declassify declassifyEntity 138.0 126.0 123.0 132.0 139.0 ... purgeClassificationReferenceCopy 116.0 120.0 112.0 114.0 120.0 Entity re-identify reIdentifyEntity 118.0 114.0 111.0 122.0 128.0 Relationship re-identify reIdentifyRelationship 106.0 103.0 97.0 108.0 118.0 Relationship delete deleteRelationship 93.0 93.0 89.0 100.0 112.0 Entity delete deleteEntity 99.0 98.0 95.0 106.0 115.0 Entity restore restoreEntity 94.0 91.0 85.0 93.0 103.0 Relationship restore restoreRelationship 91.0 91.0 85.0 95.0 108.0 Relationship purge purgeRelationship 80.0 80.0 78.0 84.0 87.0 ... purgeRelationshipReferenceCopy 66.0 66.0 65.0 67.0 73.0 Entity purge purgeEntity 94.0 91.0 95.0 98.0 105.0 ... purgeEntityReferenceCopy 67.0 67.0 67.0 69.0 75.0 Crux vs JanusGraph \u00b6 Summary In almost all cases, the Crux repository is significantly faster than JanusGraph: at most volumes completing all methods in less than 200ms and with very little variability. For JanusGraph, on the other hand, there is significant variability (in particular for methods like findEntitiesByClassification ), and there are numerous examples of the median execution time taking more than multiple seconds. Even at 8 times the volume of metadata the Crux connector still outperforms the JanusGraph connector in almost every method (the only exceptions being a few of the find methods, where the performance is approximately even at 2-4 times the volume). Graph queries were disabled for JanusGraph The graph queries were disabled for JanusGraph in order to have results in a timely manner: it would take more than a month to produce results for these queries for the JanusGraph connector. The Crux results can be difficult to see in detail due to the skew from the Janus results, so it may be easier to look at this more granular comparison that drops the higher scales of Janus for readability of the Crux results: Profile Method 05-02 (Crux) 05-02 (Janus) 10-05 (Crux) 10-05 (Janus) 20-10 (Crux) 20-10 (Janus) 40-10 (Crux) 40-10 (Janus) 80-10 (Crux) 80-10 (Janus) Entity creation addEntity 103.0 451.5 108.0 448.5 97.0 499.0 94.0 484.0 100.0 DNF ... saveEntityReferenceCopy 96.0 448.0 104.0 447.0 94.0 497.5 91.0 480.0 96.0 DNF Entity search findEntities 48.5 258.0 76.0 497.0 118.0 1154.5 242.0 2425.5 573.0 DNF ... findEntitiesByProperty 33.0 36.0 40.0 50.0 55.0 87.0 106.0 123.0 190.0 DNF ... findEntitiesByPropertyValue 49.0 87.0 74.0 112.0 104.0 156.0 142.0 183.0 266.0 DNF Relationship creation addRelationship 104.0 153.0 105.0 145.0 99.0 152.0 96.0 153.0 104.0 DNF ... saveRelationshipReferenceCopy 107.0 444.0 107.0 384.0 101.0 426.5 97.0 432.0 104.0 DNF Relationship search findRelationships 29.0 46.0 35.0 68.0 44.0 125.0 41.0 187.0 43.0 DNF ... findRelationshipsByProperty 30.0 42.0 36.0 63.0 52.0 115.0 109.0 168.0 199.0 DNF ... findRelationshipsByPropertyValue 48.0 76.0 62.0 96.0 86.5 148.0 118.0 231.0 229.0 DNF Entity classification classifyEntity 163.0 948.0 172.0 860.5 148.0 955.5 133.0 953.0 144.0 DNF ... saveClassificationReferenceCopy 120.0 798.0 118.0 808.0 104.0 893.0 93.0 886.0 94.0 DNF Classification search findEntitiesByClassification 40.0 579.0 54.0 1301.5 78.0 3274.0 119.0 4384.0 147.0 DNF Entity update reTypeEntity 86.0 379.5 82.0 341.5 79.0 375.5 83.0 441.5 87.0 DNF ... updateEntityProperties 118.0 696.0 120.0 741.0 110.0 960.5 106.0 747.0 114.0 DNF Relationship update updateRelationshipProperties 140.0 428.0 129.0 448.0 120.0 694.5 113.0 457.0 113.0 DNF Classification update updateEntityClassification 218.0 1185.0 270.5 1244.0 180.0 1985.5 169.0 1356.0 172.0 DNF Entity undo undoEntityUpdate 112.0 -- 112.0 -- 105.0 -- 103.0 -- 108.0 -- Relationship undo undoRelationshipUpdate 130.0 -- 127.0 -- 115.0 -- 107.0 -- 115.0 -- Entity retrieval getEntityDetail 17.0 17.0 16.0 17.0 16.0 20.0 16.0 15.0 16.0 DNF ... getEntitySummary 17.0 16.0 16.0 16.0 16.0 18.0 15.0 14.0 16.0 DNF ... isEntityKnown 17.0 18.0 16.0 17.0 16.0 20.0 16.0 15.0 16.0 DNF Entity history retrieval getEntityDetail 20.0 -- 19.0 -- 19.0 -- 18.0 -- 18.0 -- ... getEntityDetailHistory 23.0 -- 21.0 -- 21.0 -- 20.0 -- 20.0 -- Relationship retrieval getRelationship 18.0 19.0 18.0 19.0 17.0 22.0 17.0 17.0 17.0 DNF ... isRelationshipKnown 18.0 19.0 18.0 19.0 17.0 22.0 17.0 17.0 17.0 DNF Relationship history retrieval getRelationship 21.0 -- 21.0 -- 20.0 -- 20.0 -- 19.0 -- ... getRelationshipHistory 22.0 -- 22.0 -- 21.0 -- 21.0 -- 21.0 -- Entity history search findEntities 64.0 -- 84.0 -- 184.5 -- 495.0 -- 1638.5 -- ... findEntitiesByProperty 34.0 -- 35.0 -- 48.0 -- 56.0 -- 88.0 -- ... findEntitiesByPropertyValue 50.0 -- 62.0 -- 112.0 -- 192.0 -- 535.0 -- Relationship history search findRelationships 29.0 -- 37.0 -- 51.0 -- 50.0 -- 57.0 -- ... findRelationshipsByProperty 37.0 -- 45.5 -- 66.0 -- 64.0 -- 81.0 -- ... findRelationshipsByPropertyValue 54.0 -- 79.5 -- 130.5 -- 173.0 -- 343.0 -- Graph queries getEntityNeighborhood 31.0 -- 28.0 -- 28.0 -- -- -- -- -- ... getLinkingEntities 21.0 -- 30.0 -- 752.0 -- -- -- -- -- ... getRelatedEntities 641.0 -- 1116.0 -- 2558.5 -- -- -- -- -- ... getRelationshipsForEntity 28.0 -- 28.0 -- 28.0 -- -- -- -- -- Graph history queries getEntityNeighborhood 30.0 -- 28.0 -- 28.0 -- -- -- -- -- ... getLinkingEntities 21.0 -- 30.0 -- 747.0 -- -- -- -- -- ... getRelatedEntities 637.0 -- 1120.0 -- 2552.0 -- -- -- -- -- ... getRelationshipsForEntity 26.0 -- 27.0 -- 27.0 -- -- -- -- -- Entity re-home reHomeEntity 113.0 700.0 99.0 679.0 95.0 915.5 107.0 802.5 109.0 DNF Relationship re-home reHomeRelationship 100.0 370.5 93.0 382.0 88.0 492.0 95.0 397.0 103.0 DNF Entity declassify declassifyEntity 138.0 1256.0 126.0 1320.0 123.0 1527.0 132.0 1462.0 139.0 DNF ... purgeClassificationReferenceCopy 116.0 -- 120.0 -- 112.0 -- 114.0 -- 120.0 -- Entity re-identify reIdentifyEntity 118.0 1623.0 114.0 1987.0 111.0 1966.5 122.0 1786.0 128.0 DNF Relationship re-identify reIdentifyRelationship 106.0 751.0 103.0 840.5 97.0 811.0 108.0 763.0 118.0 DNF Relationship delete deleteRelationship 93.0 349.0 93.0 380.0 89.0 382.0 100.0 384.0 112.0 DNF Entity delete deleteEntity 99.0 700.0 98.0 784.0 95.0 784.0 106.0 785.0 115.0 DNF Entity restore restoreEntity 94.0 755.0 91.0 764.5 85.0 797.0 93.0 793.0 103.0 DNF Relationship restore restoreRelationship 91.0 340.0 91.0 396.0 85.0 369.0 95.0 375.0 108.0 DNF Relationship purge purgeRelationship 80.0 121.0 80.0 167.0 78.0 165.0 84.0 175.0 87.0 DNF ... purgeRelationshipReferenceCopy 66.0 95.0 66.0 101.0 65.0 96.0 67.0 98.0 73.0 DNF Entity purge purgeEntity 94.0 220.0 91.0 355.0 95.0 328.0 98.0 367.0 105.0 DNF ... purgeEntityReferenceCopy 67.0 231.0 67.0 242.0 67.0 214.0 69.0 225.0 75.0 DNF","title":"2.10"},{"location":"cts/2.10/2.10/#release-210","text":"","title":"Release 2.10"},{"location":"cts/2.10/2.10/#cts-results","text":"The 2.10 release is fully conformant with all Egeria profiles Profile Result Connector Egeria Crux Metadata sharing CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Reference copies CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Metadata maintenance CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Dynamic types UNKNOWN_STATUS 2.10 2.10 21.05-1.17.0 Graph queries CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Historical search CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Entity proxies CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Soft-delete and restore CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Undo an update CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Reidentify instance CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Retype instance CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Rehome instance CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Entity search CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Relationship search CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Entity advanced search CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Relationship advanced search CONFORMANT_FULL_SUPPORT 2.10 2.10 21.05-1.17.0 Additional notes The entity search tests could fail a particular long-running query pattern unless Lucene is configured: typically where a query by value or attribute is done without providing any restriction on the type of instances against which the query should run. Configure the connector with Lucene to avoid these timeouts. The Dynamic types profile currently does not have any tests defined, so will be UNKNOWN_STATUS for all repositories and connectors.","title":"CTS results"},{"location":"cts/2.10/2.10/#pts-results","text":"","title":"PTS results"},{"location":"cts/2.10/2.10/#crux-at-varying-volumes","text":"Summary The retrieval and write operations remain very consistent, with almost no variability, throughout the growth in volume. The search operations, however, begin to clearly degrade at the highest volumes tested. Further investigation into other optimized settings for the search operations for these larger volumes is likely warranted as the next step to continue to improve performance. Profile Method 05-02 (4,470) 10-05 (8,940) 20-10 (17,880) 40-10 (35,760) 80-10 (71,520) Entity creation addEntity 103.0 108.0 97.0 94.0 100.0 ... saveEntityReferenceCopy 96.0 104.0 94.0 91.0 96.0 Entity search findEntities 48.5 76.0 118.0 242.0 573.0 ... findEntitiesByProperty 33.0 40.0 55.0 106.0 190.0 ... findEntitiesByPropertyValue 49.0 74.0 104.0 142.0 266.0 Relationship creation addRelationship 104.0 105.0 99.0 96.0 104.0 ... saveRelationshipReferenceCopy 107.0 107.0 101.0 97.0 104.0 Relationship search findRelationships 29.0 35.0 44.0 41.0 43.0 ... findRelationshipsByProperty 30.0 36.0 52.0 109.0 199.0 ... findRelationshipsByPropertyValue 48.0 62.0 86.5 118.0 229.0 Entity classification classifyEntity 163.0 172.0 148.0 133.0 144.0 ... saveClassificationReferenceCopy 120.0 118.0 104.0 93.0 94.0 Classification search findEntitiesByClassification 40.0 54.0 78.0 119.0 147.0 Entity update reTypeEntity 86.0 82.0 79.0 83.0 87.0 ... updateEntityProperties 118.0 120.0 110.0 106.0 114.0 Relationship update updateRelationshipProperties 140.0 129.0 120.0 113.0 113.0 Classification update updateEntityClassification 218.0 270.5 180.0 169.0 172.0 Entity undo undoEntityUpdate 112.0 112.0 105.0 103.0 108.0 Relationship undo undoRelationshipUpdate 130.0 127.0 115.0 107.0 115.0 Entity retrieval getEntityDetail 17.0 16.0 16.0 16.0 16.0 ... getEntitySummary 17.0 16.0 16.0 15.0 16.0 ... isEntityKnown 17.0 16.0 16.0 16.0 16.0 Entity history retrieval getEntityDetail 20.0 19.0 19.0 18.0 18.0 ... getEntityDetailHistory 23.0 21.0 21.0 20.0 20.0 Relationship retrieval getRelationship 18.0 18.0 17.0 17.0 17.0 ... isRelationshipKnown 18.0 18.0 17.0 17.0 17.0 Relationship history retrieval getRelationship 21.0 21.0 20.0 20.0 19.0 ... getRelationshipHistory 22.0 22.0 21.0 21.0 21.0 Entity history search findEntities 64.0 84.0 184.5 495.0 1638.5 ... findEntitiesByProperty 34.0 35.0 48.0 56.0 88.0 ... findEntitiesByPropertyValue 50.0 62.0 112.0 192.0 535.0 Relationship history search findRelationships 29.0 37.0 51.0 50.0 57.0 ... findRelationshipsByProperty 37.0 45.5 66.0 64.0 81.0 ... findRelationshipsByPropertyValue 54.0 79.5 130.5 173.0 343.0 Graph queries getEntityNeighborhood 31.0 28.0 28.0 -- -- ... getLinkingEntities 21.0 30.0 752.0 -- -- ... getRelatedEntities 641.0 1116.0 2558.5 -- -- ... getRelationshipsForEntity 28.0 28.0 28.0 -- -- Graph history queries getEntityNeighborhood 30.0 28.0 28.0 -- -- ... getLinkingEntities 21.0 30.0 747.0 -- -- ... getRelatedEntities 637.0 1120.0 2552.0 -- -- ... getRelationshipsForEntity 26.0 27.0 27.0 -- -- Entity re-home reHomeEntity 113.0 99.0 95.0 107.0 109.0 Relationship re-home reHomeRelationship 100.0 93.0 88.0 95.0 103.0 Entity declassify declassifyEntity 138.0 126.0 123.0 132.0 139.0 ... purgeClassificationReferenceCopy 116.0 120.0 112.0 114.0 120.0 Entity re-identify reIdentifyEntity 118.0 114.0 111.0 122.0 128.0 Relationship re-identify reIdentifyRelationship 106.0 103.0 97.0 108.0 118.0 Relationship delete deleteRelationship 93.0 93.0 89.0 100.0 112.0 Entity delete deleteEntity 99.0 98.0 95.0 106.0 115.0 Entity restore restoreEntity 94.0 91.0 85.0 93.0 103.0 Relationship restore restoreRelationship 91.0 91.0 85.0 95.0 108.0 Relationship purge purgeRelationship 80.0 80.0 78.0 84.0 87.0 ... purgeRelationshipReferenceCopy 66.0 66.0 65.0 67.0 73.0 Entity purge purgeEntity 94.0 91.0 95.0 98.0 105.0 ... purgeEntityReferenceCopy 67.0 67.0 67.0 69.0 75.0","title":"Crux at varying volumes"},{"location":"cts/2.10/2.10/#crux-vs-janusgraph","text":"Summary In almost all cases, the Crux repository is significantly faster than JanusGraph: at most volumes completing all methods in less than 200ms and with very little variability. For JanusGraph, on the other hand, there is significant variability (in particular for methods like findEntitiesByClassification ), and there are numerous examples of the median execution time taking more than multiple seconds. Even at 8 times the volume of metadata the Crux connector still outperforms the JanusGraph connector in almost every method (the only exceptions being a few of the find methods, where the performance is approximately even at 2-4 times the volume). Graph queries were disabled for JanusGraph The graph queries were disabled for JanusGraph in order to have results in a timely manner: it would take more than a month to produce results for these queries for the JanusGraph connector. The Crux results can be difficult to see in detail due to the skew from the Janus results, so it may be easier to look at this more granular comparison that drops the higher scales of Janus for readability of the Crux results: Profile Method 05-02 (Crux) 05-02 (Janus) 10-05 (Crux) 10-05 (Janus) 20-10 (Crux) 20-10 (Janus) 40-10 (Crux) 40-10 (Janus) 80-10 (Crux) 80-10 (Janus) Entity creation addEntity 103.0 451.5 108.0 448.5 97.0 499.0 94.0 484.0 100.0 DNF ... saveEntityReferenceCopy 96.0 448.0 104.0 447.0 94.0 497.5 91.0 480.0 96.0 DNF Entity search findEntities 48.5 258.0 76.0 497.0 118.0 1154.5 242.0 2425.5 573.0 DNF ... findEntitiesByProperty 33.0 36.0 40.0 50.0 55.0 87.0 106.0 123.0 190.0 DNF ... findEntitiesByPropertyValue 49.0 87.0 74.0 112.0 104.0 156.0 142.0 183.0 266.0 DNF Relationship creation addRelationship 104.0 153.0 105.0 145.0 99.0 152.0 96.0 153.0 104.0 DNF ... saveRelationshipReferenceCopy 107.0 444.0 107.0 384.0 101.0 426.5 97.0 432.0 104.0 DNF Relationship search findRelationships 29.0 46.0 35.0 68.0 44.0 125.0 41.0 187.0 43.0 DNF ... findRelationshipsByProperty 30.0 42.0 36.0 63.0 52.0 115.0 109.0 168.0 199.0 DNF ... findRelationshipsByPropertyValue 48.0 76.0 62.0 96.0 86.5 148.0 118.0 231.0 229.0 DNF Entity classification classifyEntity 163.0 948.0 172.0 860.5 148.0 955.5 133.0 953.0 144.0 DNF ... saveClassificationReferenceCopy 120.0 798.0 118.0 808.0 104.0 893.0 93.0 886.0 94.0 DNF Classification search findEntitiesByClassification 40.0 579.0 54.0 1301.5 78.0 3274.0 119.0 4384.0 147.0 DNF Entity update reTypeEntity 86.0 379.5 82.0 341.5 79.0 375.5 83.0 441.5 87.0 DNF ... updateEntityProperties 118.0 696.0 120.0 741.0 110.0 960.5 106.0 747.0 114.0 DNF Relationship update updateRelationshipProperties 140.0 428.0 129.0 448.0 120.0 694.5 113.0 457.0 113.0 DNF Classification update updateEntityClassification 218.0 1185.0 270.5 1244.0 180.0 1985.5 169.0 1356.0 172.0 DNF Entity undo undoEntityUpdate 112.0 -- 112.0 -- 105.0 -- 103.0 -- 108.0 -- Relationship undo undoRelationshipUpdate 130.0 -- 127.0 -- 115.0 -- 107.0 -- 115.0 -- Entity retrieval getEntityDetail 17.0 17.0 16.0 17.0 16.0 20.0 16.0 15.0 16.0 DNF ... getEntitySummary 17.0 16.0 16.0 16.0 16.0 18.0 15.0 14.0 16.0 DNF ... isEntityKnown 17.0 18.0 16.0 17.0 16.0 20.0 16.0 15.0 16.0 DNF Entity history retrieval getEntityDetail 20.0 -- 19.0 -- 19.0 -- 18.0 -- 18.0 -- ... getEntityDetailHistory 23.0 -- 21.0 -- 21.0 -- 20.0 -- 20.0 -- Relationship retrieval getRelationship 18.0 19.0 18.0 19.0 17.0 22.0 17.0 17.0 17.0 DNF ... isRelationshipKnown 18.0 19.0 18.0 19.0 17.0 22.0 17.0 17.0 17.0 DNF Relationship history retrieval getRelationship 21.0 -- 21.0 -- 20.0 -- 20.0 -- 19.0 -- ... getRelationshipHistory 22.0 -- 22.0 -- 21.0 -- 21.0 -- 21.0 -- Entity history search findEntities 64.0 -- 84.0 -- 184.5 -- 495.0 -- 1638.5 -- ... findEntitiesByProperty 34.0 -- 35.0 -- 48.0 -- 56.0 -- 88.0 -- ... findEntitiesByPropertyValue 50.0 -- 62.0 -- 112.0 -- 192.0 -- 535.0 -- Relationship history search findRelationships 29.0 -- 37.0 -- 51.0 -- 50.0 -- 57.0 -- ... findRelationshipsByProperty 37.0 -- 45.5 -- 66.0 -- 64.0 -- 81.0 -- ... findRelationshipsByPropertyValue 54.0 -- 79.5 -- 130.5 -- 173.0 -- 343.0 -- Graph queries getEntityNeighborhood 31.0 -- 28.0 -- 28.0 -- -- -- -- -- ... getLinkingEntities 21.0 -- 30.0 -- 752.0 -- -- -- -- -- ... getRelatedEntities 641.0 -- 1116.0 -- 2558.5 -- -- -- -- -- ... getRelationshipsForEntity 28.0 -- 28.0 -- 28.0 -- -- -- -- -- Graph history queries getEntityNeighborhood 30.0 -- 28.0 -- 28.0 -- -- -- -- -- ... getLinkingEntities 21.0 -- 30.0 -- 747.0 -- -- -- -- -- ... getRelatedEntities 637.0 -- 1120.0 -- 2552.0 -- -- -- -- -- ... getRelationshipsForEntity 26.0 -- 27.0 -- 27.0 -- -- -- -- -- Entity re-home reHomeEntity 113.0 700.0 99.0 679.0 95.0 915.5 107.0 802.5 109.0 DNF Relationship re-home reHomeRelationship 100.0 370.5 93.0 382.0 88.0 492.0 95.0 397.0 103.0 DNF Entity declassify declassifyEntity 138.0 1256.0 126.0 1320.0 123.0 1527.0 132.0 1462.0 139.0 DNF ... purgeClassificationReferenceCopy 116.0 -- 120.0 -- 112.0 -- 114.0 -- 120.0 -- Entity re-identify reIdentifyEntity 118.0 1623.0 114.0 1987.0 111.0 1966.5 122.0 1786.0 128.0 DNF Relationship re-identify reIdentifyRelationship 106.0 751.0 103.0 840.5 97.0 811.0 108.0 763.0 118.0 DNF Relationship delete deleteRelationship 93.0 349.0 93.0 380.0 89.0 382.0 100.0 384.0 112.0 DNF Entity delete deleteEntity 99.0 700.0 98.0 784.0 95.0 784.0 106.0 785.0 115.0 DNF Entity restore restoreEntity 94.0 755.0 91.0 764.5 85.0 797.0 93.0 793.0 103.0 DNF Relationship restore restoreRelationship 91.0 340.0 91.0 396.0 85.0 369.0 95.0 375.0 108.0 DNF Relationship purge purgeRelationship 80.0 121.0 80.0 167.0 78.0 165.0 84.0 175.0 87.0 DNF ... purgeRelationshipReferenceCopy 66.0 95.0 66.0 101.0 65.0 96.0 67.0 98.0 73.0 DNF Entity purge purgeEntity 94.0 220.0 91.0 355.0 95.0 328.0 98.0 367.0 105.0 DNF ... purgeEntityReferenceCopy 67.0 231.0 67.0 242.0 67.0 214.0 69.0 225.0 75.0 DNF","title":"Crux vs JanusGraph"},{"location":"cts/2.11/2.11/","text":"Release 2.11 \u00b6 CTS results \u00b6 The 2.11 release is fully conformant with all Egeria profiles Profile Result Connector Egeria Crux Metadata sharing CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Reference copies CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Metadata maintenance CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Dynamic types UNKNOWN_STATUS 2.11 2.11 1.17.1 Graph queries CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Historical search CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Entity proxies CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Soft-delete and restore CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Undo an update CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Reidentify instance CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Retype instance CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Rehome instance CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Entity search CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Relationship search CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Entity advanced search CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Relationship advanced search CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Additional notes The entity search tests could fail a particular long-running query pattern unless Lucene is configured: typically where a query by value or attribute is done without providing any restriction on the type of instances against which the query should run. Configure the connector with Lucene to avoid these timeouts. The Dynamic types profile currently does not have any tests defined, so will be UNKNOWN_STATUS for all repositories and connectors. PTS results \u00b6 Crux at varying volumes \u00b6 Summary The retrieval and write operations remain very consistent, with almost no variability, throughout the growth in volume. The search operations, however, begin to clearly degrade at the highest volumes tested. Further investigation into other optimized settings for the search operations for these larger volumes is likely warranted as the next step to continue to improve performance. Profile Method 05-02 (4,630) 10-05 (9,260) 20-10 (18,520) 40-10 (37,040) 80-10 (74,080) Entity creation addEntity 103.0 102.0 109.0 102.0 104.0 ... saveEntityReferenceCopy 96.0 97.0 105.0 98.0 100.0 Entity search findEntities 52.0 63.0 140.0 260.0 495.5 ... findEntitiesByProperty 32.0 37.0 55.0 101.0 193.0 ... findEntitiesByPropertyValue 50.0 59.0 102.5 129.0 201.5 Relationship creation addRelationship 103.0 102.0 108.0 103.0 106.0 ... saveRelationshipReferenceCopy 107.0 103.0 110.0 103.0 106.0 Relationship search findRelationships 26.0 30.0 39.0 36.0 40.0 ... findRelationshipsByProperty 31.0 35.0 52.0 104.0 204.0 ... findRelationshipsByPropertyValue 42.0 53.0 81.0 101.0 215.0 Entity classification classifyEntity 145.0 145.0 157.0 139.0 146.0 ... saveClassificationReferenceCopy 106.0 94.0 108.0 87.0 101.0 Classification search findEntitiesByClassification 37.0 46.0 76.0 110.0 147.0 Entity update reTypeEntity 89.0 86.0 93.0 89.0 87.0 ... updateEntityProperties 112.0 113.0 120.0 110.0 114.0 Relationship update updateRelationshipProperties 128.0 123.0 130.0 118.0 114.0 Classification update updateEntityClassification 169.0 167.5 200.0 167.0 169.0 Entity undo undoEntityUpdate 108.0 109.0 118.0 110.0 110.0 Relationship undo undoRelationshipUpdate 123.0 125.0 130.0 115.0 119.0 Entity retrieval getEntityDetail 15.0 15.0 15.0 15.0 14.0 ... getEntitySummary 15.0 15.0 14.0 15.0 14.0 ... isEntityKnown 16.0 15.0 15.0 15.0 14.0 Entity history retrieval getEntityDetail 18.0 18.0 17.0 18.0 17.0 ... getEntityDetailHistory 20.0 19.0 19.0 20.0 18.0 Relationship retrieval getRelationship 17.0 16.0 16.0 16.0 15.0 ... isRelationshipKnown 17.0 16.0 16.0 16.0 15.0 Relationship history retrieval getRelationship 20.0 18.0 19.0 19.0 18.0 ... getRelationshipHistory 21.0 19.0 20.0 20.0 19.0 Entity history search findEntities 58.0 92.0 253.5 478.0 1787.5 ... findEntitiesByProperty 29.0 33.0 49.0 53.0 80.0 ... findEntitiesByPropertyValue 41.0 55.0 106.0 144.0 380.5 Relationship history search findRelationships 27.0 34.0 55.0 48.0 59.0 ... findRelationshipsByProperty 31.0 42.0 76.0 59.0 79.5 ... findRelationshipsByPropertyValue 50.0 79.0 180.0 160.0 363.0 Graph queries getEntityNeighborhood 27.0 25.0 27.0 -- -- ... getLinkingEntities 20.0 25.0 40.0 -- -- ... getRelatedEntities 540.5 1182.5 3616.0 -- -- ... getRelationshipsForEntity 26.0 26.0 28.0 -- -- Graph history queries getEntityNeighborhood 26.0 25.0 26.0 -- -- ... getLinkingEntities 21.0 25.0 39.0 -- -- ... getRelatedEntities 539.0 1169.0 3629.5 -- -- ... getRelationshipsForEntity 24.0 25.0 26.0 -- -- Entity re-home reHomeEntity 115.0 102.0 120.0 113.0 112.0 Relationship re-home reHomeRelationship 100.0 95.0 114.0 103.0 105.0 Entity declassify declassifyEntity 133.0 132.0 155.0 137.0 141.0 ... purgeClassificationReferenceCopy 123.5 113.0 135.0 117.0 121.0 Entity re-identify reIdentifyEntity 131.0 120.0 137.0 129.0 129.0 Relationship re-identify reIdentifyRelationship 126.0 111.0 117.0 117.0 119.0 Relationship delete deleteRelationship 111.0 99.0 105.0 110.0 112.0 Entity delete deleteEntity 109.0 104.0 110.0 116.0 117.0 Entity restore restoreEntity 108.0 96.0 100.0 102.0 105.0 Relationship restore restoreRelationship 109.0 97.0 102.0 104.0 110.0 Relationship purge purgeRelationship 91.0 82.0 86.0 88.0 87.0 ... purgeRelationshipReferenceCopy 74.0 68.0 73.0 74.0 73.0 Entity purge purgeEntity 100.0 94.0 101.0 103.0 106.0 ... purgeEntityReferenceCopy 73.0 70.0 74.0 77.0 76.0 Crux vs JanusGraph \u00b6 Summary In almost all cases, the Crux repository is significantly faster than JanusGraph: at most volumes completing all methods in less than 200ms and with very little variability. For JanusGraph, on the other hand, there is significant variability (in particular for methods like findEntitiesByClassification ), and there are numerous examples of the median execution time taking more than multiple seconds. Even at 8 times the volume of metadata the Crux connector still outperforms the JanusGraph connector in almost every method (the only exceptions being a few of the find methods, where the performance is approximately even at 2-4 times the volume). Graph queries were disabled for JanusGraph The graph queries were disabled for JanusGraph in order to have results in a timely manner: it would take more than a month to produce results for these queries for the JanusGraph connector. The Crux results can be difficult to see in detail due to the skew from the Janus results, so it may be easier to look at this more granular comparison that drops the higher scales of Janus for readability of the Crux results: Profile Method 05-02 (Crux) 05-02 (Janus) 10-05 (Crux) 10-05 (Janus) 20-10 (Crux) 20-10 (Janus) 40-10 (Crux) 40-10 (Janus) 80-10 (Crux) 80-10 (Janus) Entity creation addEntity 103.0 440.0 102.0 463.0 109.0 535.0 102.0 463.0 104.0 DNF ... saveEntityReferenceCopy 96.0 435.5 97.0 459.0 105.0 531.0 98.0 456.0 100.0 DNF Entity search findEntities 52.0 261.0 63.0 530.5 140.0 1320.0 260.0 2903.0 495.5 DNF ... findEntitiesByProperty 32.0 36.0 37.0 52.0 55.0 77.0 101.0 125.0 193.0 DNF ... findEntitiesByPropertyValue 50.0 78.0 59.0 107.0 102.5 138.0 129.0 210.0 201.5 DNF Relationship creation addRelationship 103.0 158.0 102.0 162.0 108.0 165.0 103.0 157.0 106.0 DNF ... saveRelationshipReferenceCopy 107.0 447.0 103.0 460.0 110.0 435.0 103.0 447.0 106.0 DNF Relationship search findRelationships 26.0 44.0 30.0 67.0 39.0 111.0 36.0 178.0 40.0 DNF ... findRelationshipsByProperty 31.0 41.0 35.0 63.0 52.0 101.0 104.0 157.0 204.0 DNF ... findRelationshipsByPropertyValue 42.0 75.0 53.0 94.0 81.0 141.0 101.0 213.0 215.0 DNF Entity classification classifyEntity 145.0 910.0 145.0 931.0 157.0 936.0 139.0 915.0 146.0 DNF ... saveClassificationReferenceCopy 106.0 750.0 94.0 872.0 108.0 889.0 87.0 852.5 101.0 DNF Classification search findEntitiesByClassification 37.0 614.0 46.0 1368.5 76.0 3462.0 110.0 4585.0 147.0 DNF Entity update reTypeEntity 89.0 381.0 86.0 432.0 93.0 428.0 89.0 370.0 87.0 DNF ... updateEntityProperties 112.0 714.0 113.0 804.0 120.0 802.5 110.0 797.0 114.0 DNF Relationship update updateRelationshipProperties 128.0 473.0 123.0 461.5 130.0 460.0 118.0 443.0 114.0 DNF Classification update updateEntityClassification 169.0 1152.0 167.5 1301.5 200.0 1418.0 167.0 1283.0 169.0 DNF Entity undo undoEntityUpdate 108.0 -- 109.0 -- 118.0 -- 110.0 -- 110.0 -- Relationship undo undoRelationshipUpdate 123.0 -- 125.0 -- 130.0 -- 115.0 -- 119.0 -- Entity retrieval getEntityDetail 15.0 17.0 15.0 21.0 15.0 16.0 15.0 15.0 14.0 DNF ... getEntitySummary 15.0 15.0 15.0 19.0 14.0 15.0 15.0 13.0 14.0 DNF ... isEntityKnown 16.0 17.0 15.0 20.0 15.0 17.0 15.0 15.0 14.0 DNF Entity history retrieval getEntityDetail 18.0 -- 18.0 -- 17.0 -- 18.0 -- 17.0 -- ... getEntityDetailHistory 20.0 -- 19.0 -- 19.0 -- 20.0 -- 18.0 -- Relationship retrieval getRelationship 17.0 18.0 16.0 25.0 16.0 19.0 16.0 16.0 15.0 DNF ... isRelationshipKnown 17.0 18.0 16.0 25.0 16.0 19.0 16.0 16.0 15.0 DNF Relationship history retrieval getRelationship 20.0 -- 18.0 -- 19.0 -- 19.0 -- 18.0 -- ... getRelationshipHistory 21.0 -- 19.0 -- 20.0 -- 20.0 -- 19.0 -- Entity history search findEntities 58.0 -- 92.0 -- 253.5 -- 478.0 -- 1787.5 -- ... findEntitiesByProperty 29.0 -- 33.0 -- 49.0 -- 53.0 -- 80.0 -- ... findEntitiesByPropertyValue 41.0 -- 55.0 -- 106.0 -- 144.0 -- 380.5 -- Relationship history search findRelationships 27.0 -- 34.0 -- 55.0 -- 48.0 -- 59.0 -- ... findRelationshipsByProperty 31.0 -- 42.0 -- 76.0 -- 59.0 -- 79.5 -- ... findRelationshipsByPropertyValue 50.0 -- 79.0 -- 180.0 -- 160.0 -- 363.0 -- Graph queries getEntityNeighborhood 27.0 -- 25.0 -- 27.0 -- -- -- -- -- ... getLinkingEntities 20.0 -- 25.0 -- 40.0 -- -- -- -- -- ... getRelatedEntities 540.5 -- 1182.5 -- 3616.0 -- -- -- -- -- ... getRelationshipsForEntity 26.0 -- 26.0 -- 28.0 -- -- -- -- -- Graph history queries getEntityNeighborhood 26.0 -- 25.0 -- 26.0 -- -- -- -- -- ... getLinkingEntities 21.0 -- 25.0 -- 39.0 -- -- -- -- -- ... getRelatedEntities 539.0 -- 1169.0 -- 3629.5 -- -- -- -- -- ... getRelationshipsForEntity 24.0 -- 25.0 -- 26.0 -- -- -- -- -- Entity re-home reHomeEntity 115.0 741.0 102.0 1244.0 120.0 859.0 113.0 777.5 112.0 DNF Relationship re-home reHomeRelationship 100.0 384.5 95.0 441.0 114.0 416.0 103.0 374.0 105.0 DNF Entity declassify declassifyEntity 133.0 1284.0 132.0 1423.0 155.0 1509.0 137.0 1389.0 141.0 DNF ... purgeClassificationReferenceCopy 123.5 -- 113.0 -- 135.0 -- 117.0 -- 121.0 -- Entity re-identify reIdentifyEntity 131.0 1674.0 120.0 1918.0 137.0 2212.5 129.0 1743.0 129.0 DNF Relationship re-identify reIdentifyRelationship 126.0 789.0 111.0 817.0 117.0 872.0 117.0 767.0 119.0 DNF Relationship delete deleteRelationship 111.0 384.0 99.0 394.0 105.0 418.0 110.0 382.0 112.0 DNF Entity delete deleteEntity 109.0 714.0 104.0 767.0 110.0 839.0 116.0 774.0 117.0 DNF Entity restore restoreEntity 108.0 778.5 96.0 919.0 100.0 855.0 102.0 782.0 105.0 DNF Relationship restore restoreRelationship 109.0 373.0 97.0 492.0 102.0 419.0 104.0 384.0 110.0 DNF Relationship purge purgeRelationship 91.0 128.0 82.0 172.0 86.0 174.0 88.0 178.0 87.0 DNF ... purgeRelationshipReferenceCopy 74.0 102.0 68.0 106.0 73.0 105.0 74.0 102.0 73.0 DNF Entity purge purgeEntity 100.0 230.0 94.0 337.0 101.0 362.0 103.0 360.0 106.0 DNF ... purgeEntityReferenceCopy 73.0 239.0 70.0 229.0 74.0 230.0 77.0 222.0 76.0 DNF","title":"2.11"},{"location":"cts/2.11/2.11/#release-211","text":"","title":"Release 2.11"},{"location":"cts/2.11/2.11/#cts-results","text":"The 2.11 release is fully conformant with all Egeria profiles Profile Result Connector Egeria Crux Metadata sharing CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Reference copies CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Metadata maintenance CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Dynamic types UNKNOWN_STATUS 2.11 2.11 1.17.1 Graph queries CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Historical search CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Entity proxies CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Soft-delete and restore CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Undo an update CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Reidentify instance CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Retype instance CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Rehome instance CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Entity search CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Relationship search CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Entity advanced search CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Relationship advanced search CONFORMANT_FULL_SUPPORT 2.11 2.11 1.17.1 Additional notes The entity search tests could fail a particular long-running query pattern unless Lucene is configured: typically where a query by value or attribute is done without providing any restriction on the type of instances against which the query should run. Configure the connector with Lucene to avoid these timeouts. The Dynamic types profile currently does not have any tests defined, so will be UNKNOWN_STATUS for all repositories and connectors.","title":"CTS results"},{"location":"cts/2.11/2.11/#pts-results","text":"","title":"PTS results"},{"location":"cts/2.11/2.11/#crux-at-varying-volumes","text":"Summary The retrieval and write operations remain very consistent, with almost no variability, throughout the growth in volume. The search operations, however, begin to clearly degrade at the highest volumes tested. Further investigation into other optimized settings for the search operations for these larger volumes is likely warranted as the next step to continue to improve performance. Profile Method 05-02 (4,630) 10-05 (9,260) 20-10 (18,520) 40-10 (37,040) 80-10 (74,080) Entity creation addEntity 103.0 102.0 109.0 102.0 104.0 ... saveEntityReferenceCopy 96.0 97.0 105.0 98.0 100.0 Entity search findEntities 52.0 63.0 140.0 260.0 495.5 ... findEntitiesByProperty 32.0 37.0 55.0 101.0 193.0 ... findEntitiesByPropertyValue 50.0 59.0 102.5 129.0 201.5 Relationship creation addRelationship 103.0 102.0 108.0 103.0 106.0 ... saveRelationshipReferenceCopy 107.0 103.0 110.0 103.0 106.0 Relationship search findRelationships 26.0 30.0 39.0 36.0 40.0 ... findRelationshipsByProperty 31.0 35.0 52.0 104.0 204.0 ... findRelationshipsByPropertyValue 42.0 53.0 81.0 101.0 215.0 Entity classification classifyEntity 145.0 145.0 157.0 139.0 146.0 ... saveClassificationReferenceCopy 106.0 94.0 108.0 87.0 101.0 Classification search findEntitiesByClassification 37.0 46.0 76.0 110.0 147.0 Entity update reTypeEntity 89.0 86.0 93.0 89.0 87.0 ... updateEntityProperties 112.0 113.0 120.0 110.0 114.0 Relationship update updateRelationshipProperties 128.0 123.0 130.0 118.0 114.0 Classification update updateEntityClassification 169.0 167.5 200.0 167.0 169.0 Entity undo undoEntityUpdate 108.0 109.0 118.0 110.0 110.0 Relationship undo undoRelationshipUpdate 123.0 125.0 130.0 115.0 119.0 Entity retrieval getEntityDetail 15.0 15.0 15.0 15.0 14.0 ... getEntitySummary 15.0 15.0 14.0 15.0 14.0 ... isEntityKnown 16.0 15.0 15.0 15.0 14.0 Entity history retrieval getEntityDetail 18.0 18.0 17.0 18.0 17.0 ... getEntityDetailHistory 20.0 19.0 19.0 20.0 18.0 Relationship retrieval getRelationship 17.0 16.0 16.0 16.0 15.0 ... isRelationshipKnown 17.0 16.0 16.0 16.0 15.0 Relationship history retrieval getRelationship 20.0 18.0 19.0 19.0 18.0 ... getRelationshipHistory 21.0 19.0 20.0 20.0 19.0 Entity history search findEntities 58.0 92.0 253.5 478.0 1787.5 ... findEntitiesByProperty 29.0 33.0 49.0 53.0 80.0 ... findEntitiesByPropertyValue 41.0 55.0 106.0 144.0 380.5 Relationship history search findRelationships 27.0 34.0 55.0 48.0 59.0 ... findRelationshipsByProperty 31.0 42.0 76.0 59.0 79.5 ... findRelationshipsByPropertyValue 50.0 79.0 180.0 160.0 363.0 Graph queries getEntityNeighborhood 27.0 25.0 27.0 -- -- ... getLinkingEntities 20.0 25.0 40.0 -- -- ... getRelatedEntities 540.5 1182.5 3616.0 -- -- ... getRelationshipsForEntity 26.0 26.0 28.0 -- -- Graph history queries getEntityNeighborhood 26.0 25.0 26.0 -- -- ... getLinkingEntities 21.0 25.0 39.0 -- -- ... getRelatedEntities 539.0 1169.0 3629.5 -- -- ... getRelationshipsForEntity 24.0 25.0 26.0 -- -- Entity re-home reHomeEntity 115.0 102.0 120.0 113.0 112.0 Relationship re-home reHomeRelationship 100.0 95.0 114.0 103.0 105.0 Entity declassify declassifyEntity 133.0 132.0 155.0 137.0 141.0 ... purgeClassificationReferenceCopy 123.5 113.0 135.0 117.0 121.0 Entity re-identify reIdentifyEntity 131.0 120.0 137.0 129.0 129.0 Relationship re-identify reIdentifyRelationship 126.0 111.0 117.0 117.0 119.0 Relationship delete deleteRelationship 111.0 99.0 105.0 110.0 112.0 Entity delete deleteEntity 109.0 104.0 110.0 116.0 117.0 Entity restore restoreEntity 108.0 96.0 100.0 102.0 105.0 Relationship restore restoreRelationship 109.0 97.0 102.0 104.0 110.0 Relationship purge purgeRelationship 91.0 82.0 86.0 88.0 87.0 ... purgeRelationshipReferenceCopy 74.0 68.0 73.0 74.0 73.0 Entity purge purgeEntity 100.0 94.0 101.0 103.0 106.0 ... purgeEntityReferenceCopy 73.0 70.0 74.0 77.0 76.0","title":"Crux at varying volumes"},{"location":"cts/2.11/2.11/#crux-vs-janusgraph","text":"Summary In almost all cases, the Crux repository is significantly faster than JanusGraph: at most volumes completing all methods in less than 200ms and with very little variability. For JanusGraph, on the other hand, there is significant variability (in particular for methods like findEntitiesByClassification ), and there are numerous examples of the median execution time taking more than multiple seconds. Even at 8 times the volume of metadata the Crux connector still outperforms the JanusGraph connector in almost every method (the only exceptions being a few of the find methods, where the performance is approximately even at 2-4 times the volume). Graph queries were disabled for JanusGraph The graph queries were disabled for JanusGraph in order to have results in a timely manner: it would take more than a month to produce results for these queries for the JanusGraph connector. The Crux results can be difficult to see in detail due to the skew from the Janus results, so it may be easier to look at this more granular comparison that drops the higher scales of Janus for readability of the Crux results: Profile Method 05-02 (Crux) 05-02 (Janus) 10-05 (Crux) 10-05 (Janus) 20-10 (Crux) 20-10 (Janus) 40-10 (Crux) 40-10 (Janus) 80-10 (Crux) 80-10 (Janus) Entity creation addEntity 103.0 440.0 102.0 463.0 109.0 535.0 102.0 463.0 104.0 DNF ... saveEntityReferenceCopy 96.0 435.5 97.0 459.0 105.0 531.0 98.0 456.0 100.0 DNF Entity search findEntities 52.0 261.0 63.0 530.5 140.0 1320.0 260.0 2903.0 495.5 DNF ... findEntitiesByProperty 32.0 36.0 37.0 52.0 55.0 77.0 101.0 125.0 193.0 DNF ... findEntitiesByPropertyValue 50.0 78.0 59.0 107.0 102.5 138.0 129.0 210.0 201.5 DNF Relationship creation addRelationship 103.0 158.0 102.0 162.0 108.0 165.0 103.0 157.0 106.0 DNF ... saveRelationshipReferenceCopy 107.0 447.0 103.0 460.0 110.0 435.0 103.0 447.0 106.0 DNF Relationship search findRelationships 26.0 44.0 30.0 67.0 39.0 111.0 36.0 178.0 40.0 DNF ... findRelationshipsByProperty 31.0 41.0 35.0 63.0 52.0 101.0 104.0 157.0 204.0 DNF ... findRelationshipsByPropertyValue 42.0 75.0 53.0 94.0 81.0 141.0 101.0 213.0 215.0 DNF Entity classification classifyEntity 145.0 910.0 145.0 931.0 157.0 936.0 139.0 915.0 146.0 DNF ... saveClassificationReferenceCopy 106.0 750.0 94.0 872.0 108.0 889.0 87.0 852.5 101.0 DNF Classification search findEntitiesByClassification 37.0 614.0 46.0 1368.5 76.0 3462.0 110.0 4585.0 147.0 DNF Entity update reTypeEntity 89.0 381.0 86.0 432.0 93.0 428.0 89.0 370.0 87.0 DNF ... updateEntityProperties 112.0 714.0 113.0 804.0 120.0 802.5 110.0 797.0 114.0 DNF Relationship update updateRelationshipProperties 128.0 473.0 123.0 461.5 130.0 460.0 118.0 443.0 114.0 DNF Classification update updateEntityClassification 169.0 1152.0 167.5 1301.5 200.0 1418.0 167.0 1283.0 169.0 DNF Entity undo undoEntityUpdate 108.0 -- 109.0 -- 118.0 -- 110.0 -- 110.0 -- Relationship undo undoRelationshipUpdate 123.0 -- 125.0 -- 130.0 -- 115.0 -- 119.0 -- Entity retrieval getEntityDetail 15.0 17.0 15.0 21.0 15.0 16.0 15.0 15.0 14.0 DNF ... getEntitySummary 15.0 15.0 15.0 19.0 14.0 15.0 15.0 13.0 14.0 DNF ... isEntityKnown 16.0 17.0 15.0 20.0 15.0 17.0 15.0 15.0 14.0 DNF Entity history retrieval getEntityDetail 18.0 -- 18.0 -- 17.0 -- 18.0 -- 17.0 -- ... getEntityDetailHistory 20.0 -- 19.0 -- 19.0 -- 20.0 -- 18.0 -- Relationship retrieval getRelationship 17.0 18.0 16.0 25.0 16.0 19.0 16.0 16.0 15.0 DNF ... isRelationshipKnown 17.0 18.0 16.0 25.0 16.0 19.0 16.0 16.0 15.0 DNF Relationship history retrieval getRelationship 20.0 -- 18.0 -- 19.0 -- 19.0 -- 18.0 -- ... getRelationshipHistory 21.0 -- 19.0 -- 20.0 -- 20.0 -- 19.0 -- Entity history search findEntities 58.0 -- 92.0 -- 253.5 -- 478.0 -- 1787.5 -- ... findEntitiesByProperty 29.0 -- 33.0 -- 49.0 -- 53.0 -- 80.0 -- ... findEntitiesByPropertyValue 41.0 -- 55.0 -- 106.0 -- 144.0 -- 380.5 -- Relationship history search findRelationships 27.0 -- 34.0 -- 55.0 -- 48.0 -- 59.0 -- ... findRelationshipsByProperty 31.0 -- 42.0 -- 76.0 -- 59.0 -- 79.5 -- ... findRelationshipsByPropertyValue 50.0 -- 79.0 -- 180.0 -- 160.0 -- 363.0 -- Graph queries getEntityNeighborhood 27.0 -- 25.0 -- 27.0 -- -- -- -- -- ... getLinkingEntities 20.0 -- 25.0 -- 40.0 -- -- -- -- -- ... getRelatedEntities 540.5 -- 1182.5 -- 3616.0 -- -- -- -- -- ... getRelationshipsForEntity 26.0 -- 26.0 -- 28.0 -- -- -- -- -- Graph history queries getEntityNeighborhood 26.0 -- 25.0 -- 26.0 -- -- -- -- -- ... getLinkingEntities 21.0 -- 25.0 -- 39.0 -- -- -- -- -- ... getRelatedEntities 539.0 -- 1169.0 -- 3629.5 -- -- -- -- -- ... getRelationshipsForEntity 24.0 -- 25.0 -- 26.0 -- -- -- -- -- Entity re-home reHomeEntity 115.0 741.0 102.0 1244.0 120.0 859.0 113.0 777.5 112.0 DNF Relationship re-home reHomeRelationship 100.0 384.5 95.0 441.0 114.0 416.0 103.0 374.0 105.0 DNF Entity declassify declassifyEntity 133.0 1284.0 132.0 1423.0 155.0 1509.0 137.0 1389.0 141.0 DNF ... purgeClassificationReferenceCopy 123.5 -- 113.0 -- 135.0 -- 117.0 -- 121.0 -- Entity re-identify reIdentifyEntity 131.0 1674.0 120.0 1918.0 137.0 2212.5 129.0 1743.0 129.0 DNF Relationship re-identify reIdentifyRelationship 126.0 789.0 111.0 817.0 117.0 872.0 117.0 767.0 119.0 DNF Relationship delete deleteRelationship 111.0 384.0 99.0 394.0 105.0 418.0 110.0 382.0 112.0 DNF Entity delete deleteEntity 109.0 714.0 104.0 767.0 110.0 839.0 116.0 774.0 117.0 DNF Entity restore restoreEntity 108.0 778.5 96.0 919.0 100.0 855.0 102.0 782.0 105.0 DNF Relationship restore restoreRelationship 109.0 373.0 97.0 492.0 102.0 419.0 104.0 384.0 110.0 DNF Relationship purge purgeRelationship 91.0 128.0 82.0 172.0 86.0 174.0 88.0 178.0 87.0 DNF ... purgeRelationshipReferenceCopy 74.0 102.0 68.0 106.0 73.0 105.0 74.0 102.0 73.0 DNF Entity purge purgeEntity 100.0 230.0 94.0 337.0 101.0 362.0 103.0 360.0 106.0 DNF ... purgeEntityReferenceCopy 73.0 239.0 70.0 229.0 74.0 230.0 77.0 222.0 76.0 DNF","title":"Crux vs JanusGraph"},{"location":"cts/2.8/2.8/","text":"Release 2.8 \u00b6 CTS results \u00b6 The 2.8 release is fully conformant with all Egeria profiles Profile Result Connector Egeria Crux Metadata sharing CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Reference copies CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Metadata maintenance CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Dynamic types UNKNOWN_STATUS 2.8 2.8 21.04-1.16.0 Graph queries CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Historical search CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Entity proxies CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Soft-delete and restore CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Undo an update CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Reidentify instance CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Retype instance CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Rehome instance CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Entity search CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Relationship search CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Entity advanced search CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Relationship advanced search CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Additional notes The entity search tests could fail a particular long-running query pattern unless Lucene is configured: typically where a query by value or attribute is done without providing any restriction on the type of instances against which the query should run. Configure the connector with Lucene to avoid these timeouts. The Dynamic types profile currently does not have any tests defined, so will be UNKNOWN_STATUS for all repositories and connectors. PTS results \u00b6 Crux at varying volumes \u00b6 Summary The results below show a near-linear growth in the elapsed time of search operations, which is of course not desirable. This should be fixed in the 2.9 release, along with knock-on improvements to other areas that rely on the search operations (e.g. graph queries, entity re-identification, and entity deletes). Profile Method pts-05-02 pts-10-05 pts-20-10 pts-40-10 pts-80-10 Entity creation addEntity 95.0 93.0 94.0 93.0 93.0 ... saveEntityReferenceCopy 88.0 89.0 91.0 90.0 90.0 Entity search findEntities 242.0 677.0 1167.0 2140.0 4571.0 ... findEntitiesByProperty 208.0 424.0 823.0 2018.0 4656.0 ... findEntitiesByPropertyValue 79.0 176.0 273.5 453.5 1017.5 Relationship creation addRelationship 96.0 97.0 97.0 95.0 97.0 ... saveRelationshipReferenceCopy 98.0 98.0 98.0 96.0 98.0 Relationship search findRelationships 462.0 1186.0 2203.5 5195.0 10429.0 ... findRelationshipsByProperty 354.0 760.0 1458.0 3554.0 8611.0 ... findRelationshipsByPropertyValue 58.5 99.0 206.5 363.5 820.0 Entity classification classifyEntity 126.0 139.5 132.0 129.0 134.0 ... saveClassificationReferenceCopy 116.0 129.0 125.0 120.0 125.0 Classification search findEntitiesByClassification 39.0 55.0 73.0 97.0 141.0 Entity update reTypeEntity 97.0 95.0 96.0 94.0 97.0 ... updateEntityProperties 109.0 116.0 115.0 111.0 116.0 Relationship update updateRelationshipProperties 118.0 125.0 123.0 115.0 118.0 Classification update updateEntityClassification 143.5 159.0 153.0 152.0 156.0 Entity undo undoEntityUpdate 105.0 112.0 113.0 109.0 110.0 Relationship undo undoRelationshipUpdate 116.0 124.0 124.0 112.0 122.0 Entity retrieval getEntityDetail 16.0 16.0 16.0 15.0 15.0 ... getEntitySummary 15.5 16.0 16.0 15.0 15.0 ... isEntityKnown 16.0 17.0 16.0 15.0 15.0 Entity history retrieval getEntityDetail 19.0 20.0 19.0 18.0 18.0 ... getEntityDetailHistory 22.0 22.0 21.0 20.0 20.0 Relationship retrieval getRelationship 17.0 18.0 17.0 16.0 16.0 ... isRelationshipKnown 17.0 18.0 17.0 16.0 16.0 Relationship history retrieval getRelationship 20.0 21.0 20.0 19.0 19.0 ... getRelationshipHistory 22.0 22.0 21.0 20.0 20.0 Entity history search findEntities 265.0 674.0 1157.0 2365.0 5156.0 ... findEntitiesByProperty 43.0 60.0 81.0 117.0 261.0 ... findEntitiesByPropertyValue 82.5 171.5 271.5 593.0 1280.5 Relationship history search findRelationships 509.0 1299.0 2268.0 4608.5 10170.5 ... findRelationshipsByProperty 38.0 52.0 68.5 71.0 86.0 ... findRelationshipsByPropertyValue 71.0 131.0 223.0 413.5 885.0 Graph queries getEntityNeighborhood 35.0 39.0 36.0 -- -- ... getLinkingEntities 21.0 37.0 34.0 -- -- ... getRelatedEntities 4019.0 9743.0 17602.5 -- -- ... getRelationshipsForEntity 197.0 459.0 781.0 -- -- Graph history queries getEntityNeighborhood 34.5 38.0 35.0 -- -- ... getLinkingEntities 21.0 36.0 34.0 -- -- ... getRelatedEntities 4026.5 9829.0 17668.0 -- -- ... getRelationshipsForEntity 196.0 456.0 774.0 -- -- Entity re-home reHomeEntity 111.0 104.0 118.0 112.0 112.0 Relationship re-home reHomeRelationship 102.0 104.0 111.0 104.0 109.0 Entity declassify declassifyEntity 127.0 133.0 136.0 130.0 135.0 ... purgeClassificationReferenceCopy 118.0 122.0 131.0 114.0 121.0 Entity re-identify reIdentifyEntity 301.0 513.0 858.0 2080.0 4403.0 Relationship re-identify reIdentifyRelationship 115.0 120.0 119.0 119.0 120.0 Relationship delete deleteRelationship 102.0 106.0 110.0 114.0 115.0 Entity delete deleteEntity 336.0 582.0 1028.5 2726.0 5942.0 Entity restore restoreEntity 97.0 97.0 100.0 97.0 97.0 Relationship restore restoreRelationship 100.0 105.0 106.0 104.0 104.0 Relationship purge purgeRelationship 111.0 106.0 104.0 119.0 113.0 ... purgeRelationshipReferenceCopy 95.0 95.0 95.0 106.0 113.0 Entity purge purgeEntity 113.0 112.0 110.0 130.0 131.0 ... purgeEntityReferenceCopy 91.0 92.0 93.0 103.0 107.0 Crux vs JanusGraph \u00b6 Graph queries were disabled for JanusGraph The graph queries were disabled for JanusGraph in order to have results in a timely manner: it would take more than a month to produce results for these queries for the JanusGraph connector. Profile Method 5-2 (Crux) 5-2 (Janus) 10-5 (Crux) 10-5 (Janus) Entity creation addEntity 95.0 399.0 93.0 410.0 ... saveEntityReferenceCopy 88.0 396.5 89.0 406.0 Entity search findEntities 242.0 239.5 677.0 439.0 ... findEntitiesByProperty 208.0 36.0 424.0 49.0 ... findEntitiesByPropertyValue 79.0 76.5 176.0 109.0 Relationship creation addRelationship 96.0 140.0 97.0 143.0 ... saveRelationshipReferenceCopy 98.0 386.0 98.0 403.0 Relationship search findRelationships 462.0 43.0 1186.0 67.0 ... findRelationshipsByProperty 354.0 44.0 760.0 59.0 ... findRelationshipsByPropertyValue 58.5 67.0 99.0 91.0 Entity classification classifyEntity 126.0 820.0 139.5 830.5 ... saveClassificationReferenceCopy 116.0 710.0 129.0 787.0 Classification search findEntitiesByClassification 39.0 563.0 55.0 980.0 Entity update reTypeEntity 97.0 336.0 95.0 327.0 ... updateEntityProperties 109.0 646.0 116.0 669.0 Relationship update updateRelationshipProperties 118.0 399.0 125.0 415.0 Classification update updateEntityClassification 143.5 1073.5 159.0 1137.0 Entity undo undoEntityUpdate 105.0 -- 112.0 -- Relationship undo undoRelationshipUpdate 116.0 -- 124.0 -- Entity retrieval getEntityDetail 16.0 16.0 16.0 17.0 ... getEntitySummary 15.5 15.0 16.0 16.0 ... isEntityKnown 16.0 16.0 17.0 17.0 Entity history retrieval getEntityDetail 19.0 -- 20.0 -- ... getEntityDetailHistory 22.0 -- 22.0 -- Relationship retrieval getRelationship 17.0 18.0 18.0 19.0 ... isRelationshipKnown 17.0 19.0 18.0 19.0 Relationship history retrieval getRelationship 20.0 -- 21.0 -- ... getRelationshipHistory 22.0 -- 22.0 -- Entity history search findEntities 265.0 -- 674.0 -- ... findEntitiesByProperty 43.0 -- 60.0 -- ... findEntitiesByPropertyValue 82.5 -- 171.5 -- Relationship history search findRelationships 509.0 -- 1299.0 -- ... findRelationshipsByProperty 38.0 -- 52.0 -- ... findRelationshipsByPropertyValue 71.0 -- 131.0 -- Graph queries getEntityNeighborhood 35.0 -- 39.0 -- ... getLinkingEntities 21.0 -- 37.0 -- ... getRelatedEntities 4019.0 -- 9743.0 -- ... getRelationshipsForEntity 197.0 -- 459.0 -- Graph history queries getEntityNeighborhood 34.5 -- 38.0 -- ... getLinkingEntities 21.0 -- 36.0 -- ... getRelatedEntities 4026.5 -- 9829.0 -- ... getRelationshipsForEntity 196.0 -- 456.0 -- Entity re-home reHomeEntity 111.0 664.0 104.0 654.0 Relationship re-home reHomeRelationship 102.0 343.5 104.0 349.0 Entity declassify declassifyEntity 127.0 1183.0 133.0 1245.0 ... purgeClassificationReferenceCopy 118.0 -- 122.0 -- Entity re-identify reIdentifyEntity 301.0 1488.0 513.0 1515.0 Relationship re-identify reIdentifyRelationship 115.0 674.0 120.0 692.0 Relationship delete deleteRelationship 102.0 330.0 106.0 337.0 Entity delete deleteEntity 336.0 639.0 582.0 649.5 Entity restore restoreEntity 97.0 678.0 97.0 683.5 Relationship restore restoreRelationship 100.0 363.0 105.0 342.0 Relationship purge purgeRelationship 111.0 125.0 106.0 151.5 ... purgeRelationshipReferenceCopy 95.0 100.0 95.0 90.0 Entity purge purgeEntity 113.0 214.0 112.0 295.0 ... purgeEntityReferenceCopy 91.0 231.0 92.0 211.5","title":"2.8"},{"location":"cts/2.8/2.8/#release-28","text":"","title":"Release 2.8"},{"location":"cts/2.8/2.8/#cts-results","text":"The 2.8 release is fully conformant with all Egeria profiles Profile Result Connector Egeria Crux Metadata sharing CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Reference copies CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Metadata maintenance CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Dynamic types UNKNOWN_STATUS 2.8 2.8 21.04-1.16.0 Graph queries CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Historical search CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Entity proxies CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Soft-delete and restore CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Undo an update CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Reidentify instance CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Retype instance CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Rehome instance CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Entity search CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Relationship search CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Entity advanced search CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Relationship advanced search CONFORMANT_FULL_SUPPORT 2.8 2.8 21.04-1.16.0 Additional notes The entity search tests could fail a particular long-running query pattern unless Lucene is configured: typically where a query by value or attribute is done without providing any restriction on the type of instances against which the query should run. Configure the connector with Lucene to avoid these timeouts. The Dynamic types profile currently does not have any tests defined, so will be UNKNOWN_STATUS for all repositories and connectors.","title":"CTS results"},{"location":"cts/2.8/2.8/#pts-results","text":"","title":"PTS results"},{"location":"cts/2.8/2.8/#crux-at-varying-volumes","text":"Summary The results below show a near-linear growth in the elapsed time of search operations, which is of course not desirable. This should be fixed in the 2.9 release, along with knock-on improvements to other areas that rely on the search operations (e.g. graph queries, entity re-identification, and entity deletes). Profile Method pts-05-02 pts-10-05 pts-20-10 pts-40-10 pts-80-10 Entity creation addEntity 95.0 93.0 94.0 93.0 93.0 ... saveEntityReferenceCopy 88.0 89.0 91.0 90.0 90.0 Entity search findEntities 242.0 677.0 1167.0 2140.0 4571.0 ... findEntitiesByProperty 208.0 424.0 823.0 2018.0 4656.0 ... findEntitiesByPropertyValue 79.0 176.0 273.5 453.5 1017.5 Relationship creation addRelationship 96.0 97.0 97.0 95.0 97.0 ... saveRelationshipReferenceCopy 98.0 98.0 98.0 96.0 98.0 Relationship search findRelationships 462.0 1186.0 2203.5 5195.0 10429.0 ... findRelationshipsByProperty 354.0 760.0 1458.0 3554.0 8611.0 ... findRelationshipsByPropertyValue 58.5 99.0 206.5 363.5 820.0 Entity classification classifyEntity 126.0 139.5 132.0 129.0 134.0 ... saveClassificationReferenceCopy 116.0 129.0 125.0 120.0 125.0 Classification search findEntitiesByClassification 39.0 55.0 73.0 97.0 141.0 Entity update reTypeEntity 97.0 95.0 96.0 94.0 97.0 ... updateEntityProperties 109.0 116.0 115.0 111.0 116.0 Relationship update updateRelationshipProperties 118.0 125.0 123.0 115.0 118.0 Classification update updateEntityClassification 143.5 159.0 153.0 152.0 156.0 Entity undo undoEntityUpdate 105.0 112.0 113.0 109.0 110.0 Relationship undo undoRelationshipUpdate 116.0 124.0 124.0 112.0 122.0 Entity retrieval getEntityDetail 16.0 16.0 16.0 15.0 15.0 ... getEntitySummary 15.5 16.0 16.0 15.0 15.0 ... isEntityKnown 16.0 17.0 16.0 15.0 15.0 Entity history retrieval getEntityDetail 19.0 20.0 19.0 18.0 18.0 ... getEntityDetailHistory 22.0 22.0 21.0 20.0 20.0 Relationship retrieval getRelationship 17.0 18.0 17.0 16.0 16.0 ... isRelationshipKnown 17.0 18.0 17.0 16.0 16.0 Relationship history retrieval getRelationship 20.0 21.0 20.0 19.0 19.0 ... getRelationshipHistory 22.0 22.0 21.0 20.0 20.0 Entity history search findEntities 265.0 674.0 1157.0 2365.0 5156.0 ... findEntitiesByProperty 43.0 60.0 81.0 117.0 261.0 ... findEntitiesByPropertyValue 82.5 171.5 271.5 593.0 1280.5 Relationship history search findRelationships 509.0 1299.0 2268.0 4608.5 10170.5 ... findRelationshipsByProperty 38.0 52.0 68.5 71.0 86.0 ... findRelationshipsByPropertyValue 71.0 131.0 223.0 413.5 885.0 Graph queries getEntityNeighborhood 35.0 39.0 36.0 -- -- ... getLinkingEntities 21.0 37.0 34.0 -- -- ... getRelatedEntities 4019.0 9743.0 17602.5 -- -- ... getRelationshipsForEntity 197.0 459.0 781.0 -- -- Graph history queries getEntityNeighborhood 34.5 38.0 35.0 -- -- ... getLinkingEntities 21.0 36.0 34.0 -- -- ... getRelatedEntities 4026.5 9829.0 17668.0 -- -- ... getRelationshipsForEntity 196.0 456.0 774.0 -- -- Entity re-home reHomeEntity 111.0 104.0 118.0 112.0 112.0 Relationship re-home reHomeRelationship 102.0 104.0 111.0 104.0 109.0 Entity declassify declassifyEntity 127.0 133.0 136.0 130.0 135.0 ... purgeClassificationReferenceCopy 118.0 122.0 131.0 114.0 121.0 Entity re-identify reIdentifyEntity 301.0 513.0 858.0 2080.0 4403.0 Relationship re-identify reIdentifyRelationship 115.0 120.0 119.0 119.0 120.0 Relationship delete deleteRelationship 102.0 106.0 110.0 114.0 115.0 Entity delete deleteEntity 336.0 582.0 1028.5 2726.0 5942.0 Entity restore restoreEntity 97.0 97.0 100.0 97.0 97.0 Relationship restore restoreRelationship 100.0 105.0 106.0 104.0 104.0 Relationship purge purgeRelationship 111.0 106.0 104.0 119.0 113.0 ... purgeRelationshipReferenceCopy 95.0 95.0 95.0 106.0 113.0 Entity purge purgeEntity 113.0 112.0 110.0 130.0 131.0 ... purgeEntityReferenceCopy 91.0 92.0 93.0 103.0 107.0","title":"Crux at varying volumes"},{"location":"cts/2.8/2.8/#crux-vs-janusgraph","text":"Graph queries were disabled for JanusGraph The graph queries were disabled for JanusGraph in order to have results in a timely manner: it would take more than a month to produce results for these queries for the JanusGraph connector. Profile Method 5-2 (Crux) 5-2 (Janus) 10-5 (Crux) 10-5 (Janus) Entity creation addEntity 95.0 399.0 93.0 410.0 ... saveEntityReferenceCopy 88.0 396.5 89.0 406.0 Entity search findEntities 242.0 239.5 677.0 439.0 ... findEntitiesByProperty 208.0 36.0 424.0 49.0 ... findEntitiesByPropertyValue 79.0 76.5 176.0 109.0 Relationship creation addRelationship 96.0 140.0 97.0 143.0 ... saveRelationshipReferenceCopy 98.0 386.0 98.0 403.0 Relationship search findRelationships 462.0 43.0 1186.0 67.0 ... findRelationshipsByProperty 354.0 44.0 760.0 59.0 ... findRelationshipsByPropertyValue 58.5 67.0 99.0 91.0 Entity classification classifyEntity 126.0 820.0 139.5 830.5 ... saveClassificationReferenceCopy 116.0 710.0 129.0 787.0 Classification search findEntitiesByClassification 39.0 563.0 55.0 980.0 Entity update reTypeEntity 97.0 336.0 95.0 327.0 ... updateEntityProperties 109.0 646.0 116.0 669.0 Relationship update updateRelationshipProperties 118.0 399.0 125.0 415.0 Classification update updateEntityClassification 143.5 1073.5 159.0 1137.0 Entity undo undoEntityUpdate 105.0 -- 112.0 -- Relationship undo undoRelationshipUpdate 116.0 -- 124.0 -- Entity retrieval getEntityDetail 16.0 16.0 16.0 17.0 ... getEntitySummary 15.5 15.0 16.0 16.0 ... isEntityKnown 16.0 16.0 17.0 17.0 Entity history retrieval getEntityDetail 19.0 -- 20.0 -- ... getEntityDetailHistory 22.0 -- 22.0 -- Relationship retrieval getRelationship 17.0 18.0 18.0 19.0 ... isRelationshipKnown 17.0 19.0 18.0 19.0 Relationship history retrieval getRelationship 20.0 -- 21.0 -- ... getRelationshipHistory 22.0 -- 22.0 -- Entity history search findEntities 265.0 -- 674.0 -- ... findEntitiesByProperty 43.0 -- 60.0 -- ... findEntitiesByPropertyValue 82.5 -- 171.5 -- Relationship history search findRelationships 509.0 -- 1299.0 -- ... findRelationshipsByProperty 38.0 -- 52.0 -- ... findRelationshipsByPropertyValue 71.0 -- 131.0 -- Graph queries getEntityNeighborhood 35.0 -- 39.0 -- ... getLinkingEntities 21.0 -- 37.0 -- ... getRelatedEntities 4019.0 -- 9743.0 -- ... getRelationshipsForEntity 197.0 -- 459.0 -- Graph history queries getEntityNeighborhood 34.5 -- 38.0 -- ... getLinkingEntities 21.0 -- 36.0 -- ... getRelatedEntities 4026.5 -- 9829.0 -- ... getRelationshipsForEntity 196.0 -- 456.0 -- Entity re-home reHomeEntity 111.0 664.0 104.0 654.0 Relationship re-home reHomeRelationship 102.0 343.5 104.0 349.0 Entity declassify declassifyEntity 127.0 1183.0 133.0 1245.0 ... purgeClassificationReferenceCopy 118.0 -- 122.0 -- Entity re-identify reIdentifyEntity 301.0 1488.0 513.0 1515.0 Relationship re-identify reIdentifyRelationship 115.0 674.0 120.0 692.0 Relationship delete deleteRelationship 102.0 330.0 106.0 337.0 Entity delete deleteEntity 336.0 639.0 582.0 649.5 Entity restore restoreEntity 97.0 678.0 97.0 683.5 Relationship restore restoreRelationship 100.0 363.0 105.0 342.0 Relationship purge purgeRelationship 111.0 125.0 106.0 151.5 ... purgeRelationshipReferenceCopy 95.0 100.0 95.0 90.0 Entity purge purgeEntity 113.0 214.0 112.0 295.0 ... purgeEntityReferenceCopy 91.0 231.0 92.0 211.5","title":"Crux vs JanusGraph"},{"location":"cts/2.9/2.9/","text":"Release 2.9 \u00b6 CTS results \u00b6 The 2.9 release is fully conformant with all Egeria profiles Profile Result Connector Egeria Crux Metadata sharing CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Reference copies CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Metadata maintenance CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Dynamic types UNKNOWN_STATUS 2.9 2.9 21.04-1.16.0 Graph queries CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Historical search CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Entity proxies CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Soft-delete and restore CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Undo an update CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Reidentify instance CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Retype instance CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Rehome instance CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Entity search CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Relationship search CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Entity advanced search CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Relationship advanced search CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Additional notes The entity search tests could fail a particular long-running query pattern unless Lucene is configured: typically where a query by value or attribute is done without providing any restriction on the type of instances against which the query should run. Configure the connector with Lucene to avoid these timeouts. The Dynamic types profile currently does not have any tests defined, so will be UNKNOWN_STATUS for all repositories and connectors. PTS results \u00b6 Crux at varying volumes \u00b6 Summary The retrieval and write operations remain very consistent, with almost no variability, throughout the growth in volume. The search operations, however, begin to clearly degrade at the highest volumes tested. Further investigation into other optimized settings for the search operations for these larger volumes is likely warranted as the next step to continue to improve performance. Profile Method 05-02 (4,410) 10-05 (8,820) 20-10 (17,640) 40-10 (35,280) 80-10 (70,560) Entity creation addEntity 95.0 94.0 92.0 92.0 93.0 ... saveEntityReferenceCopy 88.0 90.0 89.0 88.0 90.0 Entity search findEntities 43.0 72.0 108.5 221.0 511.0 ... findEntitiesByProperty 32.0 45.0 54.0 97.0 194.0 ... findEntitiesByPropertyValue 41.0 70.0 103.0 126.0 255.5 Relationship creation addRelationship 98.0 96.0 95.0 98.0 102.0 ... saveRelationshipReferenceCopy 99.0 95.0 95.0 97.0 100.0 Relationship search findRelationships 27.0 33.0 41.0 40.0 45.0 ... findRelationshipsByProperty 32.0 46.0 53.0 106.0 218.0 ... findRelationshipsByPropertyValue 41.0 52.0 70.5 104.0 209.0 Entity classification classifyEntity 129.0 132.0 133.0 127.0 134.0 ... saveClassificationReferenceCopy 121.0 119.0 125.0 119.0 125.0 Classification search findEntitiesByClassification 38.0 50.0 66.0 98.0 141.0 Entity update reTypeEntity 91.0 104.0 85.0 92.0 95.0 ... updateEntityProperties 114.0 113.0 113.0 110.0 117.0 Relationship update updateRelationshipProperties 127.0 121.0 122.0 119.0 122.0 Classification update updateEntityClassification 150.0 150.0 157.0 147.5 157.0 Entity undo undoEntityUpdate 111.0 107.0 110.0 109.0 112.0 Relationship undo undoRelationshipUpdate 123.0 122.0 120.0 117.0 123.0 Entity retrieval getEntityDetail 15.0 15.0 16.0 14.0 16.0 ... getEntitySummary 15.0 15.0 16.0 14.0 15.0 ... isEntityKnown 15.0 15.0 16.0 14.0 16.0 Entity history retrieval getEntityDetail 18.0 18.0 19.0 17.0 18.0 ... getEntityDetailHistory 20.0 19.0 20.0 19.0 20.0 Relationship retrieval getRelationship 17.0 16.0 17.0 15.0 17.0 ... isRelationshipKnown 17.0 16.0 17.0 15.0 17.0 Relationship history retrieval getRelationship 20.0 18.0 20.0 18.0 19.0 ... getRelationshipHistory 21.0 19.0 21.0 19.0 21.0 Entity history search findEntities 66.0 96.0 173.0 577.5 1586.0 ... findEntitiesByProperty 36.0 40.0 50.0 61.0 90.0 ... findEntitiesByPropertyValue 51.0 66.0 108.0 195.0 502.0 Relationship history search findRelationships 33.0 41.0 50.0 52.0 60.0 ... findRelationshipsByProperty 38.0 50.0 61.0 65.0 76.0 ... findRelationshipsByPropertyValue 52.5 86.0 113.0 157.0 305.5 Graph queries getEntityNeighborhood 32.0 35.0 35.0 -- -- ... getLinkingEntities 20.0 38.0 3230.0 -- -- ... getRelatedEntities 1909.0 4028.5 9125.5 -- -- ... getRelationshipsForEntity 29.0 33.0 33.0 -- -- Graph history queries getEntityNeighborhood 33.0 35.0 35.0 -- -- ... getLinkingEntities 20.0 37.0 3218.5 -- -- ... getRelatedEntities 1904.0 4044.0 9058.5 -- -- ... getRelationshipsForEntity 28.0 31.0 31.0 -- -- Entity re-home reHomeEntity 107.0 104.0 103.0 112.0 115.0 Relationship re-home reHomeRelationship 100.0 98.0 98.0 106.0 111.0 Entity declassify declassifyEntity 120.0 131.0 120.0 132.0 139.0 ... purgeClassificationReferenceCopy 109.0 119.0 110.0 118.0 121.0 Entity re-identify reIdentifyEntity 126.0 154.0 122.0 133.0 139.0 Relationship re-identify reIdentifyRelationship 112.0 127.0 107.0 119.0 126.0 Relationship delete deleteRelationship 101.0 108.0 97.0 110.0 119.0 Entity delete deleteEntity 108.0 115.0 106.0 119.0 128.0 Entity restore restoreEntity 97.0 102.0 93.0 101.0 108.0 Relationship restore restoreRelationship 99.0 105.0 94.0 104.0 116.0 Relationship purge purgeRelationship 106.0 118.0 101.0 115.0 120.0 ... purgeRelationshipReferenceCopy 95.0 103.0 93.0 104.0 110.0 Entity purge purgeEntity 113.0 119.0 107.0 120.0 131.0 ... purgeEntityReferenceCopy 91.0 97.0 89.0 100.0 108.0 Crux vs JanusGraph \u00b6 Summary In almost all cases, the Crux repository is significantly faster than JanusGraph: at most volumes completing all methods in less than 200ms and with very little variability. For JanusGraph, on the other hand, there is significant variability (in particular for methods like findEntitiesByClassification ), and there are numerous examples of the median execution time taking more than multiple seconds. Even at 8 times the volume of metadata the Crux connector still outperforms the JanusGraph connector in almost every method (the only exceptions being a few of the find methods, where the performance is approximately even at 2-4 times the volume). Graph queries were disabled for JanusGraph The graph queries were disabled for JanusGraph in order to have results in a timely manner: it would take more than a month to produce results for these queries for the JanusGraph connector. The Crux results can be difficult to see in detail due to the skew from the Janus results, so it may be easier to look at this more granular comparison that drops the higher scales of Janus for readability of the Crux results: Profile Method 05-02 (Crux) 05-02 (Janus) 10-05 (Crux) 10-05 (Janus) 20-10 (Crux) 20-10 (Janus) 40-10 (Crux) 40-10 (Janus) 80-10 (Crux) 80-10 (Janus) Entity creation addEntity 95.0 426.5 94.0 422.0 92.0 449.0 92.0 473.0 93.0 DNF ... saveEntityReferenceCopy 88.0 424.0 90.0 420.0 89.0 452.0 88.0 470.0 90.0 DNF Entity search findEntities 43.0 259.0 72.0 435.0 108.5 873.0 221.0 2539.5 511.0 DNF ... findEntitiesByProperty 32.0 38.0 45.0 52.0 54.0 77.0 97.0 128.0 194.0 DNF ... findEntitiesByPropertyValue 41.0 80.0 70.0 106.0 103.0 128.0 126.0 186.0 255.5 DNF Relationship creation addRelationship 98.0 151.0 96.0 147.0 95.0 151.0 98.0 153.0 102.0 DNF ... saveRelationshipReferenceCopy 99.0 411.0 95.0 415.0 95.0 410.0 97.0 449.5 100.0 DNF Relationship search findRelationships 27.0 46.0 33.0 70.0 41.0 109.0 40.0 186.0 45.0 DNF ... findRelationshipsByProperty 32.0 44.0 46.0 64.0 53.0 99.5 106.0 174.0 218.0 DNF ... findRelationshipsByPropertyValue 41.0 72.0 52.0 98.0 70.5 132.5 104.0 225.0 209.0 DNF Entity classification classifyEntity 129.0 888.0 132.0 860.0 133.0 937.0 127.0 924.0 134.0 DNF ... saveClassificationReferenceCopy 121.0 734.0 119.0 792.0 125.0 894.5 119.0 853.0 125.0 DNF Classification search findEntitiesByClassification 38.0 649.0 50.0 1111.5 66.0 2459.0 98.0 4272.0 141.0 DNF Entity update reTypeEntity 91.0 348.0 104.0 343.0 85.0 495.5 92.0 459.0 95.0 DNF ... updateEntityProperties 114.0 679.0 113.0 681.5 113.0 805.0 110.0 747.0 117.0 DNF Relationship update updateRelationshipProperties 127.0 418.0 121.0 404.0 122.0 443.0 119.0 453.0 122.0 DNF Classification update updateEntityClassification 150.0 1164.0 150.0 1170.5 157.0 1381.0 147.5 1308.0 157.0 DNF Entity undo undoEntityUpdate 111.0 -- 107.0 -- 110.0 -- 109.0 -- 112.0 -- Relationship undo undoRelationshipUpdate 123.0 -- 122.0 -- 120.0 -- 117.0 -- 123.0 -- Entity retrieval getEntityDetail 15.0 17.0 15.0 16.0 16.0 16.0 14.0 17.0 16.0 DNF ... getEntitySummary 15.0 16.0 15.0 15.0 16.0 14.0 14.0 15.0 15.0 DNF ... isEntityKnown 15.0 17.0 15.0 16.0 16.0 16.0 14.0 17.0 16.0 DNF Entity history retrieval getEntityDetail 18.0 -- 18.0 -- 19.0 -- 17.0 -- 18.0 -- ... getEntityDetailHistory 20.0 -- 19.0 -- 20.0 -- 19.0 -- 20.0 -- Relationship retrieval getRelationship 17.0 20.0 16.0 18.0 17.0 18.0 15.0 19.0 17.0 DNF ... isRelationshipKnown 17.0 20.0 16.0 18.0 17.0 18.0 15.0 19.0 17.0 DNF Relationship history retrieval getRelationship 20.0 -- 18.0 -- 20.0 -- 18.0 -- 19.0 -- ... getRelationshipHistory 21.0 -- 19.0 -- 21.0 -- 19.0 -- 21.0 -- Entity history search findEntities 66.0 -- 96.0 -- 173.0 -- 577.5 -- 1586.0 -- ... findEntitiesByProperty 36.0 -- 40.0 -- 50.0 -- 61.0 -- 90.0 -- ... findEntitiesByPropertyValue 51.0 -- 66.0 -- 108.0 -- 195.0 -- 502.0 -- Relationship history search findRelationships 33.0 -- 41.0 -- 50.0 -- 52.0 -- 60.0 -- ... findRelationshipsByProperty 38.0 -- 50.0 -- 61.0 -- 65.0 -- 76.0 -- ... findRelationshipsByPropertyValue 52.5 -- 86.0 -- 113.0 -- 157.0 -- 305.5 -- Graph queries getEntityNeighborhood 32.0 -- 35.0 -- 35.0 -- -- -- -- -- ... getLinkingEntities 20.0 -- 38.0 -- 3230.0 -- -- -- -- -- ... getRelatedEntities 1909.0 -- 4028.5 -- 9125.5 -- -- -- -- -- ... getRelationshipsForEntity 29.0 -- 33.0 -- 33.0 -- -- -- -- -- Graph history queries getEntityNeighborhood 33.0 -- 35.0 -- 35.0 -- -- -- -- -- ... getLinkingEntities 20.0 -- 37.0 -- 3218.5 -- -- -- -- -- ... getRelatedEntities 1904.0 -- 4044.0 -- 9058.5 -- -- -- -- -- ... getRelationshipsForEntity 28.0 -- 31.0 -- 31.0 -- -- -- -- -- Entity re-home reHomeEntity 107.0 700.0 104.0 659.0 103.0 764.0 112.0 781.5 115.0 DNF Relationship re-home reHomeRelationship 100.0 348.0 98.0 341.0 98.0 427.0 106.0 383.0 111.0 DNF Entity declassify declassifyEntity 120.0 1191.0 131.0 1249.0 120.0 1415.5 132.0 1465.0 139.0 DNF ... purgeClassificationReferenceCopy 109.0 -- 119.0 -- 110.0 -- 118.0 -- 121.0 -- Entity re-identify reIdentifyEntity 126.0 1599.0 154.0 1606.5 122.0 1879.5 133.0 1739.5 139.0 DNF Relationship re-identify reIdentifyRelationship 112.0 728.5 127.0 733.0 107.0 806.0 119.0 789.0 126.0 DNF Relationship delete deleteRelationship 101.0 352.5 108.0 341.0 97.0 383.0 110.0 377.0 119.0 DNF Entity delete deleteEntity 108.0 681.0 115.0 709.0 106.0 797.0 119.0 796.0 128.0 DNF Entity restore restoreEntity 97.0 743.0 102.0 749.5 93.0 831.0 101.0 789.0 108.0 DNF Relationship restore restoreRelationship 99.0 352.5 105.0 339.0 94.0 371.0 104.0 370.0 116.0 DNF Relationship purge purgeRelationship 106.0 124.0 118.0 153.0 101.0 161.0 115.0 168.0 120.0 DNF ... purgeRelationshipReferenceCopy 95.0 96.0 103.0 93.0 93.0 93.0 104.0 94.0 110.0 DNF Entity purge purgeEntity 113.0 223.0 119.0 316.0 107.0 334.0 120.0 345.5 131.0 DNF ... purgeEntityReferenceCopy 91.0 230.0 97.0 214.0 89.0 217.0 100.0 212.0 108.0 DNF","title":"2.9"},{"location":"cts/2.9/2.9/#release-29","text":"","title":"Release 2.9"},{"location":"cts/2.9/2.9/#cts-results","text":"The 2.9 release is fully conformant with all Egeria profiles Profile Result Connector Egeria Crux Metadata sharing CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Reference copies CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Metadata maintenance CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Dynamic types UNKNOWN_STATUS 2.9 2.9 21.04-1.16.0 Graph queries CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Historical search CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Entity proxies CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Soft-delete and restore CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Undo an update CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Reidentify instance CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Retype instance CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Rehome instance CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Entity search CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Relationship search CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Entity advanced search CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Relationship advanced search CONFORMANT_FULL_SUPPORT 2.9 2.9 21.04-1.16.0 Additional notes The entity search tests could fail a particular long-running query pattern unless Lucene is configured: typically where a query by value or attribute is done without providing any restriction on the type of instances against which the query should run. Configure the connector with Lucene to avoid these timeouts. The Dynamic types profile currently does not have any tests defined, so will be UNKNOWN_STATUS for all repositories and connectors.","title":"CTS results"},{"location":"cts/2.9/2.9/#pts-results","text":"","title":"PTS results"},{"location":"cts/2.9/2.9/#crux-at-varying-volumes","text":"Summary The retrieval and write operations remain very consistent, with almost no variability, throughout the growth in volume. The search operations, however, begin to clearly degrade at the highest volumes tested. Further investigation into other optimized settings for the search operations for these larger volumes is likely warranted as the next step to continue to improve performance. Profile Method 05-02 (4,410) 10-05 (8,820) 20-10 (17,640) 40-10 (35,280) 80-10 (70,560) Entity creation addEntity 95.0 94.0 92.0 92.0 93.0 ... saveEntityReferenceCopy 88.0 90.0 89.0 88.0 90.0 Entity search findEntities 43.0 72.0 108.5 221.0 511.0 ... findEntitiesByProperty 32.0 45.0 54.0 97.0 194.0 ... findEntitiesByPropertyValue 41.0 70.0 103.0 126.0 255.5 Relationship creation addRelationship 98.0 96.0 95.0 98.0 102.0 ... saveRelationshipReferenceCopy 99.0 95.0 95.0 97.0 100.0 Relationship search findRelationships 27.0 33.0 41.0 40.0 45.0 ... findRelationshipsByProperty 32.0 46.0 53.0 106.0 218.0 ... findRelationshipsByPropertyValue 41.0 52.0 70.5 104.0 209.0 Entity classification classifyEntity 129.0 132.0 133.0 127.0 134.0 ... saveClassificationReferenceCopy 121.0 119.0 125.0 119.0 125.0 Classification search findEntitiesByClassification 38.0 50.0 66.0 98.0 141.0 Entity update reTypeEntity 91.0 104.0 85.0 92.0 95.0 ... updateEntityProperties 114.0 113.0 113.0 110.0 117.0 Relationship update updateRelationshipProperties 127.0 121.0 122.0 119.0 122.0 Classification update updateEntityClassification 150.0 150.0 157.0 147.5 157.0 Entity undo undoEntityUpdate 111.0 107.0 110.0 109.0 112.0 Relationship undo undoRelationshipUpdate 123.0 122.0 120.0 117.0 123.0 Entity retrieval getEntityDetail 15.0 15.0 16.0 14.0 16.0 ... getEntitySummary 15.0 15.0 16.0 14.0 15.0 ... isEntityKnown 15.0 15.0 16.0 14.0 16.0 Entity history retrieval getEntityDetail 18.0 18.0 19.0 17.0 18.0 ... getEntityDetailHistory 20.0 19.0 20.0 19.0 20.0 Relationship retrieval getRelationship 17.0 16.0 17.0 15.0 17.0 ... isRelationshipKnown 17.0 16.0 17.0 15.0 17.0 Relationship history retrieval getRelationship 20.0 18.0 20.0 18.0 19.0 ... getRelationshipHistory 21.0 19.0 21.0 19.0 21.0 Entity history search findEntities 66.0 96.0 173.0 577.5 1586.0 ... findEntitiesByProperty 36.0 40.0 50.0 61.0 90.0 ... findEntitiesByPropertyValue 51.0 66.0 108.0 195.0 502.0 Relationship history search findRelationships 33.0 41.0 50.0 52.0 60.0 ... findRelationshipsByProperty 38.0 50.0 61.0 65.0 76.0 ... findRelationshipsByPropertyValue 52.5 86.0 113.0 157.0 305.5 Graph queries getEntityNeighborhood 32.0 35.0 35.0 -- -- ... getLinkingEntities 20.0 38.0 3230.0 -- -- ... getRelatedEntities 1909.0 4028.5 9125.5 -- -- ... getRelationshipsForEntity 29.0 33.0 33.0 -- -- Graph history queries getEntityNeighborhood 33.0 35.0 35.0 -- -- ... getLinkingEntities 20.0 37.0 3218.5 -- -- ... getRelatedEntities 1904.0 4044.0 9058.5 -- -- ... getRelationshipsForEntity 28.0 31.0 31.0 -- -- Entity re-home reHomeEntity 107.0 104.0 103.0 112.0 115.0 Relationship re-home reHomeRelationship 100.0 98.0 98.0 106.0 111.0 Entity declassify declassifyEntity 120.0 131.0 120.0 132.0 139.0 ... purgeClassificationReferenceCopy 109.0 119.0 110.0 118.0 121.0 Entity re-identify reIdentifyEntity 126.0 154.0 122.0 133.0 139.0 Relationship re-identify reIdentifyRelationship 112.0 127.0 107.0 119.0 126.0 Relationship delete deleteRelationship 101.0 108.0 97.0 110.0 119.0 Entity delete deleteEntity 108.0 115.0 106.0 119.0 128.0 Entity restore restoreEntity 97.0 102.0 93.0 101.0 108.0 Relationship restore restoreRelationship 99.0 105.0 94.0 104.0 116.0 Relationship purge purgeRelationship 106.0 118.0 101.0 115.0 120.0 ... purgeRelationshipReferenceCopy 95.0 103.0 93.0 104.0 110.0 Entity purge purgeEntity 113.0 119.0 107.0 120.0 131.0 ... purgeEntityReferenceCopy 91.0 97.0 89.0 100.0 108.0","title":"Crux at varying volumes"},{"location":"cts/2.9/2.9/#crux-vs-janusgraph","text":"Summary In almost all cases, the Crux repository is significantly faster than JanusGraph: at most volumes completing all methods in less than 200ms and with very little variability. For JanusGraph, on the other hand, there is significant variability (in particular for methods like findEntitiesByClassification ), and there are numerous examples of the median execution time taking more than multiple seconds. Even at 8 times the volume of metadata the Crux connector still outperforms the JanusGraph connector in almost every method (the only exceptions being a few of the find methods, where the performance is approximately even at 2-4 times the volume). Graph queries were disabled for JanusGraph The graph queries were disabled for JanusGraph in order to have results in a timely manner: it would take more than a month to produce results for these queries for the JanusGraph connector. The Crux results can be difficult to see in detail due to the skew from the Janus results, so it may be easier to look at this more granular comparison that drops the higher scales of Janus for readability of the Crux results: Profile Method 05-02 (Crux) 05-02 (Janus) 10-05 (Crux) 10-05 (Janus) 20-10 (Crux) 20-10 (Janus) 40-10 (Crux) 40-10 (Janus) 80-10 (Crux) 80-10 (Janus) Entity creation addEntity 95.0 426.5 94.0 422.0 92.0 449.0 92.0 473.0 93.0 DNF ... saveEntityReferenceCopy 88.0 424.0 90.0 420.0 89.0 452.0 88.0 470.0 90.0 DNF Entity search findEntities 43.0 259.0 72.0 435.0 108.5 873.0 221.0 2539.5 511.0 DNF ... findEntitiesByProperty 32.0 38.0 45.0 52.0 54.0 77.0 97.0 128.0 194.0 DNF ... findEntitiesByPropertyValue 41.0 80.0 70.0 106.0 103.0 128.0 126.0 186.0 255.5 DNF Relationship creation addRelationship 98.0 151.0 96.0 147.0 95.0 151.0 98.0 153.0 102.0 DNF ... saveRelationshipReferenceCopy 99.0 411.0 95.0 415.0 95.0 410.0 97.0 449.5 100.0 DNF Relationship search findRelationships 27.0 46.0 33.0 70.0 41.0 109.0 40.0 186.0 45.0 DNF ... findRelationshipsByProperty 32.0 44.0 46.0 64.0 53.0 99.5 106.0 174.0 218.0 DNF ... findRelationshipsByPropertyValue 41.0 72.0 52.0 98.0 70.5 132.5 104.0 225.0 209.0 DNF Entity classification classifyEntity 129.0 888.0 132.0 860.0 133.0 937.0 127.0 924.0 134.0 DNF ... saveClassificationReferenceCopy 121.0 734.0 119.0 792.0 125.0 894.5 119.0 853.0 125.0 DNF Classification search findEntitiesByClassification 38.0 649.0 50.0 1111.5 66.0 2459.0 98.0 4272.0 141.0 DNF Entity update reTypeEntity 91.0 348.0 104.0 343.0 85.0 495.5 92.0 459.0 95.0 DNF ... updateEntityProperties 114.0 679.0 113.0 681.5 113.0 805.0 110.0 747.0 117.0 DNF Relationship update updateRelationshipProperties 127.0 418.0 121.0 404.0 122.0 443.0 119.0 453.0 122.0 DNF Classification update updateEntityClassification 150.0 1164.0 150.0 1170.5 157.0 1381.0 147.5 1308.0 157.0 DNF Entity undo undoEntityUpdate 111.0 -- 107.0 -- 110.0 -- 109.0 -- 112.0 -- Relationship undo undoRelationshipUpdate 123.0 -- 122.0 -- 120.0 -- 117.0 -- 123.0 -- Entity retrieval getEntityDetail 15.0 17.0 15.0 16.0 16.0 16.0 14.0 17.0 16.0 DNF ... getEntitySummary 15.0 16.0 15.0 15.0 16.0 14.0 14.0 15.0 15.0 DNF ... isEntityKnown 15.0 17.0 15.0 16.0 16.0 16.0 14.0 17.0 16.0 DNF Entity history retrieval getEntityDetail 18.0 -- 18.0 -- 19.0 -- 17.0 -- 18.0 -- ... getEntityDetailHistory 20.0 -- 19.0 -- 20.0 -- 19.0 -- 20.0 -- Relationship retrieval getRelationship 17.0 20.0 16.0 18.0 17.0 18.0 15.0 19.0 17.0 DNF ... isRelationshipKnown 17.0 20.0 16.0 18.0 17.0 18.0 15.0 19.0 17.0 DNF Relationship history retrieval getRelationship 20.0 -- 18.0 -- 20.0 -- 18.0 -- 19.0 -- ... getRelationshipHistory 21.0 -- 19.0 -- 21.0 -- 19.0 -- 21.0 -- Entity history search findEntities 66.0 -- 96.0 -- 173.0 -- 577.5 -- 1586.0 -- ... findEntitiesByProperty 36.0 -- 40.0 -- 50.0 -- 61.0 -- 90.0 -- ... findEntitiesByPropertyValue 51.0 -- 66.0 -- 108.0 -- 195.0 -- 502.0 -- Relationship history search findRelationships 33.0 -- 41.0 -- 50.0 -- 52.0 -- 60.0 -- ... findRelationshipsByProperty 38.0 -- 50.0 -- 61.0 -- 65.0 -- 76.0 -- ... findRelationshipsByPropertyValue 52.5 -- 86.0 -- 113.0 -- 157.0 -- 305.5 -- Graph queries getEntityNeighborhood 32.0 -- 35.0 -- 35.0 -- -- -- -- -- ... getLinkingEntities 20.0 -- 38.0 -- 3230.0 -- -- -- -- -- ... getRelatedEntities 1909.0 -- 4028.5 -- 9125.5 -- -- -- -- -- ... getRelationshipsForEntity 29.0 -- 33.0 -- 33.0 -- -- -- -- -- Graph history queries getEntityNeighborhood 33.0 -- 35.0 -- 35.0 -- -- -- -- -- ... getLinkingEntities 20.0 -- 37.0 -- 3218.5 -- -- -- -- -- ... getRelatedEntities 1904.0 -- 4044.0 -- 9058.5 -- -- -- -- -- ... getRelationshipsForEntity 28.0 -- 31.0 -- 31.0 -- -- -- -- -- Entity re-home reHomeEntity 107.0 700.0 104.0 659.0 103.0 764.0 112.0 781.5 115.0 DNF Relationship re-home reHomeRelationship 100.0 348.0 98.0 341.0 98.0 427.0 106.0 383.0 111.0 DNF Entity declassify declassifyEntity 120.0 1191.0 131.0 1249.0 120.0 1415.5 132.0 1465.0 139.0 DNF ... purgeClassificationReferenceCopy 109.0 -- 119.0 -- 110.0 -- 118.0 -- 121.0 -- Entity re-identify reIdentifyEntity 126.0 1599.0 154.0 1606.5 122.0 1879.5 133.0 1739.5 139.0 DNF Relationship re-identify reIdentifyRelationship 112.0 728.5 127.0 733.0 107.0 806.0 119.0 789.0 126.0 DNF Relationship delete deleteRelationship 101.0 352.5 108.0 341.0 97.0 383.0 110.0 377.0 119.0 DNF Entity delete deleteEntity 108.0 681.0 115.0 709.0 106.0 797.0 119.0 796.0 128.0 DNF Entity restore restoreEntity 97.0 743.0 102.0 749.5 93.0 831.0 101.0 789.0 108.0 DNF Relationship restore restoreRelationship 99.0 352.5 105.0 339.0 94.0 371.0 104.0 370.0 116.0 DNF Relationship purge purgeRelationship 106.0 124.0 118.0 153.0 101.0 161.0 115.0 168.0 120.0 DNF ... purgeRelationshipReferenceCopy 95.0 96.0 103.0 93.0 93.0 93.0 104.0 94.0 110.0 DNF Entity purge purgeEntity 113.0 223.0 119.0 316.0 107.0 334.0 120.0 345.5 131.0 DNF ... purgeEntityReferenceCopy 91.0 230.0 97.0 214.0 89.0 217.0 100.0 212.0 108.0 DNF","title":"Crux vs JanusGraph"},{"location":"getting-started/explore/","text":"Explore \u00b6 Once a connector instance is up and running, you should now be able to start interacting with the repository. Without any additional dependencies, this is most easily illustrated using direct REST API interactions with the server chassis's repository services. Create a new entity \u00b6 Create a new GlossaryTerm : curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"class\":\"EntityCreateRequest\",\"entityTypeGUID\":\"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\",\"initialProperties\":{\"class\":\"InstanceProperties\",\"instanceProperties\":{\"qualifiedName\":{\"class\":\"PrimitivePropertyValue\",\"primitiveDefCategory\":\"OM_PRIMITIVE_TYPE_STRING\",\"primitiveValue\":\"Test Term 1\"}}}}' \\ \"https://localhost:9443/servers/crux/open-metadata/repository-services/users/admin/instances/entity\" Explanation of the payload 1 2 3 4 5 6 7 8 9 10 11 12 13 14 { \"class\" : \"EntityCreateRequest\" , \"entityTypeGUID\" : \"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\" , \"initialProperties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } } } } This payload defines the details of the entity that should be created: its type (by GUID) and any initial properties that should be set on it when it is created. Response from creating a new GlossaryTerm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 { \"class\" : \"EntityDetailResponse\" , \"relatedHTTPCode\" : 200 , \"entity\" : { \"class\" : \"EntityDetail\" , \"headerVersion\" : 1 , \"type\" : { \"class\" : \"InstanceType\" , \"typeDefCategory\" : \"ENTITY_DEF\" , \"typeDefGUID\" : \"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\" , \"typeDefName\" : \"GlossaryTerm\" , \"typeDefVersion\" : 1 , \"typeDefDescription\" : \"A semantic description of something, such as a concept, object, asset, technology, role or group.\" , \"typeDefSuperTypes\" : [ { \"headerVersion\" : 1 , \"guid\" : \"a32316b8-dc8c-48c5-b12b-71c1b2a080bf\" , \"name\" : \"Referenceable\" , \"status\" : \"ACTIVE_TYPEDEF\" }, { \"headerVersion\" : 1 , \"guid\" : \"4e7761e8-3969-4627-8f40-bfe3cde85a1d\" , \"name\" : \"OpenMetadataRoot\" , \"status\" : \"ACTIVE_TYPEDEF\" } ], \"validInstanceProperties\" : [ \"qualifiedName\" , \"additionalProperties\" , \"displayName\" , \"summary\" , \"description\" , \"examples\" , \"abbreviation\" , \"usage\" ] }, \"instanceProvenanceType\" : \"LOCAL_COHORT\" , \"metadataCollectionId\" : \"3c38c245-bc50-4796-b195-4d9f1d8c5d22\" , \"metadataCollectionName\" : \"crux\" , \"createdBy\" : \"admin\" , \"createTime\" : \"2021-03-03T10:19:35.138+00:00\" , \"version\" : 1 , \"guid\" : \"050d91e7-8b2f-465e-83ef-7355a5047cc6\" , \"properties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } }, \"propertyNames\" : [ \"qualifiedName\" ], \"propertyCount\" : 1 }, \"status\" : \"ACTIVE\" } } Note the GUID and creation time from the response (will be needed in subsequent steps). Update that entity \u00b6 Now update that same entity. This will create a new version of the entity while setting a new displayName property on the term set to the same value as the qualifiedName property. Remember to replace the GUID of the instance in the URL if copy / pasting. curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"class\":\"InstancePropertiesRequest\",\"instanceProperties\":{\"class\":\"InstanceProperties\",\"instanceProperties\":{\"qualifiedName\":{\"class\":\"PrimitivePropertyValue\",\"primitiveDefCategory\":\"OM_PRIMITIVE_TYPE_STRING\",\"primitiveValue\":\"Test Term 1\"},\"displayName\":{\"class\":\"PrimitivePropertyValue\",\"primitiveDefCategory\":\"OM_PRIMITIVE_TYPE_STRING\",\"primitiveValue\":\"Test Term 1\"}}}}' \\ \"https://localhost:9443/servers/crux/open-metadata/repository-services/users/admin/instances/entity/050d91e7-8b2f-465e-83ef-7355a5047cc6/properties\" Explanation of the payload { \"class\" : \"InstancePropertiesRequest\" , \"instanceProperties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" }, \"displayName\" : { \"class\" : \"PrimitivePropertyValue\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } } } } Note that for an update, we specify the instance that is being updated as part of the URL itself. So unlike the create request, this payload does not contain details about either the instance GUID or its type (those are inherent in the existing instance itself). Instead, we only need to specify the properties that we want to set as part of this update operation. Response from updating the GlossaryTerm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 { \"class\" : \"EntityDetailResponse\" , \"relatedHTTPCode\" : 200 , \"entity\" : { \"class\" : \"EntityDetail\" , \"headerVersion\" : 1 , \"type\" : { \"class\" : \"InstanceType\" , \"typeDefCategory\" : \"ENTITY_DEF\" , \"typeDefGUID\" : \"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\" , \"typeDefName\" : \"GlossaryTerm\" , \"typeDefVersion\" : 1 , \"typeDefDescription\" : \"A semantic description of something, such as a concept, object, asset, technology, role or group.\" , \"typeDefSuperTypes\" : [ { \"headerVersion\" : 1 , \"guid\" : \"a32316b8-dc8c-48c5-b12b-71c1b2a080bf\" , \"name\" : \"Referenceable\" , \"status\" : \"ACTIVE_TYPEDEF\" }, { \"headerVersion\" : 1 , \"guid\" : \"4e7761e8-3969-4627-8f40-bfe3cde85a1d\" , \"name\" : \"OpenMetadataRoot\" , \"status\" : \"ACTIVE_TYPEDEF\" } ], \"validInstanceProperties\" : [ \"qualifiedName\" , \"additionalProperties\" , \"displayName\" , \"summary\" , \"description\" , \"examples\" , \"abbreviation\" , \"usage\" ] }, \"instanceProvenanceType\" : \"LOCAL_COHORT\" , \"metadataCollectionId\" : \"3c38c245-bc50-4796-b195-4d9f1d8c5d22\" , \"metadataCollectionName\" : \"crux\" , \"createdBy\" : \"admin\" , \"updatedBy\" : \"admin\" , \"maintainedBy\" : [ \"admin\" ], \"createTime\" : \"2021-03-03T10:19:35.138+00:00\" , \"updateTime\" : \"2021-03-03T10:37:36.044+00:00\" , \"version\" : 2 , \"guid\" : \"050d91e7-8b2f-465e-83ef-7355a5047cc6\" , \"properties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" }, \"displayName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } }, \"propertyNames\" : [ \"qualifiedName\" , \"displayName\" ], \"propertyCount\" : 2 }, \"status\" : \"ACTIVE\" } } Note the update time from the response, and that we are now at version 2 of the entity. Retrieve that entity \u00b6 ... its current version \u00b6 Now retrieve the current version of the entity. Remember to replace the GUID of the instance in the URL if copy / pasting. curl -k \"https://localhost:9443/servers/crux/open-metadata/repository-services/users/admin/instances/entity/050d91e7-8b2f-465e-83ef-7355a5047cc6\" Response containing the current GlossaryTerm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 { \"class\" : \"EntityDetailResponse\" , \"relatedHTTPCode\" : 200 , \"entity\" : { \"class\" : \"EntityDetail\" , \"headerVersion\" : 1 , \"type\" : { \"class\" : \"InstanceType\" , \"typeDefCategory\" : \"ENTITY_DEF\" , \"typeDefGUID\" : \"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\" , \"typeDefName\" : \"GlossaryTerm\" , \"typeDefVersion\" : 1 , \"typeDefDescription\" : \"A semantic description of something, such as a concept, object, asset, technology, role or group.\" , \"typeDefSuperTypes\" : [ { \"headerVersion\" : 1 , \"guid\" : \"a32316b8-dc8c-48c5-b12b-71c1b2a080bf\" , \"name\" : \"Referenceable\" , \"status\" : \"ACTIVE_TYPEDEF\" }, { \"headerVersion\" : 1 , \"guid\" : \"4e7761e8-3969-4627-8f40-bfe3cde85a1d\" , \"name\" : \"OpenMetadataRoot\" , \"status\" : \"ACTIVE_TYPEDEF\" } ], \"validInstanceProperties\" : [ \"qualifiedName\" , \"additionalProperties\" , \"displayName\" , \"summary\" , \"description\" , \"examples\" , \"abbreviation\" , \"usage\" ] }, \"instanceProvenanceType\" : \"LOCAL_COHORT\" , \"metadataCollectionId\" : \"3c38c245-bc50-4796-b195-4d9f1d8c5d22\" , \"metadataCollectionName\" : \"crux\" , \"createdBy\" : \"admin\" , \"updatedBy\" : \"admin\" , \"maintainedBy\" : [ \"admin\" ], \"createTime\" : \"2021-03-03T10:19:35.138+00:00\" , \"updateTime\" : \"2021-03-03T10:37:36.044+00:00\" , \"version\" : 2 , \"guid\" : \"050d91e7-8b2f-465e-83ef-7355a5047cc6\" , \"properties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"displayName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" }, \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } }, \"propertyNames\" : [ \"displayName\" , \"qualifiedName\" ], \"propertyCount\" : 2 }, \"status\" : \"ACTIVE\" } } Note that the response contains version 2 of the entity, where the displayName property is defined and populated. ... its initial version \u00b6 Now let us retrieve a historical version, using a time between the creation and the update. Remember to replace the GUID in the URL, and the timestamp in the payload curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"class\":\"HistoryRequest\",\"asOfTime\":\"2021-03-03T10:25:00.000+00:00\"}' \\ \"https://localhost:9443/servers/crux/open-metadata/repository-services/users/admin/instances/entity/050d91e7-8b2f-465e-83ef-7355a5047cc6/history\" Response containing the original GlossaryTerm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 { \"class\" : \"EntityDetailResponse\" , \"relatedHTTPCode\" : 200 , \"entity\" : { \"class\" : \"EntityDetail\" , \"headerVersion\" : 1 , \"type\" : { \"class\" : \"InstanceType\" , \"typeDefCategory\" : \"ENTITY_DEF\" , \"typeDefGUID\" : \"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\" , \"typeDefName\" : \"GlossaryTerm\" , \"typeDefVersion\" : 1 , \"typeDefDescription\" : \"A semantic description of something, such as a concept, object, asset, technology, role or group.\" , \"typeDefSuperTypes\" : [ { \"headerVersion\" : 1 , \"guid\" : \"a32316b8-dc8c-48c5-b12b-71c1b2a080bf\" , \"name\" : \"Referenceable\" , \"status\" : \"ACTIVE_TYPEDEF\" }, { \"headerVersion\" : 1 , \"guid\" : \"4e7761e8-3969-4627-8f40-bfe3cde85a1d\" , \"name\" : \"OpenMetadataRoot\" , \"status\" : \"ACTIVE_TYPEDEF\" } ], \"validInstanceProperties\" : [ \"qualifiedName\" , \"additionalProperties\" , \"displayName\" , \"summary\" , \"description\" , \"examples\" , \"abbreviation\" , \"usage\" ] }, \"instanceProvenanceType\" : \"LOCAL_COHORT\" , \"metadataCollectionId\" : \"3c38c245-bc50-4796-b195-4d9f1d8c5d22\" , \"metadataCollectionName\" : \"crux\" , \"createdBy\" : \"admin\" , \"createTime\" : \"2021-03-03T10:19:35.138+00:00\" , \"version\" : 1 , \"guid\" : \"050d91e7-8b2f-465e-83ef-7355a5047cc6\" , \"properties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } }, \"propertyNames\" : [ \"qualifiedName\" ], \"propertyCount\" : 1 }, \"status\" : \"ACTIVE\" } } Now we receive version 1 in the repsonse, without the displayName , since that was the version that existed at the specified time. ... prior to its creation \u00b6 Now let us try to retrieve a version of the entity before it even existed. Remember to replace the GUID in the URL, and the timestamp in the payload curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"class\":\"HistoryRequest\",\"asOfTime\":\"2021-03-03T10:18:00.000+00:00\"}' \\ \"https://localhost:9443/servers/crux/open-metadata/repository-services/users/admin/instances/entity/050d91e7-8b2f-465e-83ef-7355a5047cc6/history\" Response indicating the entity does not exist 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 { \"class\" : \"EntityDetailResponse\" , \"relatedHTTPCode\" : 404 , \"actionDescription\" : \"getEntityDetail\" , \"exceptionClassName\" : \"org.odpi.openmetadata.repositoryservices.ffdc.exception.EntityNotKnownException\" , \"exceptionErrorMessage\" : \"OMRS-REPOSITORY-404-002 The entity identified with guid 050d91e7-8b2f-465e-83ef-7355a5047cc6 passed on the getEntityDetail call is not known to the open metadata repository crux\" , \"exceptionErrorMessageId\" : \"OMRS-REPOSITORY-404-002\" , \"exceptionErrorMessageParameters\" : [ \"050d91e7-8b2f-465e-83ef-7355a5047cc6\" , \"getEntityDetail\" , \"crux\" ], \"exceptionSystemAction\" : \"The system is unable to retrieve the properties for the requested entity because the supplied guid is not recognized.\" , \"exceptionUserAction\" : \"The guid is supplied by the caller to the server. It may have a logic problem that has corrupted the guid, or the entity has been deleted since the guid was retrieved.\" } Now we see that the entity cannot be found, because at this point in time the entity did not yet exist. Summary \u00b6 In conclusion, with the Crux plugin repository we now have the ability to both store and retrieve historical metadata. We have illustrated the simple case of retrieval by ID, but the same works for all metadata access: searching, retrieving relationships through the graph queries, etc. This is all easily accomplished through Crux's native support for temporal queries: the underlying API to the Crux storage layer is as simple as passing a date (for a view of that point-in-time) or not passing a date (for the current view). The \"view\" itself applies against the entire database: so everything we retrieve from that point-in-time is referentially-intact per that point-in-time.","title":"Explore"},{"location":"getting-started/explore/#explore","text":"Once a connector instance is up and running, you should now be able to start interacting with the repository. Without any additional dependencies, this is most easily illustrated using direct REST API interactions with the server chassis's repository services.","title":"Explore"},{"location":"getting-started/explore/#create-a-new-entity","text":"Create a new GlossaryTerm : curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"class\":\"EntityCreateRequest\",\"entityTypeGUID\":\"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\",\"initialProperties\":{\"class\":\"InstanceProperties\",\"instanceProperties\":{\"qualifiedName\":{\"class\":\"PrimitivePropertyValue\",\"primitiveDefCategory\":\"OM_PRIMITIVE_TYPE_STRING\",\"primitiveValue\":\"Test Term 1\"}}}}' \\ \"https://localhost:9443/servers/crux/open-metadata/repository-services/users/admin/instances/entity\" Explanation of the payload 1 2 3 4 5 6 7 8 9 10 11 12 13 14 { \"class\" : \"EntityCreateRequest\" , \"entityTypeGUID\" : \"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\" , \"initialProperties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } } } } This payload defines the details of the entity that should be created: its type (by GUID) and any initial properties that should be set on it when it is created. Response from creating a new GlossaryTerm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 { \"class\" : \"EntityDetailResponse\" , \"relatedHTTPCode\" : 200 , \"entity\" : { \"class\" : \"EntityDetail\" , \"headerVersion\" : 1 , \"type\" : { \"class\" : \"InstanceType\" , \"typeDefCategory\" : \"ENTITY_DEF\" , \"typeDefGUID\" : \"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\" , \"typeDefName\" : \"GlossaryTerm\" , \"typeDefVersion\" : 1 , \"typeDefDescription\" : \"A semantic description of something, such as a concept, object, asset, technology, role or group.\" , \"typeDefSuperTypes\" : [ { \"headerVersion\" : 1 , \"guid\" : \"a32316b8-dc8c-48c5-b12b-71c1b2a080bf\" , \"name\" : \"Referenceable\" , \"status\" : \"ACTIVE_TYPEDEF\" }, { \"headerVersion\" : 1 , \"guid\" : \"4e7761e8-3969-4627-8f40-bfe3cde85a1d\" , \"name\" : \"OpenMetadataRoot\" , \"status\" : \"ACTIVE_TYPEDEF\" } ], \"validInstanceProperties\" : [ \"qualifiedName\" , \"additionalProperties\" , \"displayName\" , \"summary\" , \"description\" , \"examples\" , \"abbreviation\" , \"usage\" ] }, \"instanceProvenanceType\" : \"LOCAL_COHORT\" , \"metadataCollectionId\" : \"3c38c245-bc50-4796-b195-4d9f1d8c5d22\" , \"metadataCollectionName\" : \"crux\" , \"createdBy\" : \"admin\" , \"createTime\" : \"2021-03-03T10:19:35.138+00:00\" , \"version\" : 1 , \"guid\" : \"050d91e7-8b2f-465e-83ef-7355a5047cc6\" , \"properties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } }, \"propertyNames\" : [ \"qualifiedName\" ], \"propertyCount\" : 1 }, \"status\" : \"ACTIVE\" } } Note the GUID and creation time from the response (will be needed in subsequent steps).","title":"Create a new entity"},{"location":"getting-started/explore/#update-that-entity","text":"Now update that same entity. This will create a new version of the entity while setting a new displayName property on the term set to the same value as the qualifiedName property. Remember to replace the GUID of the instance in the URL if copy / pasting. curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"class\":\"InstancePropertiesRequest\",\"instanceProperties\":{\"class\":\"InstanceProperties\",\"instanceProperties\":{\"qualifiedName\":{\"class\":\"PrimitivePropertyValue\",\"primitiveDefCategory\":\"OM_PRIMITIVE_TYPE_STRING\",\"primitiveValue\":\"Test Term 1\"},\"displayName\":{\"class\":\"PrimitivePropertyValue\",\"primitiveDefCategory\":\"OM_PRIMITIVE_TYPE_STRING\",\"primitiveValue\":\"Test Term 1\"}}}}' \\ \"https://localhost:9443/servers/crux/open-metadata/repository-services/users/admin/instances/entity/050d91e7-8b2f-465e-83ef-7355a5047cc6/properties\" Explanation of the payload { \"class\" : \"InstancePropertiesRequest\" , \"instanceProperties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" }, \"displayName\" : { \"class\" : \"PrimitivePropertyValue\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } } } } Note that for an update, we specify the instance that is being updated as part of the URL itself. So unlike the create request, this payload does not contain details about either the instance GUID or its type (those are inherent in the existing instance itself). Instead, we only need to specify the properties that we want to set as part of this update operation. Response from updating the GlossaryTerm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 { \"class\" : \"EntityDetailResponse\" , \"relatedHTTPCode\" : 200 , \"entity\" : { \"class\" : \"EntityDetail\" , \"headerVersion\" : 1 , \"type\" : { \"class\" : \"InstanceType\" , \"typeDefCategory\" : \"ENTITY_DEF\" , \"typeDefGUID\" : \"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\" , \"typeDefName\" : \"GlossaryTerm\" , \"typeDefVersion\" : 1 , \"typeDefDescription\" : \"A semantic description of something, such as a concept, object, asset, technology, role or group.\" , \"typeDefSuperTypes\" : [ { \"headerVersion\" : 1 , \"guid\" : \"a32316b8-dc8c-48c5-b12b-71c1b2a080bf\" , \"name\" : \"Referenceable\" , \"status\" : \"ACTIVE_TYPEDEF\" }, { \"headerVersion\" : 1 , \"guid\" : \"4e7761e8-3969-4627-8f40-bfe3cde85a1d\" , \"name\" : \"OpenMetadataRoot\" , \"status\" : \"ACTIVE_TYPEDEF\" } ], \"validInstanceProperties\" : [ \"qualifiedName\" , \"additionalProperties\" , \"displayName\" , \"summary\" , \"description\" , \"examples\" , \"abbreviation\" , \"usage\" ] }, \"instanceProvenanceType\" : \"LOCAL_COHORT\" , \"metadataCollectionId\" : \"3c38c245-bc50-4796-b195-4d9f1d8c5d22\" , \"metadataCollectionName\" : \"crux\" , \"createdBy\" : \"admin\" , \"updatedBy\" : \"admin\" , \"maintainedBy\" : [ \"admin\" ], \"createTime\" : \"2021-03-03T10:19:35.138+00:00\" , \"updateTime\" : \"2021-03-03T10:37:36.044+00:00\" , \"version\" : 2 , \"guid\" : \"050d91e7-8b2f-465e-83ef-7355a5047cc6\" , \"properties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" }, \"displayName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } }, \"propertyNames\" : [ \"qualifiedName\" , \"displayName\" ], \"propertyCount\" : 2 }, \"status\" : \"ACTIVE\" } } Note the update time from the response, and that we are now at version 2 of the entity.","title":"Update that entity"},{"location":"getting-started/explore/#retrieve-that-entity","text":"","title":"Retrieve that entity"},{"location":"getting-started/explore/#its-current-version","text":"Now retrieve the current version of the entity. Remember to replace the GUID of the instance in the URL if copy / pasting. curl -k \"https://localhost:9443/servers/crux/open-metadata/repository-services/users/admin/instances/entity/050d91e7-8b2f-465e-83ef-7355a5047cc6\" Response containing the current GlossaryTerm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 { \"class\" : \"EntityDetailResponse\" , \"relatedHTTPCode\" : 200 , \"entity\" : { \"class\" : \"EntityDetail\" , \"headerVersion\" : 1 , \"type\" : { \"class\" : \"InstanceType\" , \"typeDefCategory\" : \"ENTITY_DEF\" , \"typeDefGUID\" : \"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\" , \"typeDefName\" : \"GlossaryTerm\" , \"typeDefVersion\" : 1 , \"typeDefDescription\" : \"A semantic description of something, such as a concept, object, asset, technology, role or group.\" , \"typeDefSuperTypes\" : [ { \"headerVersion\" : 1 , \"guid\" : \"a32316b8-dc8c-48c5-b12b-71c1b2a080bf\" , \"name\" : \"Referenceable\" , \"status\" : \"ACTIVE_TYPEDEF\" }, { \"headerVersion\" : 1 , \"guid\" : \"4e7761e8-3969-4627-8f40-bfe3cde85a1d\" , \"name\" : \"OpenMetadataRoot\" , \"status\" : \"ACTIVE_TYPEDEF\" } ], \"validInstanceProperties\" : [ \"qualifiedName\" , \"additionalProperties\" , \"displayName\" , \"summary\" , \"description\" , \"examples\" , \"abbreviation\" , \"usage\" ] }, \"instanceProvenanceType\" : \"LOCAL_COHORT\" , \"metadataCollectionId\" : \"3c38c245-bc50-4796-b195-4d9f1d8c5d22\" , \"metadataCollectionName\" : \"crux\" , \"createdBy\" : \"admin\" , \"updatedBy\" : \"admin\" , \"maintainedBy\" : [ \"admin\" ], \"createTime\" : \"2021-03-03T10:19:35.138+00:00\" , \"updateTime\" : \"2021-03-03T10:37:36.044+00:00\" , \"version\" : 2 , \"guid\" : \"050d91e7-8b2f-465e-83ef-7355a5047cc6\" , \"properties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"displayName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" }, \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } }, \"propertyNames\" : [ \"displayName\" , \"qualifiedName\" ], \"propertyCount\" : 2 }, \"status\" : \"ACTIVE\" } } Note that the response contains version 2 of the entity, where the displayName property is defined and populated.","title":"... its current version"},{"location":"getting-started/explore/#its-initial-version","text":"Now let us retrieve a historical version, using a time between the creation and the update. Remember to replace the GUID in the URL, and the timestamp in the payload curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"class\":\"HistoryRequest\",\"asOfTime\":\"2021-03-03T10:25:00.000+00:00\"}' \\ \"https://localhost:9443/servers/crux/open-metadata/repository-services/users/admin/instances/entity/050d91e7-8b2f-465e-83ef-7355a5047cc6/history\" Response containing the original GlossaryTerm 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 { \"class\" : \"EntityDetailResponse\" , \"relatedHTTPCode\" : 200 , \"entity\" : { \"class\" : \"EntityDetail\" , \"headerVersion\" : 1 , \"type\" : { \"class\" : \"InstanceType\" , \"typeDefCategory\" : \"ENTITY_DEF\" , \"typeDefGUID\" : \"0db3e6ec-f5ef-4d75-ae38-b7ee6fd6ec0a\" , \"typeDefName\" : \"GlossaryTerm\" , \"typeDefVersion\" : 1 , \"typeDefDescription\" : \"A semantic description of something, such as a concept, object, asset, technology, role or group.\" , \"typeDefSuperTypes\" : [ { \"headerVersion\" : 1 , \"guid\" : \"a32316b8-dc8c-48c5-b12b-71c1b2a080bf\" , \"name\" : \"Referenceable\" , \"status\" : \"ACTIVE_TYPEDEF\" }, { \"headerVersion\" : 1 , \"guid\" : \"4e7761e8-3969-4627-8f40-bfe3cde85a1d\" , \"name\" : \"OpenMetadataRoot\" , \"status\" : \"ACTIVE_TYPEDEF\" } ], \"validInstanceProperties\" : [ \"qualifiedName\" , \"additionalProperties\" , \"displayName\" , \"summary\" , \"description\" , \"examples\" , \"abbreviation\" , \"usage\" ] }, \"instanceProvenanceType\" : \"LOCAL_COHORT\" , \"metadataCollectionId\" : \"3c38c245-bc50-4796-b195-4d9f1d8c5d22\" , \"metadataCollectionName\" : \"crux\" , \"createdBy\" : \"admin\" , \"createTime\" : \"2021-03-03T10:19:35.138+00:00\" , \"version\" : 1 , \"guid\" : \"050d91e7-8b2f-465e-83ef-7355a5047cc6\" , \"properties\" : { \"class\" : \"InstanceProperties\" , \"instanceProperties\" : { \"qualifiedName\" : { \"class\" : \"PrimitivePropertyValue\" , \"instancePropertyCategory\" : \"PRIMITIVE\" , \"primitiveDefCategory\" : \"OM_PRIMITIVE_TYPE_STRING\" , \"primitiveValue\" : \"Test Term 1\" } }, \"propertyNames\" : [ \"qualifiedName\" ], \"propertyCount\" : 1 }, \"status\" : \"ACTIVE\" } } Now we receive version 1 in the repsonse, without the displayName , since that was the version that existed at the specified time.","title":"... its initial version"},{"location":"getting-started/explore/#prior-to-its-creation","text":"Now let us try to retrieve a version of the entity before it even existed. Remember to replace the GUID in the URL, and the timestamp in the payload curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"class\":\"HistoryRequest\",\"asOfTime\":\"2021-03-03T10:18:00.000+00:00\"}' \\ \"https://localhost:9443/servers/crux/open-metadata/repository-services/users/admin/instances/entity/050d91e7-8b2f-465e-83ef-7355a5047cc6/history\" Response indicating the entity does not exist 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 { \"class\" : \"EntityDetailResponse\" , \"relatedHTTPCode\" : 404 , \"actionDescription\" : \"getEntityDetail\" , \"exceptionClassName\" : \"org.odpi.openmetadata.repositoryservices.ffdc.exception.EntityNotKnownException\" , \"exceptionErrorMessage\" : \"OMRS-REPOSITORY-404-002 The entity identified with guid 050d91e7-8b2f-465e-83ef-7355a5047cc6 passed on the getEntityDetail call is not known to the open metadata repository crux\" , \"exceptionErrorMessageId\" : \"OMRS-REPOSITORY-404-002\" , \"exceptionErrorMessageParameters\" : [ \"050d91e7-8b2f-465e-83ef-7355a5047cc6\" , \"getEntityDetail\" , \"crux\" ], \"exceptionSystemAction\" : \"The system is unable to retrieve the properties for the requested entity because the supplied guid is not recognized.\" , \"exceptionUserAction\" : \"The guid is supplied by the caller to the server. It may have a logic problem that has corrupted the guid, or the entity has been deleted since the guid was retrieved.\" } Now we see that the entity cannot be found, because at this point in time the entity did not yet exist.","title":"... prior to its creation"},{"location":"getting-started/explore/#summary","text":"In conclusion, with the Crux plugin repository we now have the ability to both store and retrieve historical metadata. We have illustrated the simple case of retrieval by ID, but the same works for all metadata access: searching, retrieving relationships through the graph queries, etc. This is all easily accomplished through Crux's native support for temporal queries: the underlying API to the Crux storage layer is as simple as passing a date (for a view of that point-in-time) or not passing a date (for the current view). The \"view\" itself applies against the entire database: so everything we retrieve from that point-in-time is referentially-intact per that point-in-time.","title":"Summary"},{"location":"getting-started/setup/","text":"Setup \u00b6 1. Obtain connector \u00b6 Start by downloading the Crux repository connector: Latest release Latest snapshot The connector is: egeria-connector-crux-{version}-jar-with-dependencies.jar 2. Obtain server chassis \u00b6 Download Egeria's server chassis: Latest release Latest snapshot The connector version indicates the minimum required Egeria version The server chassis is: server-chassis-spring-{version}.jar 3. Configure security \u00b6 To get an initial environment up-and-running just download the truststore.p12 file from: https://github.com/odpi/egeria/raw/master/truststore.p12 . Transport-level security The truststore.p12 file provides a local truststore for Java. This allows the self-signed certificate embedded within the server chassis (by default) to be trusted. Without this trust, interactions with the server chassis (such as the REST calls that are made through Java to handle interaction between the chassis and the connector) will result in an SSLHandshakeException . While this truststore.p12 file allows SSL-encrypted communication, the fact that it relies on a self-signed certificate means that there is no independent source of trust in the interactions (which would typically be achieved through an independent Certificate Authority). Additional details on TLS for Egeria can be found in the Egeria documentation . 4. Start the server chassis \u00b6 Ensure the 3 files are in the same directory, and run: java -Dloader.path = . -jar server-chassis-spring-*.jar Explanation of the command The -Dloader.path=. indicates that the server chassis should look for any connectors in the current directory. If you wanted to instead place the connector in a separate location (for example /lib ), you could change the . to point to that other location ( -Dloader.path=/lib ). Output for server chassis startup ODPi Egeria ____ __ ___ ___ ______ _____ ____ _ _ ___ / __ \\ / |/ // | / ____/ / ___/ ___ ____ _ __ ___ ____ / _ \\ / / __ / / / _ /__ ____ _ _ / / / // /|_/ // /| | / / __ \\__ \\ / _ \\ / __/| | / // _ \\ / __/ / /_/ // // | / _\\ / /_ / | / _// || | / /_/ // / / // ___ |/ /_/ / ___/ // __// / | |/ // __// / / __ // // / \\ / /_ / _// / // / / / / / \\____//_/ /_//_/ |_|\\____/ /____/ \\___//_/ |___/ \\___//_/ /_/ /_/ \\__/\\//___//_/ \\__//_/ /_/ /_/ :: Powered by Spring Boot (v2.3.3.RELEASE) :: 2021-02-12 20:16:37.243 INFO 53787 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 9443 (https) 2021-02-12 20:16:49.162 INFO 53787 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 9443 (https) with context path '' Fri Feb 12 20:16:40 GMT 2021 No OMAG servers listed in startup configuration Fri Feb 12 20:16:49 GMT 2021 OMAG server platform ready for more configuration Wait for these two final lines of output to appear before proceeding {timestamp} No OMAG servers listed in startup configuration {timestamp} OMAG server platform ready for more configuration These final two lines of output indicate that the server chassis has completed starting up and is now ready to be configured. Any attempt to configure the server chassis before these lines are output is likely to result in failures. 5. Configure the connector \u00b6 a. Configure the event bus \u00b6 curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"producer\":{\"bootstrap.servers\":\"localhost:9092\"},\"consumer\":{\"bootstrap.servers\":\"localhost:9092\"}}' \\ \"https://localhost:9443/open-metadata/admin-services/users/admin/servers/crux/event-bus?connectorProvider=org.odpi.openmetadata.adapters.eventbus.topic.kafka.KafkaOpenMetadataTopicProvider\" Detailed explanation The event bus is how Egeria coordinates communication amongst its various servers and repositories: for example, ensuring that any new type definitions are registered with each repository capable of handling them, notifying other repositories when the metadata in one repository changes, etc. The URL parameter connectorProvider defines the type of event bus to use (in this case Apache Kafka). The JSON payload gives details about how to connect to Apache Kafka, in this case assuming it is running on local machine ( localhost ) on its default port ( 9092 ). Response from event bus configuration { \"class\" : \"VoidResponse\" , \"relatedHTTPCode\" : 200 } b. Configure the cohort \u00b6 curl -k -X POST \\ \"https://localhost:9443/open-metadata/admin-services/users/admin/servers/crux/cohorts/mycohort\" Detailed explanation The cohort is a network of interacting metadata servers, which could be some subset of the overall Egeria landscape. We only need to supply a name for the cohort, which forms part of the URL itself: in this example using mycohort . Response from cohort configuration { \"class\" : \"VoidResponse\" , \"relatedHTTPCode\" : 200 } c. Configure Crux connector \u00b6 curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"class\":\"Connection\",\"connectorType\":{\"class\":\"ConnectorType\",\"connectorProviderClassName\":\"org.odpi.egeria.connectors.juxt.crux.repositoryconnector.CruxOMRSRepositoryConnectorProvider\"}}' \\ \"https://localhost:9443/open-metadata/admin-services/users/admin/servers/crux/local-repository/mode/plugin-repository/connection\" Detailed explanation This final call to the API configures the behavior of the Crux repository itself. The URL to which we post indicates that we will use the Egeria server chassis's built-in repository plugin capability to access the Crux repository connector. The JSON payload's contents define how this plugin itself should be configured: specifically, which Java class should be used for the repository connection. Here we can see the payload refers to the CruxOMRSRepositoryConnectorProvider , which therefore tells the plugin to use this class -- specific to the Crux repository connector -- in order to configure its repository connection. Response from connector configuration { \"class\" : \"VoidResponse\" , \"relatedHTTPCode\" : 200 } The default configuration is for an in-memory (non-persistent) repository The default configuration used in this example will startup the Crux repository in a completely embedded, in-memory-only mode. No data will be persisted, so if you stop or restart the server chassis all data will be lost. While this is actually beneficial for quick experimentation and testing purposes, it is naturally not desirable for a \"real\" repository: you'd want your metadata to stick around even when the server goes offline. Additional options for configuring Crux , including with persistence, can be found at the end of this page. 6. Start the connector instance \u00b6 curl -k -X POST \"https://localhost:9443/open-metadata/admin-services/users/admin/servers/crux/instance\" Detailed explanation Up to this point we have only configured the connector, but have not actually started it. This final API call tells Egeria to start the connector, based on the configuration the previous API calls defined. Response from connector instance startup { \"class\" : \"SuccessMessageResponse\" , \"relatedHTTPCode\" : 200 , \"successMessage\" : \"Fri Feb 12 20:34:16 GMT 2021 crux is running the following services: [Open Metadata Repository Services (OMRS)]\" } It may take 10-15 seconds to complete, but the example response above indicates that the connector instance is now running. Other startup information of potential interest Back in the console where the server chassis is running, you should see the audit log printing out a large amount of information as the startup is running. Most of this is related to the registration of type definition details with the repository. ODPi Egeria ____ __ ___ ___ ______ _____ ____ _ _ ___ / __ \\ / |/ // | / ____/ / ___/ ___ ____ _ __ ___ ____ / _ \\ / / __ / / / _ /__ ____ _ _ / / / // /|_/ // /| | / / __ \\__ \\ / _ \\ / __/| | / // _ \\ / __/ / /_/ // // | / _\\ / /_ / | / _// || | / /_/ // / / // ___ |/ /_/ / ___/ // __// / | |/ // __// / / __ // // / \\ / /_ / _// / // / / / / / \\____//_/ /_//_/ |_|\\____/ /____/ \\___//_/ |___/ \\___//_/ /_/ /_/ \\__/\\//___//_/ \\__//_/ /_/ /_/ :: Powered by Spring Boot (v2.3.3.RELEASE) :: 2021-02-12 20:27:40.812 INFO 61953 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 9443 (https) 2021-02-12 20:27:48.963 INFO 61953 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 9443 (https) with context path '' Fri Feb 12 20:27:42 GMT 2021 No OMAG servers listed in startup configuration Fri Feb 12 20:27:49 GMT 2021 OMAG server platform ready for more configuration Fri Feb 12 20:34:04 GMT 2021 crux Startup OMRS-AUDIT-0064 The Open Metadata Repository Services (OMRS) has initialized the audit log for the Metadata Server called crux Fri Feb 12 20:34:04 GMT 2021 crux Startup OMAG-ADMIN-0001 The crux server is configured with a max page size of 1000 Fri Feb 12 20:34:04 GMT 2021 crux Startup OMRS-AUDIT-0001 The Open Metadata Repository Services (OMRS) is initializing the subsystems to support a new server Fri Feb 12 20:34:04 GMT 2021 crux Startup OMRS-AUDIT-0003 The local repository is initializing the metadata collection named crux with an id of aa1f9067-7bba-4f65-ac0d-bd64e7ac7e6e Fri Feb 12 20:34:04 GMT 2021 crux Startup OMRS-AUDIT-0029 The local repository outbound event manager is initializing Fri Feb 12 20:34:04 GMT 2021 crux Information OMRS-CRUX-REPOSITORY-0001 The Crux repository is starting a new server instance Fri Feb 12 20:34:04 GMT 2021 crux Information OMRS-CRUX-REPOSITORY-0003 The Crux repository is starting a new in-memory instance Fri Feb 12 20:34:14 GMT 2021 crux Information OMRS-CRUX-REPOSITORY-0004 The Crux repository has started a new instance for server crux, detected Crux version 21.02-1.15.0-beta Fri Feb 12 20:34:14 GMT 2021 crux Information OMRS-AUDIT-0050 The Open Metadata Repository Services (OMRS) is about to process open metadata archive Open Metadata Types Fri Feb 12 20:34:14 GMT 2021 crux Types OMRS-AUDIT-0301 The local server has added a new type called object with a unique identifier of 1c4b21f4-0b67-41a7-a6ed-2af185eb9b3b and a version number of 1 from ODPi Egeria (2.6) ... Fri Feb 12 20:34:14 GMT 2021 crux Types OMRS-AUDIT-0303 The local server has updated an existing type called SupportedDiscoveryService with a unique identifier of dff45aeb-c65e-428c-9ab3-d756bc5d8dbb to version number of 3 using a patch from ODPi Egeria (2.6) Fri Feb 12 20:34:14 GMT 2021 crux Information OMRS-AUDIT-0053 The Open Metadata Repository Services (OMRS) has processed 698 types and 0 instances from open metadata archive Open Metadata Types Fri Feb 12 20:34:14 GMT 2021 crux Startup OMRS-AUDIT-0004 Connecting to the metadata highway Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0005 Connecting to open metadata repository cohort mycohort Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0029 The mycohort cohort inbound event manager is initializing Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0030 Registering the mycohort event consumer with the local repository outbound event manager Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0030 Registering the Local Repository Content (TypeDef) Manager event consumer with the mycohort cohort inbound event manager Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0030 Registering the Local Repository Inbound Instance Events event consumer with the mycohort cohort inbound event manager Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0031 The mycohort cohort inbound event manager is starting with 1 type definition event consumer(s) and 1 instance event consumer(s) Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0026 Initializing listener for cohort mycohort Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0019 An OMRS Topic Connector has registered with an event bus connector for topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic Fri Feb 12 20:34:15 GMT 2021 crux Startup OCF-KAFKA-TOPIC-CONNECTOR-0001 Connecting to Apache Kafka Topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic with a server identifier of 1e0c241c-d4d0-48b2-92c7-e4aa0115b15f Fri Feb 12 20:34:15 GMT 2021 crux Startup OCF-KAFKA-TOPIC-CONNECTOR-0015 The local server is attempting to connect to Kafka, attempt 1 Fri Feb 12 20:34:15 GMT 2021 crux Startup OCF-KAFKA-TOPIC-CONNECTOR-0003 10 properties passed to the Apache Kafka Consumer for topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic Fri Feb 12 20:34:15 GMT 2021 crux Startup OCF-KAFKA-TOPIC-CONNECTOR-0002 10 properties passed to the Apache Kafka Producer for topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic Fri Feb 12 20:34:15 GMT 2021 crux Startup OCF-KAFKA-TOPIC-CONNECTOR-0010 The Apache Kafka producer for topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic is starting up with 0 buffered messages Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0015 The listener thread for an OMRS Topic Connector for topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic has started Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0020 An OMRS Topic Connector is ready to send and receive events on topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic Fri Feb 12 20:34:15 GMT 2021 crux Cohort OMRS-AUDIT-0060 Registering with open metadata repository cohort mycohort using metadata collection id aa1f9067-7bba-4f65-ac0d-bd64e7ac7e6e Fri Feb 12 20:34:15 GMT 2021 crux Cohort OMRS-AUDIT-0062 Requesting registration information from other members of the open metadata repository cohort mycohort Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0031 The local repository outbound event manager is starting with 1 type definition event consumer(s) and 1 instance event consumer(s) Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0032 The local repository outbound event manager is sending out the 698 type definition events that were generated and buffered during server initialization Fri Feb 12 20:34:16 GMT 2021 crux Startup OMRS-AUDIT-0007 The Open Metadata Repository Services (OMRS) has initialized Fri Feb 12 20:34:16 GMT 2021 crux Startup OMAG-ADMIN-0004 The crux server has successfully completed start up. The following services are running: [Open Metadata Repository Services (OMRS)] This final line indicates that the server has now started up and completed its registration with the cohort. Options for configuring Crux \u00b6 Pluggable persistence \u00b6 There are many options for configuring Crux itself. A list of overall persistence modules and deeper configuration options for each can be found through Crux's own documentation . To enable persistence, send in the JSON document configuration outlined in Crux's own documentation directly to the cruxConfig key of the configurationProperties property of Egeria's connector configuration: Example persistent configuration 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 { \"class\" : \"Connection\" , \"connectorType\" : { \"class\" : \"ConnectorType\" , \"connectorProviderClassName\" : \"org.odpi.egeria.connectors.juxt.crux.repositoryconnector.CruxOMRSRepositoryConnectorProvider\" }, \"configurationProperties\" : { \"cruxConfig\" : { \"egeria.crux.lucene/lucene-store\" : { \"db-dir\" : \"data/servers/crux/lucene\" }, \"crux/index-store\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-index\" } }, \"crux/document-store\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-docs\" } }, \"crux/tx-log\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-tx\" } } } } } The one exception to simply using Crux's JSON configuration as-is are the lines 9-11 above: these configure a Lucene index built and maintained directly as part of the connector's code-base, and therefore in a separate namespace from Crux's own configuration. It is highly recommended to use this Lucene index as it offers significant performance improvements for any text-based queries. The remainder of the configuration in this example defines RocksDB to act as the persistence layer for Crux's index and document stores, as well as its transaction log. You may need to download additional dependencies Depending on the persistence you choose to use, you may need to download additional dependencies and place them into the same directory as the connector. For example, when using RocksDB you will need the following: pro.juxt.crux:crux-rocksdb org.rocksdb:rocksdbjni com.github.jnr:jnr-ffi You can generally determine the additional dependencies you will need by looking at the project.clj file of relevant Crux module -- specifically its :dependencies section. For example, sticking with RocksDB, here is the project.clj : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ( defproject pro.juxt.crux/crux-rocksdb \"crux-git-version\" :description \"Crux RocksDB\" :plugins [[ lein-parent \"0.3.8\" ]] :parent-project { :path \"../project.clj\" :inherit [ :repositories :deploy-repositories :managed-dependencies :pedantic? :global-vars :license :url :pom-addition ]} :scm { :dir \"..\" } :dependencies [[ org.clojure/clojure \"1.10.3\" ] [ pro.juxt.crux/crux-core \"crux-git-version\" ] [ pro.juxt.crux/crux-metrics \"crux-git-version\" :scope \"provided\" ] [ org.rocksdb/rocksdbjni \"6.12.7\" ] [ com.github.jnr/jnr-ffi \"2.1.12\" ]] :middleware [ leiningen.project-version/middleware ]) Note that its dependencies include org.rocksdb:rocksdbjni and com.github.jnr:jnr-ffi . The third dependency given in the previous slide is this Crux persistence module itself ( pro.juxt.crux:crux-rocksdb ). Connector options \u00b6 There are currently two configuration options for the connector itself: Option Description luceneRegexes Controls whether the connector will interpret unquoted regexes as Lucene-compatible (true) or not (false): in the latter case ensuring that we fallback to full Java regex checking (which will be significantly slower). syncIndex Controls whether the connector will wait for the Crux indexes to be updated before returning from write operations (true) or only that they are transactionally persisted (false). Example configuration showing the default settings { \"class\" : \"Connection\" , \"connectorType\" : { \"class\" : \"ConnectorType\" , \"connectorProviderClassName\" : \"org.odpi.egeria.connectors.juxt.crux.repositoryconnector.CruxOMRSRepositoryConnectorProvider\" }, \"configurationProperties\" : { \"cruxConfig\" : { }, \"luceneRegexes\" : true , \"syncIndex\" : true } }","title":"Setup"},{"location":"getting-started/setup/#setup","text":"","title":"Setup"},{"location":"getting-started/setup/#1-obtain-connector","text":"Start by downloading the Crux repository connector: Latest release Latest snapshot The connector is: egeria-connector-crux-{version}-jar-with-dependencies.jar","title":"1. Obtain connector"},{"location":"getting-started/setup/#2-obtain-server-chassis","text":"Download Egeria's server chassis: Latest release Latest snapshot The connector version indicates the minimum required Egeria version The server chassis is: server-chassis-spring-{version}.jar","title":"2. Obtain server chassis"},{"location":"getting-started/setup/#3-configure-security","text":"To get an initial environment up-and-running just download the truststore.p12 file from: https://github.com/odpi/egeria/raw/master/truststore.p12 . Transport-level security The truststore.p12 file provides a local truststore for Java. This allows the self-signed certificate embedded within the server chassis (by default) to be trusted. Without this trust, interactions with the server chassis (such as the REST calls that are made through Java to handle interaction between the chassis and the connector) will result in an SSLHandshakeException . While this truststore.p12 file allows SSL-encrypted communication, the fact that it relies on a self-signed certificate means that there is no independent source of trust in the interactions (which would typically be achieved through an independent Certificate Authority). Additional details on TLS for Egeria can be found in the Egeria documentation .","title":"3. Configure security"},{"location":"getting-started/setup/#4-start-the-server-chassis","text":"Ensure the 3 files are in the same directory, and run: java -Dloader.path = . -jar server-chassis-spring-*.jar Explanation of the command The -Dloader.path=. indicates that the server chassis should look for any connectors in the current directory. If you wanted to instead place the connector in a separate location (for example /lib ), you could change the . to point to that other location ( -Dloader.path=/lib ). Output for server chassis startup ODPi Egeria ____ __ ___ ___ ______ _____ ____ _ _ ___ / __ \\ / |/ // | / ____/ / ___/ ___ ____ _ __ ___ ____ / _ \\ / / __ / / / _ /__ ____ _ _ / / / // /|_/ // /| | / / __ \\__ \\ / _ \\ / __/| | / // _ \\ / __/ / /_/ // // | / _\\ / /_ / | / _// || | / /_/ // / / // ___ |/ /_/ / ___/ // __// / | |/ // __// / / __ // // / \\ / /_ / _// / // / / / / / \\____//_/ /_//_/ |_|\\____/ /____/ \\___//_/ |___/ \\___//_/ /_/ /_/ \\__/\\//___//_/ \\__//_/ /_/ /_/ :: Powered by Spring Boot (v2.3.3.RELEASE) :: 2021-02-12 20:16:37.243 INFO 53787 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 9443 (https) 2021-02-12 20:16:49.162 INFO 53787 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 9443 (https) with context path '' Fri Feb 12 20:16:40 GMT 2021 No OMAG servers listed in startup configuration Fri Feb 12 20:16:49 GMT 2021 OMAG server platform ready for more configuration Wait for these two final lines of output to appear before proceeding {timestamp} No OMAG servers listed in startup configuration {timestamp} OMAG server platform ready for more configuration These final two lines of output indicate that the server chassis has completed starting up and is now ready to be configured. Any attempt to configure the server chassis before these lines are output is likely to result in failures.","title":"4. Start the server chassis"},{"location":"getting-started/setup/#5-configure-the-connector","text":"","title":"5. Configure the connector"},{"location":"getting-started/setup/#a-configure-the-event-bus","text":"curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"producer\":{\"bootstrap.servers\":\"localhost:9092\"},\"consumer\":{\"bootstrap.servers\":\"localhost:9092\"}}' \\ \"https://localhost:9443/open-metadata/admin-services/users/admin/servers/crux/event-bus?connectorProvider=org.odpi.openmetadata.adapters.eventbus.topic.kafka.KafkaOpenMetadataTopicProvider\" Detailed explanation The event bus is how Egeria coordinates communication amongst its various servers and repositories: for example, ensuring that any new type definitions are registered with each repository capable of handling them, notifying other repositories when the metadata in one repository changes, etc. The URL parameter connectorProvider defines the type of event bus to use (in this case Apache Kafka). The JSON payload gives details about how to connect to Apache Kafka, in this case assuming it is running on local machine ( localhost ) on its default port ( 9092 ). Response from event bus configuration { \"class\" : \"VoidResponse\" , \"relatedHTTPCode\" : 200 }","title":"a. Configure the event bus"},{"location":"getting-started/setup/#b-configure-the-cohort","text":"curl -k -X POST \\ \"https://localhost:9443/open-metadata/admin-services/users/admin/servers/crux/cohorts/mycohort\" Detailed explanation The cohort is a network of interacting metadata servers, which could be some subset of the overall Egeria landscape. We only need to supply a name for the cohort, which forms part of the URL itself: in this example using mycohort . Response from cohort configuration { \"class\" : \"VoidResponse\" , \"relatedHTTPCode\" : 200 }","title":"b. Configure the cohort"},{"location":"getting-started/setup/#c-configure-crux-connector","text":"curl -k -X POST -H \"Content-Type: application/json\" \\ --data '{\"class\":\"Connection\",\"connectorType\":{\"class\":\"ConnectorType\",\"connectorProviderClassName\":\"org.odpi.egeria.connectors.juxt.crux.repositoryconnector.CruxOMRSRepositoryConnectorProvider\"}}' \\ \"https://localhost:9443/open-metadata/admin-services/users/admin/servers/crux/local-repository/mode/plugin-repository/connection\" Detailed explanation This final call to the API configures the behavior of the Crux repository itself. The URL to which we post indicates that we will use the Egeria server chassis's built-in repository plugin capability to access the Crux repository connector. The JSON payload's contents define how this plugin itself should be configured: specifically, which Java class should be used for the repository connection. Here we can see the payload refers to the CruxOMRSRepositoryConnectorProvider , which therefore tells the plugin to use this class -- specific to the Crux repository connector -- in order to configure its repository connection. Response from connector configuration { \"class\" : \"VoidResponse\" , \"relatedHTTPCode\" : 200 } The default configuration is for an in-memory (non-persistent) repository The default configuration used in this example will startup the Crux repository in a completely embedded, in-memory-only mode. No data will be persisted, so if you stop or restart the server chassis all data will be lost. While this is actually beneficial for quick experimentation and testing purposes, it is naturally not desirable for a \"real\" repository: you'd want your metadata to stick around even when the server goes offline. Additional options for configuring Crux , including with persistence, can be found at the end of this page.","title":"c. Configure Crux connector"},{"location":"getting-started/setup/#6-start-the-connector-instance","text":"curl -k -X POST \"https://localhost:9443/open-metadata/admin-services/users/admin/servers/crux/instance\" Detailed explanation Up to this point we have only configured the connector, but have not actually started it. This final API call tells Egeria to start the connector, based on the configuration the previous API calls defined. Response from connector instance startup { \"class\" : \"SuccessMessageResponse\" , \"relatedHTTPCode\" : 200 , \"successMessage\" : \"Fri Feb 12 20:34:16 GMT 2021 crux is running the following services: [Open Metadata Repository Services (OMRS)]\" } It may take 10-15 seconds to complete, but the example response above indicates that the connector instance is now running. Other startup information of potential interest Back in the console where the server chassis is running, you should see the audit log printing out a large amount of information as the startup is running. Most of this is related to the registration of type definition details with the repository. ODPi Egeria ____ __ ___ ___ ______ _____ ____ _ _ ___ / __ \\ / |/ // | / ____/ / ___/ ___ ____ _ __ ___ ____ / _ \\ / / __ / / / _ /__ ____ _ _ / / / // /|_/ // /| | / / __ \\__ \\ / _ \\ / __/| | / // _ \\ / __/ / /_/ // // | / _\\ / /_ / | / _// || | / /_/ // / / // ___ |/ /_/ / ___/ // __// / | |/ // __// / / __ // // / \\ / /_ / _// / // / / / / / \\____//_/ /_//_/ |_|\\____/ /____/ \\___//_/ |___/ \\___//_/ /_/ /_/ \\__/\\//___//_/ \\__//_/ /_/ /_/ :: Powered by Spring Boot (v2.3.3.RELEASE) :: 2021-02-12 20:27:40.812 INFO 61953 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 9443 (https) 2021-02-12 20:27:48.963 INFO 61953 --- [ main] o.s.b.w.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 9443 (https) with context path '' Fri Feb 12 20:27:42 GMT 2021 No OMAG servers listed in startup configuration Fri Feb 12 20:27:49 GMT 2021 OMAG server platform ready for more configuration Fri Feb 12 20:34:04 GMT 2021 crux Startup OMRS-AUDIT-0064 The Open Metadata Repository Services (OMRS) has initialized the audit log for the Metadata Server called crux Fri Feb 12 20:34:04 GMT 2021 crux Startup OMAG-ADMIN-0001 The crux server is configured with a max page size of 1000 Fri Feb 12 20:34:04 GMT 2021 crux Startup OMRS-AUDIT-0001 The Open Metadata Repository Services (OMRS) is initializing the subsystems to support a new server Fri Feb 12 20:34:04 GMT 2021 crux Startup OMRS-AUDIT-0003 The local repository is initializing the metadata collection named crux with an id of aa1f9067-7bba-4f65-ac0d-bd64e7ac7e6e Fri Feb 12 20:34:04 GMT 2021 crux Startup OMRS-AUDIT-0029 The local repository outbound event manager is initializing Fri Feb 12 20:34:04 GMT 2021 crux Information OMRS-CRUX-REPOSITORY-0001 The Crux repository is starting a new server instance Fri Feb 12 20:34:04 GMT 2021 crux Information OMRS-CRUX-REPOSITORY-0003 The Crux repository is starting a new in-memory instance Fri Feb 12 20:34:14 GMT 2021 crux Information OMRS-CRUX-REPOSITORY-0004 The Crux repository has started a new instance for server crux, detected Crux version 21.02-1.15.0-beta Fri Feb 12 20:34:14 GMT 2021 crux Information OMRS-AUDIT-0050 The Open Metadata Repository Services (OMRS) is about to process open metadata archive Open Metadata Types Fri Feb 12 20:34:14 GMT 2021 crux Types OMRS-AUDIT-0301 The local server has added a new type called object with a unique identifier of 1c4b21f4-0b67-41a7-a6ed-2af185eb9b3b and a version number of 1 from ODPi Egeria (2.6) ... Fri Feb 12 20:34:14 GMT 2021 crux Types OMRS-AUDIT-0303 The local server has updated an existing type called SupportedDiscoveryService with a unique identifier of dff45aeb-c65e-428c-9ab3-d756bc5d8dbb to version number of 3 using a patch from ODPi Egeria (2.6) Fri Feb 12 20:34:14 GMT 2021 crux Information OMRS-AUDIT-0053 The Open Metadata Repository Services (OMRS) has processed 698 types and 0 instances from open metadata archive Open Metadata Types Fri Feb 12 20:34:14 GMT 2021 crux Startup OMRS-AUDIT-0004 Connecting to the metadata highway Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0005 Connecting to open metadata repository cohort mycohort Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0029 The mycohort cohort inbound event manager is initializing Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0030 Registering the mycohort event consumer with the local repository outbound event manager Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0030 Registering the Local Repository Content (TypeDef) Manager event consumer with the mycohort cohort inbound event manager Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0030 Registering the Local Repository Inbound Instance Events event consumer with the mycohort cohort inbound event manager Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0031 The mycohort cohort inbound event manager is starting with 1 type definition event consumer(s) and 1 instance event consumer(s) Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0026 Initializing listener for cohort mycohort Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0019 An OMRS Topic Connector has registered with an event bus connector for topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic Fri Feb 12 20:34:15 GMT 2021 crux Startup OCF-KAFKA-TOPIC-CONNECTOR-0001 Connecting to Apache Kafka Topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic with a server identifier of 1e0c241c-d4d0-48b2-92c7-e4aa0115b15f Fri Feb 12 20:34:15 GMT 2021 crux Startup OCF-KAFKA-TOPIC-CONNECTOR-0015 The local server is attempting to connect to Kafka, attempt 1 Fri Feb 12 20:34:15 GMT 2021 crux Startup OCF-KAFKA-TOPIC-CONNECTOR-0003 10 properties passed to the Apache Kafka Consumer for topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic Fri Feb 12 20:34:15 GMT 2021 crux Startup OCF-KAFKA-TOPIC-CONNECTOR-0002 10 properties passed to the Apache Kafka Producer for topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic Fri Feb 12 20:34:15 GMT 2021 crux Startup OCF-KAFKA-TOPIC-CONNECTOR-0010 The Apache Kafka producer for topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic is starting up with 0 buffered messages Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0015 The listener thread for an OMRS Topic Connector for topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic has started Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0020 An OMRS Topic Connector is ready to send and receive events on topic OMRSTopic.openmetadata.repositoryservices.cohort.mycohort.OMRSTopic Fri Feb 12 20:34:15 GMT 2021 crux Cohort OMRS-AUDIT-0060 Registering with open metadata repository cohort mycohort using metadata collection id aa1f9067-7bba-4f65-ac0d-bd64e7ac7e6e Fri Feb 12 20:34:15 GMT 2021 crux Cohort OMRS-AUDIT-0062 Requesting registration information from other members of the open metadata repository cohort mycohort Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0031 The local repository outbound event manager is starting with 1 type definition event consumer(s) and 1 instance event consumer(s) Fri Feb 12 20:34:15 GMT 2021 crux Startup OMRS-AUDIT-0032 The local repository outbound event manager is sending out the 698 type definition events that were generated and buffered during server initialization Fri Feb 12 20:34:16 GMT 2021 crux Startup OMRS-AUDIT-0007 The Open Metadata Repository Services (OMRS) has initialized Fri Feb 12 20:34:16 GMT 2021 crux Startup OMAG-ADMIN-0004 The crux server has successfully completed start up. The following services are running: [Open Metadata Repository Services (OMRS)] This final line indicates that the server has now started up and completed its registration with the cohort.","title":"6. Start the connector instance"},{"location":"getting-started/setup/#options-for-configuring-crux","text":"","title":"Options for configuring Crux"},{"location":"getting-started/setup/#pluggable-persistence","text":"There are many options for configuring Crux itself. A list of overall persistence modules and deeper configuration options for each can be found through Crux's own documentation . To enable persistence, send in the JSON document configuration outlined in Crux's own documentation directly to the cruxConfig key of the configurationProperties property of Egeria's connector configuration: Example persistent configuration 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 { \"class\" : \"Connection\" , \"connectorType\" : { \"class\" : \"ConnectorType\" , \"connectorProviderClassName\" : \"org.odpi.egeria.connectors.juxt.crux.repositoryconnector.CruxOMRSRepositoryConnectorProvider\" }, \"configurationProperties\" : { \"cruxConfig\" : { \"egeria.crux.lucene/lucene-store\" : { \"db-dir\" : \"data/servers/crux/lucene\" }, \"crux/index-store\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-index\" } }, \"crux/document-store\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-docs\" } }, \"crux/tx-log\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-tx\" } } } } } The one exception to simply using Crux's JSON configuration as-is are the lines 9-11 above: these configure a Lucene index built and maintained directly as part of the connector's code-base, and therefore in a separate namespace from Crux's own configuration. It is highly recommended to use this Lucene index as it offers significant performance improvements for any text-based queries. The remainder of the configuration in this example defines RocksDB to act as the persistence layer for Crux's index and document stores, as well as its transaction log. You may need to download additional dependencies Depending on the persistence you choose to use, you may need to download additional dependencies and place them into the same directory as the connector. For example, when using RocksDB you will need the following: pro.juxt.crux:crux-rocksdb org.rocksdb:rocksdbjni com.github.jnr:jnr-ffi You can generally determine the additional dependencies you will need by looking at the project.clj file of relevant Crux module -- specifically its :dependencies section. For example, sticking with RocksDB, here is the project.clj : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ( defproject pro.juxt.crux/crux-rocksdb \"crux-git-version\" :description \"Crux RocksDB\" :plugins [[ lein-parent \"0.3.8\" ]] :parent-project { :path \"../project.clj\" :inherit [ :repositories :deploy-repositories :managed-dependencies :pedantic? :global-vars :license :url :pom-addition ]} :scm { :dir \"..\" } :dependencies [[ org.clojure/clojure \"1.10.3\" ] [ pro.juxt.crux/crux-core \"crux-git-version\" ] [ pro.juxt.crux/crux-metrics \"crux-git-version\" :scope \"provided\" ] [ org.rocksdb/rocksdbjni \"6.12.7\" ] [ com.github.jnr/jnr-ffi \"2.1.12\" ]] :middleware [ leiningen.project-version/middleware ]) Note that its dependencies include org.rocksdb:rocksdbjni and com.github.jnr:jnr-ffi . The third dependency given in the previous slide is this Crux persistence module itself ( pro.juxt.crux:crux-rocksdb ).","title":"Pluggable persistence"},{"location":"getting-started/setup/#connector-options","text":"There are currently two configuration options for the connector itself: Option Description luceneRegexes Controls whether the connector will interpret unquoted regexes as Lucene-compatible (true) or not (false): in the latter case ensuring that we fallback to full Java regex checking (which will be significantly slower). syncIndex Controls whether the connector will wait for the Crux indexes to be updated before returning from write operations (true) or only that they are transactionally persisted (false). Example configuration showing the default settings { \"class\" : \"Connection\" , \"connectorType\" : { \"class\" : \"ConnectorType\" , \"connectorProviderClassName\" : \"org.odpi.egeria.connectors.juxt.crux.repositoryconnector.CruxOMRSRepositoryConnectorProvider\" }, \"configurationProperties\" : { \"cruxConfig\" : { }, \"luceneRegexes\" : true , \"syncIndex\" : true } }","title":"Connector options"},{"location":"high-availability/limitations/","text":"Limitations \u00b6 There are a number of limitations to be aware of with the high availability configuration: Must use a non-embedded Crux back-end Write operations will only be consistent when using a non-embedded Crux back-end: e.g. Kafka, S3, or JDBC. Read operations are eventually consistent Since the indexes are local to each pod, read operations will be eventually consistent: the specific pod to which a query is routed may not yet have updated its embedded index with the results of the very latest write operations from some other pod. Cannot yet be dynamically scaled Currently configuration of Egeria requires making a number of REST API calls, which limits how dynamic we can be in adding or removing pods to an already-running cluster (in particular: we cannot rely on a readiness probe to indicate pod readiness to process actual work, but only its readiness to be configured ). We hope to address this soon by allowing configuration and startup to be done without relying on REST calls, at which point we should be able to also support dynamically adding and removing pods from the cluster.","title":"Limitations"},{"location":"high-availability/limitations/#limitations","text":"There are a number of limitations to be aware of with the high availability configuration: Must use a non-embedded Crux back-end Write operations will only be consistent when using a non-embedded Crux back-end: e.g. Kafka, S3, or JDBC. Read operations are eventually consistent Since the indexes are local to each pod, read operations will be eventually consistent: the specific pod to which a query is routed may not yet have updated its embedded index with the results of the very latest write operations from some other pod. Cannot yet be dynamically scaled Currently configuration of Egeria requires making a number of REST API calls, which limits how dynamic we can be in adding or removing pods to an already-running cluster (in particular: we cannot rely on a readiness probe to indicate pod readiness to process actual work, but only its readiness to be configured ). We hope to address this soon by allowing configuration and startup to be done without relying on REST calls, at which point we should be able to also support dynamically adding and removing pods from the cluster.","title":"Limitations"},{"location":"high-availability/sample/","text":"Sample \u00b6 A sample Helm chart is provided under cts/charts/ec-ha-crux . This chart starts up a number of different elements and configures them in a specific sequence. Startup \u00b6 When it is first deployed, the Helm chart starts a number of pods and services: for Crux, Kafka, execution of the Performance Test Suite and a pod used for configuration. Each Crux pod runs its own separate OMAG Server Platform, in its own JVM, and a script in the init-and-report pod will wait until all three pods' OMAG Server Platforms are running before proceeding to any of the following steps. (The headless service allows each pod to be directly addressed, without load-balancing, to do such a check.) Configure \u00b6 The next script creates a singular configuration document via the pts pod, and deploys this common configuration to each of the pods (again using the headless service to directly address each one individually): each will have a separate crux server configured with the same Crux Plugin Repository Connector (same metadata collection ID). When the /instance is called against each pod to start the connector, each will create a local index and instance of the ICruxAPI interface: all pointing to the same golden stores (in this example, Kafka) where all persistence for Crux is handled. All servers will refer to the singular crux load-balancing service as their root URL. Run \u00b6 Now when we start the Performance Test Suite, all traffic to the technology under test is routed via this crux load-balancing service: which will round-robin each request it receives to the underlying pods running the Crux plugin repository connector. Kafka has a similar service, which handles load-balancing across its own pods for all write operations. Outages \u00b6 Should there be any outage (in the example above, both a Crux pod and a Kafka pod going down) the Kubernetes services will simply stop routing traffic to those pods and the overall service will continue uninterrupted.","title":"Sample"},{"location":"high-availability/sample/#sample","text":"A sample Helm chart is provided under cts/charts/ec-ha-crux . This chart starts up a number of different elements and configures them in a specific sequence.","title":"Sample"},{"location":"high-availability/sample/#startup","text":"When it is first deployed, the Helm chart starts a number of pods and services: for Crux, Kafka, execution of the Performance Test Suite and a pod used for configuration. Each Crux pod runs its own separate OMAG Server Platform, in its own JVM, and a script in the init-and-report pod will wait until all three pods' OMAG Server Platforms are running before proceeding to any of the following steps. (The headless service allows each pod to be directly addressed, without load-balancing, to do such a check.)","title":"Startup"},{"location":"high-availability/sample/#configure","text":"The next script creates a singular configuration document via the pts pod, and deploys this common configuration to each of the pods (again using the headless service to directly address each one individually): each will have a separate crux server configured with the same Crux Plugin Repository Connector (same metadata collection ID). When the /instance is called against each pod to start the connector, each will create a local index and instance of the ICruxAPI interface: all pointing to the same golden stores (in this example, Kafka) where all persistence for Crux is handled. All servers will refer to the singular crux load-balancing service as their root URL.","title":"Configure"},{"location":"high-availability/sample/#run","text":"Now when we start the Performance Test Suite, all traffic to the technology under test is routed via this crux load-balancing service: which will round-robin each request it receives to the underlying pods running the Crux plugin repository connector. Kafka has a similar service, which handles load-balancing across its own pods for all write operations.","title":"Run"},{"location":"high-availability/sample/#outages","text":"Should there be any outage (in the example above, both a Crux pod and a Kafka pod going down) the Kubernetes services will simply stop routing traffic to those pods and the overall service will continue uninterrupted.","title":"Outages"},{"location":"migrating/build-migrator/","text":"Build migrator \u00b6 You may also want to build the migrator yourself, particularly if you are extending it or helping to develop new capabilities within it. Clone \u00b6 Begin by cloning this repository to your build machine. $ git clone https://github.com/odpi/egeria-connector-crux.git Clone output Cloning into 'egeria-connector-crux'... remote: Enumerating objects: 531, done. remote: Counting objects: 100% (531/531), done. remote: Compressing objects: 100% (193/193), done. remote: Total 531 (delta 168), reused 446 (delta 101), pack-reused 0 Receiving objects: 100% (531/531), 162.39 KiB | 1.01 MiB/s, done. Resolving deltas: 100% (168/168), done. Build \u00b6 Run the build through Maven. Minimum version requirements You will need to have at least Java version 11 installed as well as Apache Maven (at least version 3.6). mvn clean install Build output [INFO] Scanning for projects... [INFO] ------------------------------------------------------------------------ [INFO] Reactor Build Order: [INFO] [INFO] Overall Crux Connector Module [pom] [INFO] Egeria Connector for Crux [jar] [INFO] Migration utilities for Crux Connector [jar] [INFO] [INFO] ------------< org.odpi.egeria:egeria-connector-crux-module >------------ [INFO] Building Overall Crux Connector Module 2.9-SNAPSHOT [1/3] [INFO] --------------------------------[ pom ]--------------------------------- [INFO] [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ egeria-connector-crux-module --- [INFO] Deleting .../egeria-connector-crux/target [INFO] [INFO] --- maven-enforcer-plugin:3.0.0-M3:enforce (enforce-versions) @ egeria-connector-crux-module --- [INFO] [INFO] --- apache-rat-plugin:0.13:check (rat-check) @ egeria-connector-crux-module --- [INFO] Added 3 additional default licenses. [INFO] Enabled default license matchers. [INFO] Added 2 custom approved licenses. [INFO] Will parse SCM ignores for exclusions... [INFO] Parsing exclusions from .../egeria-connector-crux/.gitignore [INFO] Finished adding exclusions from SCM ignore files. [INFO] 103 implicit excludes (use -debug for more details). [INFO] 30 explicit excludes (use -debug for more details). [INFO] 86 resources included (use -debug for more details) [INFO] Rat check: Summary over all files. Unapproved: 0, unknown: 0, generated: 0, approved: 54 licenses. [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:prepare-agent (agent) @ egeria-connector-crux-module --- [INFO] argLine set to -javaagent:/Users/cgrote/.m2/repository/org/jacoco/org.jacoco.agent/0.8.6/org.jacoco.agent-0.8.6-runtime.jar=destfile=.../egeria-connector-crux/target/jacoco.exec [INFO] [INFO] --- maven-source-plugin:3.2.1:jar-no-fork (attach-sources) @ egeria-connector-crux-module --- [INFO] [INFO] --- maven-javadoc-plugin:3.2.0:jar (attach-javadocs) @ egeria-connector-crux-module --- [INFO] Not executing Javadoc as the project is not a Java classpath-capable package [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:report (report) @ egeria-connector-crux-module --- [INFO] Skipping JaCoCo execution due to missing execution data file. [INFO] [INFO] --- maven-dependency-plugin:3.1.2:analyze-only (analyze) @ egeria-connector-crux-module --- [INFO] Skipping pom project [INFO] [INFO] --- maven-install-plugin:2.4:install (default-install) @ egeria-connector-crux-module --- [INFO] Installing .../egeria-connector-crux/pom.xml to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-module/2.9-SNAPSHOT/egeria-connector-crux-module-2.9-SNAPSHOT.pom [INFO] [INFO] ---------------< org.odpi.egeria:egeria-connector-crux >---------------- [INFO] Building Egeria Connector for Crux 2.9-SNAPSHOT [2/3] [INFO] --------------------------------[ jar ]--------------------------------- [INFO] [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ egeria-connector-crux --- [INFO] Deleting .../egeria-connector-crux/connector/target [INFO] [INFO] --- maven-enforcer-plugin:3.0.0-M3:enforce (enforce-versions) @ egeria-connector-crux --- [INFO] [INFO] --- apache-rat-plugin:0.13:check (rat-check) @ egeria-connector-crux --- [INFO] Added 3 additional default licenses. [INFO] Enabled default license matchers. [INFO] Added 2 custom approved licenses. [INFO] Will parse SCM ignores for exclusions... [INFO] Finished adding exclusions from SCM ignore files. [INFO] 62 implicit excludes (use -debug for more details). [INFO] 30 explicit excludes (use -debug for more details). [INFO] 29 resources included (use -debug for more details) [INFO] Rat check: Summary over all files. Unapproved: 0, unknown: 0, generated: 0, approved: 29 licenses. [INFO] [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ egeria-connector-crux --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 1 resource [INFO] [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ egeria-connector-crux --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 26 source files to .../egeria-connector-crux/connector/target/classes [INFO] [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ egeria-connector-crux --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 1 resource [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:prepare-agent (agent) @ egeria-connector-crux --- [INFO] argLine set to -javaagent:/Users/cgrote/.m2/repository/org/jacoco/org.jacoco.agent/0.8.6/org.jacoco.agent-0.8.6-runtime.jar=destfile=.../egeria-connector-crux/connector/target/jacoco.exec [INFO] [INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ egeria-connector-crux --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 1 source file to .../egeria-connector-crux/connector/target/test-classes [INFO] [INFO] --- maven-surefire-plugin:3.0.0-M5:test (default-test) @ egeria-connector-crux --- [INFO] [INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ egeria-connector-crux --- [INFO] Building jar: .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT.jar [INFO] [INFO] --- maven-source-plugin:3.2.1:jar-no-fork (attach-sources) @ egeria-connector-crux --- [INFO] Building jar: .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-sources.jar [INFO] [INFO] --- maven-javadoc-plugin:3.2.0:jar (attach-javadocs) @ egeria-connector-crux --- [INFO] No previous run data found, generating javadoc. [INFO] Building jar: .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-javadoc.jar [INFO] [INFO] --- maven-assembly-plugin:3.3.0:single (default) @ egeria-connector-crux --- [INFO] Building jar: .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-jar-with-dependencies.jar [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:report (report) @ egeria-connector-crux --- [INFO] Skipping JaCoCo execution due to missing execution data file. [INFO] [INFO] --- maven-dependency-plugin:3.1.2:analyze-only (analyze) @ egeria-connector-crux --- [INFO] No dependency problems found [INFO] [INFO] --- maven-install-plugin:2.4:install (default-install) @ egeria-connector-crux --- [INFO] Installing .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux/2.9-SNAPSHOT/egeria-connector-crux-2.9-SNAPSHOT.jar [INFO] Installing .../egeria-connector-crux/connector/pom.xml to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux/2.9-SNAPSHOT/egeria-connector-crux-2.9-SNAPSHOT.pom [INFO] Installing .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-sources.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux/2.9-SNAPSHOT/egeria-connector-crux-2.9-SNAPSHOT-sources.jar [INFO] Installing .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-javadoc.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux/2.9-SNAPSHOT/egeria-connector-crux-2.9-SNAPSHOT-javadoc.jar [INFO] Installing .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-jar-with-dependencies.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux/2.9-SNAPSHOT/egeria-connector-crux-2.9-SNAPSHOT-jar-with-dependencies.jar [INFO] [INFO] -----------< org.odpi.egeria:egeria-connector-crux-migrator >----------- [INFO] Building Migration utilities for Crux Connector 2.9-SNAPSHOT [3/3] [INFO] --------------------------------[ jar ]--------------------------------- [INFO] [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ egeria-connector-crux-migrator --- [INFO] Deleting .../egeria-connector-crux/migrator/target [INFO] [INFO] --- maven-enforcer-plugin:3.0.0-M3:enforce (enforce-versions) @ egeria-connector-crux-migrator --- [INFO] [INFO] --- apache-rat-plugin:0.13:check (rat-check) @ egeria-connector-crux-migrator --- [INFO] Added 3 additional default licenses. [INFO] Enabled default license matchers. [INFO] Added 2 custom approved licenses. [INFO] Will parse SCM ignores for exclusions... [INFO] Finished adding exclusions from SCM ignore files. [INFO] 62 implicit excludes (use -debug for more details). [INFO] 30 explicit excludes (use -debug for more details). [INFO] 4 resources included (use -debug for more details) [INFO] Rat check: Summary over all files. Unapproved: 0, unknown: 0, generated: 0, approved: 4 licenses. [INFO] [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ egeria-connector-crux-migrator --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 0 resource [INFO] [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ egeria-connector-crux-migrator --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 3 source files to .../egeria-connector-crux/migrator/target/classes [INFO] [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ egeria-connector-crux-migrator --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] skip non existing resourceDirectory .../egeria-connector-crux/migrator/src/test/resources [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:prepare-agent (agent) @ egeria-connector-crux-migrator --- [INFO] argLine set to -javaagent:/Users/cgrote/.m2/repository/org/jacoco/org.jacoco.agent/0.8.6/org.jacoco.agent-0.8.6-runtime.jar=destfile=.../egeria-connector-crux/migrator/target/jacoco.exec [INFO] [INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ egeria-connector-crux-migrator --- [INFO] Changes detected - recompiling the module! [INFO] [INFO] --- maven-surefire-plugin:3.0.0-M5:test (default-test) @ egeria-connector-crux-migrator --- [INFO] [INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ egeria-connector-crux-migrator --- [INFO] Building jar: .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT.jar [INFO] [INFO] --- maven-source-plugin:3.2.1:jar-no-fork (attach-sources) @ egeria-connector-crux-migrator --- [INFO] Building jar: .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-sources.jar [INFO] [INFO] --- maven-javadoc-plugin:3.2.0:jar (attach-javadocs) @ egeria-connector-crux-migrator --- [INFO] No previous run data found, generating javadoc. [INFO] Building jar: .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-javadoc.jar [INFO] [INFO] --- maven-assembly-plugin:3.3.0:single (default) @ egeria-connector-crux-migrator --- [INFO] Building jar: .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-jar-with-dependencies.jar [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:report (report) @ egeria-connector-crux-migrator --- [INFO] Skipping JaCoCo execution due to missing execution data file. [INFO] [INFO] --- maven-dependency-plugin:3.1.2:analyze-only (analyze) @ egeria-connector-crux-migrator --- [INFO] No dependency problems found [INFO] [INFO] --- maven-install-plugin:2.4:install (default-install) @ egeria-connector-crux-migrator --- [INFO] Installing .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-migrator/2.9-SNAPSHOT/egeria-connector-crux-migrator-2.9-SNAPSHOT.jar [INFO] Installing .../egeria-connector-crux/migrator/pom.xml to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-migrator/2.9-SNAPSHOT/egeria-connector-crux-migrator-2.9-SNAPSHOT.pom [INFO] Installing .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-sources.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-migrator/2.9-SNAPSHOT/egeria-connector-crux-migrator-2.9-SNAPSHOT-sources.jar [INFO] Installing .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-javadoc.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-migrator/2.9-SNAPSHOT/egeria-connector-crux-migrator-2.9-SNAPSHOT-javadoc.jar [INFO] Installing .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-jar-with-dependencies.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-migrator/2.9-SNAPSHOT/egeria-connector-crux-migrator-2.9-SNAPSHOT-jar-with-dependencies.jar [INFO] ------------------------------------------------------------------------ [INFO] Reactor Summary for Overall Crux Connector Module 2.9-SNAPSHOT: [INFO] [INFO] Overall Crux Connector Module ...................... SUCCESS [ 3.187 s] [INFO] Egeria Connector for Crux .......................... SUCCESS [ 8.959 s] [INFO] Migration utilities for Crux Connector ............. SUCCESS [ 18.382 s] [INFO] ------------------------------------------------------------------------ [INFO] BUILD SUCCESS [INFO] ------------------------------------------------------------------------ [INFO] Total time: 30.652 s [INFO] Finished at: 2021-04-19T13:26:54+01:00 [INFO] ------------------------------------------------------------------------ The build creates the file .../egeria-connector-crux-migrator/target/egeria-connector-crux-migrator-{version}-jar-with-dependencies.jar . This is the migrator, which you can use just as if you had downloaded it in the first step of the Migration instructions. You can now proceed with the migration from step 2 onwards using this build migrator.","title":"Build migrator"},{"location":"migrating/build-migrator/#build-migrator","text":"You may also want to build the migrator yourself, particularly if you are extending it or helping to develop new capabilities within it.","title":"Build migrator"},{"location":"migrating/build-migrator/#clone","text":"Begin by cloning this repository to your build machine. $ git clone https://github.com/odpi/egeria-connector-crux.git Clone output Cloning into 'egeria-connector-crux'... remote: Enumerating objects: 531, done. remote: Counting objects: 100% (531/531), done. remote: Compressing objects: 100% (193/193), done. remote: Total 531 (delta 168), reused 446 (delta 101), pack-reused 0 Receiving objects: 100% (531/531), 162.39 KiB | 1.01 MiB/s, done. Resolving deltas: 100% (168/168), done.","title":"Clone"},{"location":"migrating/build-migrator/#build","text":"Run the build through Maven. Minimum version requirements You will need to have at least Java version 11 installed as well as Apache Maven (at least version 3.6). mvn clean install Build output [INFO] Scanning for projects... [INFO] ------------------------------------------------------------------------ [INFO] Reactor Build Order: [INFO] [INFO] Overall Crux Connector Module [pom] [INFO] Egeria Connector for Crux [jar] [INFO] Migration utilities for Crux Connector [jar] [INFO] [INFO] ------------< org.odpi.egeria:egeria-connector-crux-module >------------ [INFO] Building Overall Crux Connector Module 2.9-SNAPSHOT [1/3] [INFO] --------------------------------[ pom ]--------------------------------- [INFO] [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ egeria-connector-crux-module --- [INFO] Deleting .../egeria-connector-crux/target [INFO] [INFO] --- maven-enforcer-plugin:3.0.0-M3:enforce (enforce-versions) @ egeria-connector-crux-module --- [INFO] [INFO] --- apache-rat-plugin:0.13:check (rat-check) @ egeria-connector-crux-module --- [INFO] Added 3 additional default licenses. [INFO] Enabled default license matchers. [INFO] Added 2 custom approved licenses. [INFO] Will parse SCM ignores for exclusions... [INFO] Parsing exclusions from .../egeria-connector-crux/.gitignore [INFO] Finished adding exclusions from SCM ignore files. [INFO] 103 implicit excludes (use -debug for more details). [INFO] 30 explicit excludes (use -debug for more details). [INFO] 86 resources included (use -debug for more details) [INFO] Rat check: Summary over all files. Unapproved: 0, unknown: 0, generated: 0, approved: 54 licenses. [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:prepare-agent (agent) @ egeria-connector-crux-module --- [INFO] argLine set to -javaagent:/Users/cgrote/.m2/repository/org/jacoco/org.jacoco.agent/0.8.6/org.jacoco.agent-0.8.6-runtime.jar=destfile=.../egeria-connector-crux/target/jacoco.exec [INFO] [INFO] --- maven-source-plugin:3.2.1:jar-no-fork (attach-sources) @ egeria-connector-crux-module --- [INFO] [INFO] --- maven-javadoc-plugin:3.2.0:jar (attach-javadocs) @ egeria-connector-crux-module --- [INFO] Not executing Javadoc as the project is not a Java classpath-capable package [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:report (report) @ egeria-connector-crux-module --- [INFO] Skipping JaCoCo execution due to missing execution data file. [INFO] [INFO] --- maven-dependency-plugin:3.1.2:analyze-only (analyze) @ egeria-connector-crux-module --- [INFO] Skipping pom project [INFO] [INFO] --- maven-install-plugin:2.4:install (default-install) @ egeria-connector-crux-module --- [INFO] Installing .../egeria-connector-crux/pom.xml to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-module/2.9-SNAPSHOT/egeria-connector-crux-module-2.9-SNAPSHOT.pom [INFO] [INFO] ---------------< org.odpi.egeria:egeria-connector-crux >---------------- [INFO] Building Egeria Connector for Crux 2.9-SNAPSHOT [2/3] [INFO] --------------------------------[ jar ]--------------------------------- [INFO] [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ egeria-connector-crux --- [INFO] Deleting .../egeria-connector-crux/connector/target [INFO] [INFO] --- maven-enforcer-plugin:3.0.0-M3:enforce (enforce-versions) @ egeria-connector-crux --- [INFO] [INFO] --- apache-rat-plugin:0.13:check (rat-check) @ egeria-connector-crux --- [INFO] Added 3 additional default licenses. [INFO] Enabled default license matchers. [INFO] Added 2 custom approved licenses. [INFO] Will parse SCM ignores for exclusions... [INFO] Finished adding exclusions from SCM ignore files. [INFO] 62 implicit excludes (use -debug for more details). [INFO] 30 explicit excludes (use -debug for more details). [INFO] 29 resources included (use -debug for more details) [INFO] Rat check: Summary over all files. Unapproved: 0, unknown: 0, generated: 0, approved: 29 licenses. [INFO] [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ egeria-connector-crux --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 1 resource [INFO] [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ egeria-connector-crux --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 26 source files to .../egeria-connector-crux/connector/target/classes [INFO] [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ egeria-connector-crux --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 1 resource [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:prepare-agent (agent) @ egeria-connector-crux --- [INFO] argLine set to -javaagent:/Users/cgrote/.m2/repository/org/jacoco/org.jacoco.agent/0.8.6/org.jacoco.agent-0.8.6-runtime.jar=destfile=.../egeria-connector-crux/connector/target/jacoco.exec [INFO] [INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ egeria-connector-crux --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 1 source file to .../egeria-connector-crux/connector/target/test-classes [INFO] [INFO] --- maven-surefire-plugin:3.0.0-M5:test (default-test) @ egeria-connector-crux --- [INFO] [INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ egeria-connector-crux --- [INFO] Building jar: .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT.jar [INFO] [INFO] --- maven-source-plugin:3.2.1:jar-no-fork (attach-sources) @ egeria-connector-crux --- [INFO] Building jar: .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-sources.jar [INFO] [INFO] --- maven-javadoc-plugin:3.2.0:jar (attach-javadocs) @ egeria-connector-crux --- [INFO] No previous run data found, generating javadoc. [INFO] Building jar: .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-javadoc.jar [INFO] [INFO] --- maven-assembly-plugin:3.3.0:single (default) @ egeria-connector-crux --- [INFO] Building jar: .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-jar-with-dependencies.jar [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:report (report) @ egeria-connector-crux --- [INFO] Skipping JaCoCo execution due to missing execution data file. [INFO] [INFO] --- maven-dependency-plugin:3.1.2:analyze-only (analyze) @ egeria-connector-crux --- [INFO] No dependency problems found [INFO] [INFO] --- maven-install-plugin:2.4:install (default-install) @ egeria-connector-crux --- [INFO] Installing .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux/2.9-SNAPSHOT/egeria-connector-crux-2.9-SNAPSHOT.jar [INFO] Installing .../egeria-connector-crux/connector/pom.xml to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux/2.9-SNAPSHOT/egeria-connector-crux-2.9-SNAPSHOT.pom [INFO] Installing .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-sources.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux/2.9-SNAPSHOT/egeria-connector-crux-2.9-SNAPSHOT-sources.jar [INFO] Installing .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-javadoc.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux/2.9-SNAPSHOT/egeria-connector-crux-2.9-SNAPSHOT-javadoc.jar [INFO] Installing .../egeria-connector-crux/connector/target/egeria-connector-crux-2.9-SNAPSHOT-jar-with-dependencies.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux/2.9-SNAPSHOT/egeria-connector-crux-2.9-SNAPSHOT-jar-with-dependencies.jar [INFO] [INFO] -----------< org.odpi.egeria:egeria-connector-crux-migrator >----------- [INFO] Building Migration utilities for Crux Connector 2.9-SNAPSHOT [3/3] [INFO] --------------------------------[ jar ]--------------------------------- [INFO] [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ egeria-connector-crux-migrator --- [INFO] Deleting .../egeria-connector-crux/migrator/target [INFO] [INFO] --- maven-enforcer-plugin:3.0.0-M3:enforce (enforce-versions) @ egeria-connector-crux-migrator --- [INFO] [INFO] --- apache-rat-plugin:0.13:check (rat-check) @ egeria-connector-crux-migrator --- [INFO] Added 3 additional default licenses. [INFO] Enabled default license matchers. [INFO] Added 2 custom approved licenses. [INFO] Will parse SCM ignores for exclusions... [INFO] Finished adding exclusions from SCM ignore files. [INFO] 62 implicit excludes (use -debug for more details). [INFO] 30 explicit excludes (use -debug for more details). [INFO] 4 resources included (use -debug for more details) [INFO] Rat check: Summary over all files. Unapproved: 0, unknown: 0, generated: 0, approved: 4 licenses. [INFO] [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ egeria-connector-crux-migrator --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 0 resource [INFO] [INFO] --- maven-compiler-plugin:3.8.1:compile (default-compile) @ egeria-connector-crux-migrator --- [INFO] Changes detected - recompiling the module! [INFO] Compiling 3 source files to .../egeria-connector-crux/migrator/target/classes [INFO] [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ egeria-connector-crux-migrator --- [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] skip non existing resourceDirectory .../egeria-connector-crux/migrator/src/test/resources [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:prepare-agent (agent) @ egeria-connector-crux-migrator --- [INFO] argLine set to -javaagent:/Users/cgrote/.m2/repository/org/jacoco/org.jacoco.agent/0.8.6/org.jacoco.agent-0.8.6-runtime.jar=destfile=.../egeria-connector-crux/migrator/target/jacoco.exec [INFO] [INFO] --- maven-compiler-plugin:3.8.1:testCompile (default-testCompile) @ egeria-connector-crux-migrator --- [INFO] Changes detected - recompiling the module! [INFO] [INFO] --- maven-surefire-plugin:3.0.0-M5:test (default-test) @ egeria-connector-crux-migrator --- [INFO] [INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ egeria-connector-crux-migrator --- [INFO] Building jar: .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT.jar [INFO] [INFO] --- maven-source-plugin:3.2.1:jar-no-fork (attach-sources) @ egeria-connector-crux-migrator --- [INFO] Building jar: .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-sources.jar [INFO] [INFO] --- maven-javadoc-plugin:3.2.0:jar (attach-javadocs) @ egeria-connector-crux-migrator --- [INFO] No previous run data found, generating javadoc. [INFO] Building jar: .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-javadoc.jar [INFO] [INFO] --- maven-assembly-plugin:3.3.0:single (default) @ egeria-connector-crux-migrator --- [INFO] Building jar: .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-jar-with-dependencies.jar [INFO] [INFO] --- jacoco-maven-plugin:0.8.6:report (report) @ egeria-connector-crux-migrator --- [INFO] Skipping JaCoCo execution due to missing execution data file. [INFO] [INFO] --- maven-dependency-plugin:3.1.2:analyze-only (analyze) @ egeria-connector-crux-migrator --- [INFO] No dependency problems found [INFO] [INFO] --- maven-install-plugin:2.4:install (default-install) @ egeria-connector-crux-migrator --- [INFO] Installing .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-migrator/2.9-SNAPSHOT/egeria-connector-crux-migrator-2.9-SNAPSHOT.jar [INFO] Installing .../egeria-connector-crux/migrator/pom.xml to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-migrator/2.9-SNAPSHOT/egeria-connector-crux-migrator-2.9-SNAPSHOT.pom [INFO] Installing .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-sources.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-migrator/2.9-SNAPSHOT/egeria-connector-crux-migrator-2.9-SNAPSHOT-sources.jar [INFO] Installing .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-javadoc.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-migrator/2.9-SNAPSHOT/egeria-connector-crux-migrator-2.9-SNAPSHOT-javadoc.jar [INFO] Installing .../egeria-connector-crux/migrator/target/egeria-connector-crux-migrator-2.9-SNAPSHOT-jar-with-dependencies.jar to /Users/cgrote/.m2/repository/org/odpi/egeria/egeria-connector-crux-migrator/2.9-SNAPSHOT/egeria-connector-crux-migrator-2.9-SNAPSHOT-jar-with-dependencies.jar [INFO] ------------------------------------------------------------------------ [INFO] Reactor Summary for Overall Crux Connector Module 2.9-SNAPSHOT: [INFO] [INFO] Overall Crux Connector Module ...................... SUCCESS [ 3.187 s] [INFO] Egeria Connector for Crux .......................... SUCCESS [ 8.959 s] [INFO] Migration utilities for Crux Connector ............. SUCCESS [ 18.382 s] [INFO] ------------------------------------------------------------------------ [INFO] BUILD SUCCESS [INFO] ------------------------------------------------------------------------ [INFO] Total time: 30.652 s [INFO] Finished at: 2021-04-19T13:26:54+01:00 [INFO] ------------------------------------------------------------------------ The build creates the file .../egeria-connector-crux-migrator/target/egeria-connector-crux-migrator-{version}-jar-with-dependencies.jar . This is the migrator, which you can use just as if you had downloaded it in the first step of the Migration instructions. You can now proceed with the migration from step 2 onwards using this build migrator.","title":"Build"},{"location":"migrating/how-migration-works/","text":"How migration works \u00b6 The connector embeds its own persistence layer (storage) for metadata in Crux. While we try to keep this underlying storage unchanged as much as possible to ease moving from one version of the connector to another, this is not always possible. It may therefore be necessary to occasionally migrate any pre-existing metadata stored in the embedded Crux repository in order to make use of the latest features and performance benefits of a new version of the connector. Persistence layer version must be compatible with connector version To ensure the integrity of the metadata, the connector will validate that the version of the persistence matches the version the connector expects before even attempting to run -- if this validation fails, you will see an OMRS-CRUX-REPOSITORY-500-003 error in the audit log to indicate that you must first migrate the metadata before running this version of the connector. In other words: if migration is needed, the newer version of the connector will not allow you to run against an older set of metadata without first running the migration. Your only options will be to continue to use an older version of the connector (with which your pre-existing metadata is compatible), or to run this offline migration of your repository and then run the newer version of the connector. The migration itself runs outside the connector (while the connector is offline), in order to maximize the throughput of the in-place upgrade of the repository. The time it takes to run the migration naturally depends on a number of factors, such as the amount of pre-existing metadata that must be migrated and the specific changes needed by the upgrade. As a very approximate metric, we would expect the in-place upgrade to be capable of migrating 60-100 metadata instances (entities or relationships) per second. So 10 000 instances should take approximately 2 minutes. Change log \u00b6 There should be no need to actually understand these details, as the connector (and migration) will handle them for you. However, for the interested reader, the following changes were made to the storage layer in the specified release: 2.9 \u00b6 InstanceAuditHeaderMapping no longer separates the type GUID and supertype GUIDs, but places all such information into a single vector (for improved search performance) RelationshipMapping no longer has separate properties for each entity proxy, but stores them as a vector: this retains their ordering, but allows relationships to be more efficiently searched from either related entity","title":"How migration works"},{"location":"migrating/how-migration-works/#how-migration-works","text":"The connector embeds its own persistence layer (storage) for metadata in Crux. While we try to keep this underlying storage unchanged as much as possible to ease moving from one version of the connector to another, this is not always possible. It may therefore be necessary to occasionally migrate any pre-existing metadata stored in the embedded Crux repository in order to make use of the latest features and performance benefits of a new version of the connector. Persistence layer version must be compatible with connector version To ensure the integrity of the metadata, the connector will validate that the version of the persistence matches the version the connector expects before even attempting to run -- if this validation fails, you will see an OMRS-CRUX-REPOSITORY-500-003 error in the audit log to indicate that you must first migrate the metadata before running this version of the connector. In other words: if migration is needed, the newer version of the connector will not allow you to run against an older set of metadata without first running the migration. Your only options will be to continue to use an older version of the connector (with which your pre-existing metadata is compatible), or to run this offline migration of your repository and then run the newer version of the connector. The migration itself runs outside the connector (while the connector is offline), in order to maximize the throughput of the in-place upgrade of the repository. The time it takes to run the migration naturally depends on a number of factors, such as the amount of pre-existing metadata that must be migrated and the specific changes needed by the upgrade. As a very approximate metric, we would expect the in-place upgrade to be capable of migrating 60-100 metadata instances (entities or relationships) per second. So 10 000 instances should take approximately 2 minutes.","title":"How migration works"},{"location":"migrating/how-migration-works/#change-log","text":"There should be no need to actually understand these details, as the connector (and migration) will handle them for you. However, for the interested reader, the following changes were made to the storage layer in the specified release:","title":"Change log"},{"location":"migrating/how-migration-works/#29","text":"InstanceAuditHeaderMapping no longer separates the type GUID and supertype GUIDs, but places all such information into a single vector (for improved search performance) RelationshipMapping no longer has separate properties for each entity proxy, but stores them as a vector: this retains their ordering, but allows relationships to be more efficiently searched from either related entity","title":"2.9"},{"location":"migrating/run-migration/","text":"Run migration \u00b6 1. Obtain migrator \u00b6 Start by downloading the Crux repository migrator: Latest release Latest snapshot The migrator is egeria-connector-crux-migrator-{version}-jar-with-dependencies.jar 2. Configure repository \u00b6 Before running the migrator, define the configuration of your repository. The configuration must be defined in a JSON file, following Crux's JSON configuration format . Take Crux configuration from Egeria connector configuration The simplest way to ensure this matches the configuration used by your connector is to copy the cruxConfig property from the request you POST to Egeria to configure your connector. Simply be certain to replace any relative paths with absolute paths to data to ensure the migrator can find the metadata. Example connector configuration in Egeria 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 { \"class\" : \"Connection\" , \"connectorType\" : { \"class\" : \"ConnectorType\" , \"connectorProviderClassName\" : \"org.odpi.egeria.connectors.juxt.crux.repositoryconnector.CruxOMRSRepositoryConnectorProvider\" }, \"configurationProperties\" : { \"cruxConfig\" : { \"crux/index-store\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-index\" } }, \"crux/document-store\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-docs\" } }, \"crux/tx-log\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-tx\" } }, \"egeria.crux.lucene/lucene-store\" : { \"db-dir\" : \"data/servers/crux/lucene\" } } } } 3. Make a backup \u00b6 As the migration runs in-place, it is always a good practice to take a backup of your repository first. Different configurations will require different approaches to backup. If your configuration makes use of pluggable components that have their own backup utilities (Kafka, JDBC, etc) then you should follow the best practices for backing up those components themselves: e.g. from Apache Kafka or the database vendor. For pluggable components that persist their data directly to the filesystem (RocksDB, Lucene, LMDB, etc), you may be able to simply backup the files directly. Ensure connector is not running before taking backup In all cases, you should ensure that your connector is shutdown (not running), and that any data is appropriately quiesced prior to running the backup. Example filesystem backup $ tar cvf backup.tar .../data/servers/crux a .../data/servers/crux a .../data/servers/crux/rdb-index a .../data/servers/crux/lucene a .../data/servers/crux/config a .../data/servers/crux/cohorts a .../data/servers/crux/rdb-tx a .../data/servers/crux/rdb-docs ... 4. Run the in-place upgrade \u00b6 Run the following command to execute the in-place upgrade: java -jar egeria-connector-crux-migrator-*-jar-with-dependencies.jar config.json ... where config.json is the file containing your repository's configuration. If you run the migrator and no migration is actually needed, the output will indicate that your repository is already at the necessary version to work with this version of the connector, and no migration is needed. You can simply proceed with running the connector. Example output when no migration is needed Starting a Crux node using configuration: config.json SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\". SLF4J: Defaulting to no-operation (NOP) logger implementation SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. ... checking if migration is needed (crux.api.java.JCruxNode@25c4bb06) This node is already at the latest version of the persistence layer -- no migration needed. If a migration is necessary, it will immediately begin to run. The output will indicate the existing version of the persistence layer, and the version that is expected by this version of the connector. If you are making a jump across several migrations, you may see this last line appear multiple times with different existing versions listed each time: the in-place upgrade sequentially applies the necessary migrations step-by-step. Example output when migration is required Starting a Crux node using configuration: config.json SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\". SLF4J: Defaulting to no-operation (NOP) logger implementation SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. ... checking if migration is needed (crux.api.java.JCruxNode@25c4bb06) The node is at version -1, while latest is 2 -- migrating... 5. Start the connector \u00b6 Once the previous (in-place upgrade) command completes, you should now be able to start your connector. See the Getting started section for more details.","title":"Run migration"},{"location":"migrating/run-migration/#run-migration","text":"","title":"Run migration"},{"location":"migrating/run-migration/#1-obtain-migrator","text":"Start by downloading the Crux repository migrator: Latest release Latest snapshot The migrator is egeria-connector-crux-migrator-{version}-jar-with-dependencies.jar","title":"1. Obtain migrator"},{"location":"migrating/run-migration/#2-configure-repository","text":"Before running the migrator, define the configuration of your repository. The configuration must be defined in a JSON file, following Crux's JSON configuration format . Take Crux configuration from Egeria connector configuration The simplest way to ensure this matches the configuration used by your connector is to copy the cruxConfig property from the request you POST to Egeria to configure your connector. Simply be certain to replace any relative paths with absolute paths to data to ensure the migrator can find the metadata. Example connector configuration in Egeria 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 { \"class\" : \"Connection\" , \"connectorType\" : { \"class\" : \"ConnectorType\" , \"connectorProviderClassName\" : \"org.odpi.egeria.connectors.juxt.crux.repositoryconnector.CruxOMRSRepositoryConnectorProvider\" }, \"configurationProperties\" : { \"cruxConfig\" : { \"crux/index-store\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-index\" } }, \"crux/document-store\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-docs\" } }, \"crux/tx-log\" : { \"kv-store\" : { \"crux/module\" : \"crux.rocksdb/->kv-store\" , \"db-dir\" : \"data/servers/crux/rdb-tx\" } }, \"egeria.crux.lucene/lucene-store\" : { \"db-dir\" : \"data/servers/crux/lucene\" } } } }","title":"2. Configure repository"},{"location":"migrating/run-migration/#3-make-a-backup","text":"As the migration runs in-place, it is always a good practice to take a backup of your repository first. Different configurations will require different approaches to backup. If your configuration makes use of pluggable components that have their own backup utilities (Kafka, JDBC, etc) then you should follow the best practices for backing up those components themselves: e.g. from Apache Kafka or the database vendor. For pluggable components that persist their data directly to the filesystem (RocksDB, Lucene, LMDB, etc), you may be able to simply backup the files directly. Ensure connector is not running before taking backup In all cases, you should ensure that your connector is shutdown (not running), and that any data is appropriately quiesced prior to running the backup. Example filesystem backup $ tar cvf backup.tar .../data/servers/crux a .../data/servers/crux a .../data/servers/crux/rdb-index a .../data/servers/crux/lucene a .../data/servers/crux/config a .../data/servers/crux/cohorts a .../data/servers/crux/rdb-tx a .../data/servers/crux/rdb-docs ...","title":"3. Make a backup"},{"location":"migrating/run-migration/#4-run-the-in-place-upgrade","text":"Run the following command to execute the in-place upgrade: java -jar egeria-connector-crux-migrator-*-jar-with-dependencies.jar config.json ... where config.json is the file containing your repository's configuration. If you run the migrator and no migration is actually needed, the output will indicate that your repository is already at the necessary version to work with this version of the connector, and no migration is needed. You can simply proceed with running the connector. Example output when no migration is needed Starting a Crux node using configuration: config.json SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\". SLF4J: Defaulting to no-operation (NOP) logger implementation SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. ... checking if migration is needed (crux.api.java.JCruxNode@25c4bb06) This node is already at the latest version of the persistence layer -- no migration needed. If a migration is necessary, it will immediately begin to run. The output will indicate the existing version of the persistence layer, and the version that is expected by this version of the connector. If you are making a jump across several migrations, you may see this last line appear multiple times with different existing versions listed each time: the in-place upgrade sequentially applies the necessary migrations step-by-step. Example output when migration is required Starting a Crux node using configuration: config.json SLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\". SLF4J: Defaulting to no-operation (NOP) logger implementation SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. ... checking if migration is needed (crux.api.java.JCruxNode@25c4bb06) The node is at version -1, while latest is 2 -- migrating...","title":"4. Run the in-place upgrade"},{"location":"migrating/run-migration/#5-start-the-connector","text":"Once the previous (in-place upgrade) command completes, you should now be able to start your connector. See the Getting started section for more details.","title":"5. Start the connector"}]}